============================= test session starts ==============================
platform linux -- Python 3.13.1, pytest-9.0.2, pluggy-1.6.0 -- /home/john/elspeth-rapid/.venv/bin/python
cachedir: .pytest_cache
hypothesis profile 'ci' -> deadline=None, phases=(Phase.explicit, Phase.reuse, Phase.generate, Phase.shrink)
rootdir: /home/john/elspeth-rapid
configfile: pyproject.toml
plugins: hypothesis-6.150.0, asyncio-1.3.0, dotenv-0.5.2, cov-5.0.0, anyio-4.12.1
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 3355 items

tests/audit/test_plugin_schema_contracts.py::test_all_sources_set_output_schema PASSED [  0%]
tests/audit/test_plugin_schema_contracts.py::test_all_transforms_set_schemas PASSED [  0%]
tests/audit/test_plugin_schema_contracts.py::test_all_sinks_set_input_schema PASSED [  0%]
tests/audit/test_plugin_schema_contracts.py::test_plugin_init_does_not_perform_io PASSED [  0%]
tests/cli/test_cli.py::TestCLIBasics::test_cli_exists PASSED             [  0%]
tests/cli/test_cli.py::TestCLIBasics::test_version_flag PASSED           [  0%]
tests/cli/test_cli.py::TestCLIBasics::test_help_flag PASSED              [  0%]
tests/cli/test_cli.py::TestRunCommandExecutesTransforms::test_transforms_from_config_are_instantiated PASSED [  0%]
tests/cli/test_cli.py::TestRunCommandExecutesTransforms::test_field_mapper_transform_modifies_output PASSED [  0%]
tests/cli/test_cli.py::TestPurgeCommand::test_purge_help PASSED          [  0%]
tests/cli/test_cli.py::TestPurgeCommand::test_purge_dry_run PASSED       [  0%]
tests/cli/test_cli.py::TestPurgeCommand::test_purge_with_retention_override PASSED [  0%]
tests/cli/test_cli.py::TestPurgeCommand::test_purge_requires_confirmation PASSED [  0%]
tests/cli/test_cli.py::TestPurgeCommand::test_purge_with_yes_flag_skips_confirmation PASSED [  0%]
tests/cli/test_cli.py::TestPurgeCommand::test_purge_with_payloads_to_delete PASSED [  0%]
tests/cli/test_cli.py::TestPurgeCommand::test_purge_uses_config_payload_store_settings PASSED [  0%]
tests/cli/test_cli.py::TestPurgeCommand::test_purge_rejects_unsupported_backend PASSED [  0%]
tests/cli/test_cli.py::TestResumeCommand::test_resume_help PASSED        [  0%]
tests/cli/test_cli.py::TestResumeCommand::test_resume_nonexistent_run PASSED [  0%]
tests/cli/test_cli.py::TestResumeCommand::test_resume_completed_run PASSED [  0%]
tests/cli/test_cli.py::TestResumeCommand::test_resume_running_run PASSED [  0%]
tests/cli/test_cli.py::TestResumeCommand::test_resume_failed_run_without_checkpoint PASSED [  0%]
tests/cli/test_cli.py::TestResumeCommand::test_resume_shows_resume_point_info PASSED [  0%]
tests/cli/test_cli.py::TestTildeExpansion::test_run_expands_tilde_in_settings_path PASSED [  0%]
tests/cli/test_cli.py::TestTildeExpansion::test_validate_expands_tilde_in_settings_path PASSED [  0%]
tests/cli/test_cli_helpers.py::test_instantiate_plugins_from_config PASSED [  0%]
tests/cli/test_cli_helpers.py::test_instantiate_plugins_raises_on_invalid_plugin PASSED [  0%]
tests/cli/test_execution_result.py::TestExecutionResult::test_execution_result_importable PASSED [  0%]
tests/cli/test_execution_result.py::TestExecutionResult::test_execution_result_full PASSED [  0%]
tests/cli/test_explain_command.py::TestExplainCommand::test_explain_requires_run_id PASSED [  0%]
tests/cli/test_explain_command.py::TestExplainCommand::test_explain_no_tui_mode PASSED [  0%]
tests/cli/test_explain_command.py::TestExplainCommand::test_explain_json_output PASSED [  0%]
tests/cli/test_explain_tui.py::TestExplainScreen::test_can_import_screen PASSED [  0%]
tests/cli/test_explain_tui.py::TestExplainScreen::test_explain_screen_has_tree_widget PASSED [  1%]
tests/cli/test_explain_tui.py::TestExplainScreen::test_explain_screen_has_detail_panel PASSED [  1%]
tests/cli/test_explain_tui.py::TestExplainScreen::test_screen_initializes_with_db PASSED [  1%]
tests/cli/test_explain_tui.py::TestExplainScreen::test_screen_loads_pipeline_structure PASSED [  1%]
tests/cli/test_explain_tui.py::TestExplainScreen::test_tree_selection_updates_detail_panel PASSED [  1%]
tests/cli/test_explain_tui.py::TestExplainScreen::test_render_without_data PASSED [  1%]
tests/cli/test_explain_tui.py::TestExplainScreen::test_render_with_pipeline_data PASSED [  1%]
tests/cli/test_explain_tui.py::TestExplainScreenStateModel::test_uninitialized_state_without_db PASSED [  1%]
tests/cli/test_explain_tui.py::TestExplainScreenStateModel::test_uninitialized_state_with_partial_config PASSED [  1%]
tests/cli/test_explain_tui.py::TestExplainScreenStateModel::test_loaded_state_with_valid_data PASSED [  1%]
tests/cli/test_explain_tui.py::TestExplainScreenStateModel::test_loaded_state_has_lineage_data PASSED [  1%]
tests/cli/test_explain_tui.py::TestExplainScreenStateModel::test_loaded_state_with_empty_data_on_nonexistent_run PASSED [  1%]
tests/cli/test_explain_tui.py::TestExplainScreenStateModel::test_state_exhaustive_matching PASSED [  1%]
tests/cli/test_plugin_errors.py::test_unknown_source_plugin_error PASSED [  1%]
tests/cli/test_plugin_errors.py::test_unknown_transform_plugin_error PASSED [  1%]
tests/cli/test_plugin_errors.py::test_plugin_initialization_error PASSED [  1%]
tests/cli/test_plugin_errors.py::test_schema_extraction_from_instance PASSED [  1%]
tests/cli/test_plugin_errors.py::test_fork_join_validation PASSED        [  1%]
tests/cli/test_plugin_errors.py::test_fork_to_separate_sinks_without_coalesce PASSED [  1%]
tests/cli/test_plugin_errors.py::test_coalesce_compatible_branch_schemas PASSED [  1%]
tests/cli/test_plugin_errors.py::test_dynamic_schema_to_specific_schema_validation PASSED [  1%]
tests/cli/test_plugins_command.py::TestPluginInfo::test_plugin_info_creation PASSED [  1%]
tests/cli/test_plugins_command.py::TestPluginInfo::test_plugin_info_is_frozen PASSED [  1%]
tests/cli/test_plugins_command.py::TestPluginInfo::test_plugin_info_equality PASSED [  1%]
tests/cli/test_plugins_command.py::TestPluginInfo::test_plugin_info_inequality PASSED [  1%]
tests/cli/test_plugins_command.py::TestPluginInfo::test_plugin_info_hashable PASSED [  1%]
tests/cli/test_plugins_command.py::TestPluginInfo::test_build_plugin_registry_returns_plugin_info PASSED [  1%]
tests/cli/test_plugins_command.py::TestPluginInfo::test_build_plugin_registry_includes_all_discovered_plugins PASSED [  1%]
tests/cli/test_plugins_command.py::TestPluginsListCommand::test_plugins_list_shows_sources PASSED [  1%]
tests/cli/test_plugins_command.py::TestPluginsListCommand::test_plugins_list_shows_sinks PASSED [  1%]
tests/cli/test_plugins_command.py::TestPluginsListCommand::test_plugins_list_has_sections PASSED [  1%]
tests/cli/test_plugins_command.py::TestPluginsListCommand::test_plugins_list_type_filter PASSED [  1%]
tests/cli/test_plugins_command.py::TestPluginsListCommand::test_plugins_list_invalid_type PASSED [  1%]
tests/cli/test_run_command.py::TestRunCommand::test_run_executes_pipeline PASSED [  1%]
tests/cli/test_run_command.py::TestRunCommand::test_run_shows_summary PASSED [  2%]
tests/cli/test_run_command.py::TestRunCommand::test_run_without_execute_shows_warning PASSED [  2%]
tests/cli/test_run_command.py::TestRunCommand::test_run_missing_settings PASSED [  2%]
tests/cli/test_run_command.py::TestRunCommand::test_run_dry_run_mode PASSED [  2%]
tests/cli/test_run_command.py::TestRunCommandWithNewConfig::test_run_with_readme_config PASSED [  2%]
tests/cli/test_run_command.py::TestRunCommandWithNewConfig::test_run_rejects_old_config_format PASSED [  2%]
tests/cli/test_run_command.py::TestRunCommandWithNewConfig::test_run_shows_pydantic_errors PASSED [  2%]
tests/cli/test_run_command.py::TestRunCommandWithNewConfig::test_run_shows_output_sink_error PASSED [  2%]
tests/cli/test_run_command.py::TestRunCommandGraphValidation::test_run_validates_graph_before_execution PASSED [  2%]
tests/cli/test_run_command.py::TestRunCommandGraphValidation::test_dry_run_shows_graph_info PASSED [  2%]
tests/cli/test_run_command.py::TestRunCommandResourceCleanup::test_run_closes_database_after_success PASSED [  2%]
tests/cli/test_run_command.py::TestRunCommandResourceCleanup::test_run_closes_database_after_failure PASSED [  2%]
tests/cli/test_run_command.py::TestRunCommandProgress::test_run_shows_progress_output PASSED [  2%]
tests/cli/test_run_command.py::TestRunCommandProgress::test_run_progress_shows_counters PASSED [  2%]
tests/cli/test_run_command.py::TestRunCommandGraphReuse::test_run_constructs_graph_once PASSED [  2%]
tests/cli/test_run_command.py::TestRunCommandGraphReuse::test_validated_graph_has_consistent_node_ids PASSED [  2%]
tests/cli/test_run_with_row_plugins.py::TestRunWithTransforms::test_run_with_passthrough_preserves_data PASSED [  2%]
tests/cli/test_run_with_row_plugins.py::TestRunWithTransforms::test_run_with_field_mapper_renames_columns PASSED [  2%]
tests/cli/test_run_with_row_plugins.py::TestRunWithTransforms::test_run_with_chained_transforms PASSED [  2%]
tests/cli/test_validate_command.py::TestValidateCommand::test_validate_valid_config PASSED [  2%]
tests/cli/test_validate_command.py::TestValidateCommand::test_validate_file_not_found PASSED [  2%]
tests/cli/test_validate_command.py::TestValidateCommand::test_validate_invalid_yaml PASSED [  2%]
tests/cli/test_validate_command.py::TestValidateCommand::test_validate_missing_datasource PASSED [  2%]
tests/cli/test_validate_command.py::TestValidateCommand::test_validate_invalid_output_sink PASSED [  2%]
tests/cli/test_validate_command.py::TestValidateCommandGraphValidation::test_validate_detects_invalid_route PASSED [  2%]
tests/cli/test_validate_command.py::TestValidateCommandGraphValidation::test_validate_shows_graph_info PASSED [  2%]
tests/contracts/sink_contracts/test_csv_sink_contract.py::TestCSVSinkContract::test_sink_has_name PASSED [  2%]
tests/contracts/sink_contracts/test_csv_sink_contract.py::TestCSVSinkContract::test_sink_has_input_schema PASSED [  2%]
tests/contracts/sink_contracts/test_csv_sink_contract.py::TestCSVSinkContract::test_sink_has_determinism PASSED [  2%]
tests/contracts/sink_contracts/test_csv_sink_contract.py::TestCSVSinkContract::test_sink_has_plugin_version PASSED [  2%]
tests/contracts/sink_contracts/test_csv_sink_contract.py::TestCSVSinkContract::test_sink_has_idempotent_flag PASSED [  2%]
tests/contracts/sink_contracts/test_csv_sink_contract.py::TestCSVSinkContract::test_write_returns_artifact_descriptor PASSED [  2%]
tests/contracts/sink_contracts/test_csv_sink_contract.py::TestCSVSinkContract::test_artifact_has_content_hash PASSED [  2%]
tests/contracts/sink_contracts/test_csv_sink_contract.py::TestCSVSinkContract::test_content_hash_is_sha256_hex PASSED [  3%]
tests/contracts/sink_contracts/test_csv_sink_contract.py::TestCSVSinkContract::test_artifact_has_size_bytes PASSED [  3%]
tests/contracts/sink_contracts/test_csv_sink_contract.py::TestCSVSinkContract::test_artifact_has_artifact_type PASSED [  3%]
tests/contracts/sink_contracts/test_csv_sink_contract.py::TestCSVSinkContract::test_artifact_has_path_or_uri PASSED [  3%]
tests/contracts/sink_contracts/test_csv_sink_contract.py::TestCSVSinkContract::test_write_empty_batch_returns_descriptor PASSED [  3%]
tests/contracts/sink_contracts/test_csv_sink_contract.py::TestCSVSinkContract::test_flush_is_idempotent PASSED [  3%]
tests/contracts/sink_contracts/test_csv_sink_contract.py::TestCSVSinkContract::test_close_is_idempotent PASSED [  3%]
tests/contracts/sink_contracts/test_csv_sink_contract.py::TestCSVSinkContract::test_on_start_does_not_raise PASSED [  3%]
tests/contracts/sink_contracts/test_csv_sink_contract.py::TestCSVSinkContract::test_on_complete_does_not_raise PASSED [  3%]
tests/contracts/sink_contracts/test_csv_sink_contract.py::TestCSVSinkDeterminism::test_sink_has_name PASSED [  3%]
tests/contracts/sink_contracts/test_csv_sink_contract.py::TestCSVSinkDeterminism::test_sink_has_input_schema PASSED [  3%]
tests/contracts/sink_contracts/test_csv_sink_contract.py::TestCSVSinkDeterminism::test_sink_has_determinism PASSED [  3%]
tests/contracts/sink_contracts/test_csv_sink_contract.py::TestCSVSinkDeterminism::test_sink_has_plugin_version PASSED [  3%]
tests/contracts/sink_contracts/test_csv_sink_contract.py::TestCSVSinkDeterminism::test_sink_has_idempotent_flag PASSED [  3%]
tests/contracts/sink_contracts/test_csv_sink_contract.py::TestCSVSinkDeterminism::test_write_returns_artifact_descriptor PASSED [  3%]
tests/contracts/sink_contracts/test_csv_sink_contract.py::TestCSVSinkDeterminism::test_artifact_has_content_hash PASSED [  3%]
tests/contracts/sink_contracts/test_csv_sink_contract.py::TestCSVSinkDeterminism::test_content_hash_is_sha256_hex PASSED [  3%]
tests/contracts/sink_contracts/test_csv_sink_contract.py::TestCSVSinkDeterminism::test_artifact_has_size_bytes PASSED [  3%]
tests/contracts/sink_contracts/test_csv_sink_contract.py::TestCSVSinkDeterminism::test_artifact_has_artifact_type PASSED [  3%]
tests/contracts/sink_contracts/test_csv_sink_contract.py::TestCSVSinkDeterminism::test_artifact_has_path_or_uri PASSED [  3%]
tests/contracts/sink_contracts/test_csv_sink_contract.py::TestCSVSinkDeterminism::test_write_empty_batch_returns_descriptor PASSED [  3%]
tests/contracts/sink_contracts/test_csv_sink_contract.py::TestCSVSinkDeterminism::test_flush_is_idempotent PASSED [  3%]
tests/contracts/sink_contracts/test_csv_sink_contract.py::TestCSVSinkDeterminism::test_close_is_idempotent PASSED [  3%]
tests/contracts/sink_contracts/test_csv_sink_contract.py::TestCSVSinkDeterminism::test_on_start_does_not_raise PASSED [  3%]
tests/contracts/sink_contracts/test_csv_sink_contract.py::TestCSVSinkDeterminism::test_on_complete_does_not_raise PASSED [  3%]
tests/contracts/sink_contracts/test_csv_sink_contract.py::TestCSVSinkDeterminism::test_same_data_same_hash PASSED [  3%]
tests/contracts/sink_contracts/test_csv_sink_contract.py::TestCSVSinkDeterminism::test_content_hash_changes_with_data PASSED [  3%]
tests/contracts/sink_contracts/test_csv_sink_contract.py::TestCSVSinkDeterminism::test_csv_sink_content_hash_is_deterministic PASSED [  3%]
tests/contracts/sink_contracts/test_csv_sink_contract.py::TestCSVSinkAppendMode::test_append_mode_adds_rows PASSED [  3%]
tests/contracts/sink_contracts/test_csv_sink_contract.py::TestCSVSinkAppendMode::test_append_to_nonexistent_creates_file PASSED [  3%]
tests/contracts/sink_contracts/test_csv_sink_contract.py::TestCSVSinkPropertyBased::test_csv_sink_handles_arbitrary_rows PASSED [  3%]
tests/contracts/sink_contracts/test_csv_sink_contract.py::TestCSVSinkPropertyBased::test_csv_sink_hash_determinism_property PASSED [  3%]
tests/contracts/sink_contracts/test_csv_sink_contract.py::TestCSVSinkValidation::test_strict_schema_crashes_on_wrong_type PASSED [  3%]
tests/contracts/source_contracts/test_csv_source_contract.py::TestCSVSourceContract::test_source_has_name PASSED [  3%]
tests/contracts/source_contracts/test_csv_source_contract.py::TestCSVSourceContract::test_source_has_output_schema PASSED [  4%]
tests/contracts/source_contracts/test_csv_source_contract.py::TestCSVSourceContract::test_source_has_determinism PASSED [  4%]
tests/contracts/source_contracts/test_csv_source_contract.py::TestCSVSourceContract::test_source_has_plugin_version PASSED [  4%]
tests/contracts/source_contracts/test_csv_source_contract.py::TestCSVSourceContract::test_load_returns_iterator PASSED [  4%]
tests/contracts/source_contracts/test_csv_source_contract.py::TestCSVSourceContract::test_load_yields_source_rows PASSED [  4%]
tests/contracts/source_contracts/test_csv_source_contract.py::TestCSVSourceContract::test_valid_rows_have_data PASSED [  4%]
tests/contracts/source_contracts/test_csv_source_contract.py::TestCSVSourceContract::test_quarantined_rows_have_error PASSED [  4%]
tests/contracts/source_contracts/test_csv_source_contract.py::TestCSVSourceContract::test_quarantined_rows_have_destination PASSED [  4%]
tests/contracts/source_contracts/test_csv_source_contract.py::TestCSVSourceContract::test_close_is_idempotent PASSED [  4%]
tests/contracts/source_contracts/test_csv_source_contract.py::TestCSVSourceContract::test_on_start_does_not_raise PASSED [  4%]
tests/contracts/source_contracts/test_csv_source_contract.py::TestCSVSourceContract::test_on_complete_does_not_raise PASSED [  4%]
tests/contracts/source_contracts/test_csv_source_contract.py::TestCSVSourceContract::test_multiple_loads_yield_consistent_count PASSED [  4%]
tests/contracts/source_contracts/test_csv_source_contract.py::TestCSVSourceContract::test_load_exhaust_does_not_raise PASSED [  4%]
tests/contracts/source_contracts/test_csv_source_contract.py::TestCSVSourceContract::test_csv_source_respects_delimiter PASSED [  4%]
tests/contracts/source_contracts/test_csv_source_contract.py::TestCSVSourceContract::test_csv_source_handles_empty_file PASSED [  4%]
tests/contracts/source_contracts/test_csv_source_contract.py::TestCSVSourceContract::test_csv_source_handles_header_only PASSED [  4%]
tests/contracts/source_contracts/test_csv_source_contract.py::TestCSVSourceQuarantineContract::test_source_has_name PASSED [  4%]
tests/contracts/source_contracts/test_csv_source_contract.py::TestCSVSourceQuarantineContract::test_source_has_output_schema PASSED [  4%]
tests/contracts/source_contracts/test_csv_source_contract.py::TestCSVSourceQuarantineContract::test_source_has_determinism PASSED [  4%]
tests/contracts/source_contracts/test_csv_source_contract.py::TestCSVSourceQuarantineContract::test_source_has_plugin_version PASSED [  4%]
tests/contracts/source_contracts/test_csv_source_contract.py::TestCSVSourceQuarantineContract::test_load_returns_iterator PASSED [  4%]
tests/contracts/source_contracts/test_csv_source_contract.py::TestCSVSourceQuarantineContract::test_load_yields_source_rows PASSED [  4%]
tests/contracts/source_contracts/test_csv_source_contract.py::TestCSVSourceQuarantineContract::test_valid_rows_have_data PASSED [  4%]
tests/contracts/source_contracts/test_csv_source_contract.py::TestCSVSourceQuarantineContract::test_quarantined_rows_have_error PASSED [  4%]
tests/contracts/source_contracts/test_csv_source_contract.py::TestCSVSourceQuarantineContract::test_quarantined_rows_have_destination PASSED [  4%]
tests/contracts/source_contracts/test_csv_source_contract.py::TestCSVSourceQuarantineContract::test_close_is_idempotent PASSED [  4%]
tests/contracts/source_contracts/test_csv_source_contract.py::TestCSVSourceQuarantineContract::test_on_start_does_not_raise PASSED [  4%]
tests/contracts/source_contracts/test_csv_source_contract.py::TestCSVSourceQuarantineContract::test_on_complete_does_not_raise PASSED [  4%]
tests/contracts/source_contracts/test_csv_source_contract.py::TestCSVSourceQuarantineContract::test_multiple_loads_yield_consistent_count PASSED [  4%]
tests/contracts/source_contracts/test_csv_source_contract.py::TestCSVSourceQuarantineContract::test_load_exhaust_does_not_raise PASSED [  4%]
tests/contracts/source_contracts/test_csv_source_contract.py::TestCSVSourceQuarantineContract::test_invalid_rows_are_quarantined PASSED [  4%]
tests/contracts/source_contracts/test_csv_source_contract.py::TestCSVSourceDiscardContract::test_discarded_rows_not_yielded PASSED [  4%]
tests/contracts/source_contracts/test_csv_source_contract.py::TestCSVSourceFileNotFoundContract::test_file_not_found_raises PASSED [  4%]
tests/contracts/test_audit.py::TestRun::test_create_run_with_required_fields PASSED [  5%]
tests/contracts/test_audit.py::TestRun::test_run_status_must_be_enum PASSED [  5%]
tests/contracts/test_audit.py::TestRun::test_run_with_export_status PASSED [  5%]
tests/contracts/test_audit.py::TestNode::test_create_node_with_enum_fields PASSED [  5%]
tests/contracts/test_audit.py::TestNode::test_node_type_is_enum PASSED   [  5%]
tests/contracts/test_audit.py::TestNode::test_determinism_is_enum PASSED [  5%]
tests/contracts/test_audit.py::TestEdge::test_create_edge_with_routing_mode PASSED [  5%]
tests/contracts/test_audit.py::TestEdge::test_default_mode_is_enum PASSED [  5%]
tests/contracts/test_audit.py::TestRow::test_create_row PASSED           [  5%]
tests/contracts/test_audit.py::TestRow::test_row_with_payload_ref PASSED [  5%]
tests/contracts/test_audit.py::TestToken::test_create_token PASSED       [  5%]
tests/contracts/test_audit.py::TestToken::test_token_with_fork_fields PASSED [  5%]
tests/contracts/test_audit.py::TestTokenParent::test_create_token_parent PASSED [  5%]
tests/contracts/test_audit.py::TestTokenParent::test_multi_parent_ordinal PASSED [  5%]
tests/contracts/test_audit.py::TestNodeStateVariants::test_open_state_has_literal_status PASSED [  5%]
tests/contracts/test_audit.py::TestNodeStateVariants::test_completed_state_requires_output PASSED [  5%]
tests/contracts/test_audit.py::TestNodeStateVariants::test_failed_state_has_error_fields PASSED [  5%]
tests/contracts/test_audit.py::TestNodeStateVariants::test_union_type_annotation PASSED [  5%]
tests/contracts/test_audit.py::TestNodeStateVariants::test_frozen_dataclass_immutable PASSED [  5%]
tests/contracts/test_audit.py::TestCall::test_create_call_with_required_fields PASSED [  5%]
tests/contracts/test_audit.py::TestCall::test_call_type_must_be_enum PASSED [  5%]
tests/contracts/test_audit.py::TestCall::test_call_status_must_be_enum PASSED [  5%]
tests/contracts/test_audit.py::TestCall::test_call_with_optional_fields PASSED [  5%]
tests/contracts/test_audit.py::TestArtifact::test_create_artifact PASSED [  5%]
tests/contracts/test_audit.py::TestArtifact::test_artifact_type_is_string_not_enum PASSED [  5%]
tests/contracts/test_audit.py::TestRoutingEvent::test_create_routing_event_with_required_fields PASSED [  5%]
tests/contracts/test_audit.py::TestRoutingEvent::test_routing_mode_must_be_enum PASSED [  5%]
tests/contracts/test_audit.py::TestRoutingEvent::test_routing_event_with_reason PASSED [  5%]
tests/contracts/test_audit.py::TestBatch::test_create_batch_with_required_fields PASSED [  5%]
tests/contracts/test_audit.py::TestBatch::test_batch_status_must_be_enum PASSED [  5%]
tests/contracts/test_audit.py::TestBatch::test_batch_with_completion PASSED [  5%]
tests/contracts/test_audit.py::TestBatchMember::test_create_batch_member PASSED [  5%]
tests/contracts/test_audit.py::TestBatchMember::test_batch_member_ordinals PASSED [  5%]
tests/contracts/test_audit.py::TestBatchOutput::test_create_batch_output_token PASSED [  5%]
tests/contracts/test_audit.py::TestBatchOutput::test_create_batch_output_artifact PASSED [  6%]
tests/contracts/test_audit.py::TestCheckpoint::test_create_checkpoint_with_required_fields PASSED [  6%]
tests/contracts/test_audit.py::TestCheckpoint::test_checkpoint_with_aggregation_state PASSED [  6%]
tests/contracts/test_audit.py::TestCheckpoint::test_checkpoint_created_at_optional PASSED [  6%]
tests/contracts/test_audit.py::TestRowLineage::test_create_row_lineage_with_all_fields PASSED [  6%]
tests/contracts/test_audit.py::TestRowLineage::test_row_lineage_with_purged_payload PASSED [  6%]
tests/contracts/test_audit.py::TestRowLineage::test_row_lineage_hash_always_present PASSED [  6%]
tests/contracts/test_config.py::TestConfigReexports::test_can_import_settings_from_contracts PASSED [  6%]
tests/contracts/test_config.py::TestConfigReexports::test_settings_are_pydantic_models PASSED [  6%]
tests/contracts/test_config.py::TestConfigReexports::test_settings_are_frozen PASSED [  6%]
tests/contracts/test_data.py::TestPluginSchema::test_subclass_validates_input PASSED [  6%]
tests/contracts/test_data.py::TestPluginSchema::test_schema_is_mutable PASSED [  6%]
tests/contracts/test_data.py::TestPluginSchema::test_schema_ignores_extra PASSED [  6%]
tests/contracts/test_enums.py::TestDeterminism::test_has_all_required_values PASSED [  6%]
tests/contracts/test_enums.py::TestDeterminism::test_no_unknown_value PASSED [  6%]
tests/contracts/test_enums.py::TestDeterminism::test_string_values_match_architecture PASSED [  6%]
tests/contracts/test_enums.py::TestRowOutcome::test_is_str_enum PASSED   [  6%]
tests/contracts/test_enums.py::TestRowOutcome::test_has_all_terminal_states PASSED [  6%]
tests/contracts/test_enums.py::TestRowOutcome::test_row_outcome_expanded_exists PASSED [  6%]
tests/contracts/test_enums.py::TestRowOutcome::test_row_outcome_buffered_exists PASSED [  6%]
tests/contracts/test_enums.py::TestRowOutcome::test_row_outcome_buffered_is_not_terminal PASSED [  6%]
tests/contracts/test_enums.py::TestRowOutcome::test_row_outcome_consumed_in_batch_is_terminal PASSED [  6%]
tests/contracts/test_enums.py::TestRowOutcome::test_row_outcome_expanded_is_terminal PASSED [  6%]
tests/contracts/test_enums.py::TestRowOutcome::test_row_outcome_completed_is_terminal PASSED [  6%]
tests/contracts/test_enums.py::TestRowOutcome::test_all_outcomes_have_is_terminal PASSED [  6%]
tests/contracts/test_enums.py::TestRoutingMode::test_routing_mode_values PASSED [  6%]
tests/contracts/test_enums.py::TestEnumCoercion::test_run_status_from_string PASSED [  6%]
tests/contracts/test_enums.py::TestEnumCoercion::test_invalid_value_raises PASSED [  6%]
tests/contracts/test_enums.py::TestTriggerType::test_trigger_type_exists PASSED [  6%]
tests/contracts/test_enums.py::TestTriggerType::test_trigger_type_values PASSED [  6%]
tests/contracts/test_enums.py::TestTriggerType::test_trigger_type_is_str_enum PASSED [  6%]
tests/contracts/test_errors.py::TestExecutionError::test_execution_error_has_required_fields PASSED [  6%]
tests/contracts/test_errors.py::TestExecutionError::test_execution_error_accepts_optional_traceback PASSED [  6%]
tests/contracts/test_errors.py::TestRoutingReason::test_routing_reason_has_rule_field PASSED [  7%]
tests/contracts/test_errors.py::TestRoutingReason::test_routing_reason_accepts_threshold PASSED [  7%]
tests/contracts/test_errors.py::TestTransformReason::test_transform_reason_has_action_field PASSED [  7%]
tests/contracts/test_errors.py::TestTransformReason::test_transform_reason_accepts_optional_fields PASSED [  7%]
tests/contracts/test_identity.py::TestTokenInfo::test_create_token_info PASSED [  7%]
tests/contracts/test_identity.py::TestTokenInfo::test_token_info_with_branch PASSED [  7%]
tests/contracts/test_identity.py::TestTokenInfo::test_token_info_row_data_mutable PASSED [  7%]
tests/contracts/test_plugin_protocols.py::test_source_validates_output_schema_on_init PASSED [  7%]
tests/contracts/test_plugin_schema.py::TestPluginSchemaLocation::test_plugin_schema_importable_from_contracts PASSED [  7%]
tests/contracts/test_plugin_schema.py::TestPluginSchemaLocation::test_schema_validation_error_importable_from_contracts PASSED [  7%]
tests/contracts/test_plugin_schema.py::TestPluginSchemaLocation::test_compatibility_result_importable_from_contracts PASSED [  7%]
tests/contracts/test_plugin_schema.py::TestPluginSchemaLocation::test_validate_row_importable_from_contracts PASSED [  7%]
tests/contracts/test_plugin_schema.py::TestPluginSchemaLocation::test_check_compatibility_importable_from_contracts PASSED [  7%]
tests/contracts/test_plugin_schema.py::TestPluginSchemaNotInOldLocation::test_old_import_path_removed PASSED [  7%]
tests/contracts/test_results.py::TestTransformResultMultiRow::test_transform_result_multi_row_success PASSED [  7%]
tests/contracts/test_results.py::TestTransformResultMultiRow::test_transform_result_success_single_sets_rows_none PASSED [  7%]
tests/contracts/test_results.py::TestTransformResultMultiRow::test_transform_result_is_multi_row PASSED [  7%]
tests/contracts/test_results.py::TestTransformResultMultiRow::test_transform_result_success_multi_rejects_empty_list PASSED [  7%]
tests/contracts/test_results.py::TestTransformResultMultiRow::test_transform_result_error_has_rows_none PASSED [  7%]
tests/contracts/test_results.py::TestTransformResultMultiRow::test_transform_result_has_output_data PASSED [  7%]
tests/contracts/test_results.py::TestTransformResult::test_success_factory PASSED [  7%]
tests/contracts/test_results.py::TestTransformResult::test_error_factory PASSED [  7%]
tests/contracts/test_results.py::TestTransformResult::test_error_factory_with_retryable PASSED [  7%]
tests/contracts/test_results.py::TestTransformResult::test_status_is_literal_not_enum PASSED [  7%]
tests/contracts/test_results.py::TestTransformResult::test_audit_fields_default_to_none PASSED [  7%]
tests/contracts/test_results.py::TestTransformResult::test_audit_fields_can_be_set PASSED [  7%]
tests/contracts/test_results.py::TestTransformResult::test_audit_fields_not_in_repr PASSED [  7%]
tests/contracts/test_results.py::TestGateResult::test_creation PASSED    [  7%]
tests/contracts/test_results.py::TestGateResult::test_audit_fields_default_to_none PASSED [  7%]
tests/contracts/test_results.py::TestGateResult::test_audit_fields_can_be_set PASSED [  7%]
tests/contracts/test_results.py::TestAcceptResultDeleted::test_accept_result_deleted_from_contracts PASSED [  7%]
tests/contracts/test_results.py::TestAcceptResultDeleted::test_accept_result_not_exported PASSED [  7%]
tests/contracts/test_results.py::TestRowResult::test_creation PASSED     [  7%]
tests/contracts/test_results.py::TestRowResult::test_routed_with_sink_name PASSED [  7%]
tests/contracts/test_results.py::TestRowResult::test_token_id_property PASSED [  8%]
tests/contracts/test_results.py::TestRowResult::test_row_id_property PASSED [  8%]
tests/contracts/test_results.py::TestArtifactDescriptor::test_required_fields PASSED [  8%]
tests/contracts/test_results.py::TestArtifactDescriptor::test_uses_artifact_type_not_kind PASSED [  8%]
tests/contracts/test_results.py::TestArtifactDescriptor::test_content_hash_is_required PASSED [  8%]
tests/contracts/test_results.py::TestArtifactDescriptor::test_size_bytes_is_required PASSED [  8%]
tests/contracts/test_results.py::TestArtifactDescriptor::test_metadata_is_optional PASSED [  8%]
tests/contracts/test_results.py::TestArtifactDescriptor::test_metadata_can_be_set PASSED [  8%]
tests/contracts/test_results.py::TestArtifactDescriptor::test_is_frozen PASSED [  8%]
tests/contracts/test_results.py::TestArtifactDescriptorFactories::test_for_file PASSED [  8%]
tests/contracts/test_results.py::TestArtifactDescriptorFactories::test_for_database PASSED [  8%]
tests/contracts/test_results.py::TestArtifactDescriptorFactories::test_for_webhook PASSED [  8%]
tests/contracts/test_results.py::TestArtifactDescriptorFactories::test_for_webhook_with_error_response PASSED [  8%]
tests/contracts/test_results.py::TestArtifactDescriptorTypes::test_file_type PASSED [  8%]
tests/contracts/test_results.py::TestArtifactDescriptorTypes::test_database_type PASSED [  8%]
tests/contracts/test_results.py::TestArtifactDescriptorTypes::test_webhook_type PASSED [  8%]
tests/contracts/test_results.py::TestFailureInfo::test_creation_with_required_fields_only PASSED [  8%]
tests/contracts/test_results.py::TestFailureInfo::test_creation_with_all_fields PASSED [  8%]
tests/contracts/test_results.py::TestFailureInfo::test_from_max_retries_exceeded_factory PASSED [  8%]
tests/contracts/test_results.py::TestFailureInfo::test_is_not_frozen PASSED [  8%]
tests/contracts/test_results.py::TestRowResultWithFailureInfo::test_failed_outcome_with_failure_info PASSED [  8%]
tests/contracts/test_results.py::TestRowResultWithFailureInfo::test_error_field_type_is_failure_info PASSED [  8%]
tests/contracts/test_routing.py::TestRoutingAction::test_has_mode_field PASSED [  8%]
tests/contracts/test_routing.py::TestRoutingAction::test_continue_action PASSED [  8%]
tests/contracts/test_routing.py::TestRoutingAction::test_continue_with_reason PASSED [  8%]
tests/contracts/test_routing.py::TestRoutingAction::test_route_default_move PASSED [  8%]
tests/contracts/test_routing.py::TestRoutingAction::test_route_with_copy_raises PASSED [  8%]
tests/contracts/test_routing.py::TestRoutingAction::test_route_with_reason PASSED [  8%]
tests/contracts/test_routing.py::TestRoutingAction::test_fork_always_copy PASSED [  8%]
tests/contracts/test_routing.py::TestRoutingAction::test_fork_with_reason PASSED [  8%]
tests/contracts/test_routing.py::TestRoutingAction::test_reason_is_immutable PASSED [  8%]
tests/contracts/test_routing.py::TestRoutingAction::test_reason_deep_copied PASSED [  8%]
tests/contracts/test_routing.py::TestRoutingAction::test_frozen PASSED   [  8%]
tests/contracts/test_routing.py::TestRoutingAction::test_fork_to_paths_rejects_empty_list PASSED [  9%]
tests/contracts/test_routing.py::TestRoutingAction::test_fork_to_paths_rejects_duplicate_paths PASSED [  9%]
tests/contracts/test_routing.py::TestRoutingSpec::test_correct_usage_with_enum PASSED [  9%]
tests/contracts/test_routing.py::TestRoutingSpec::test_create_with_move PASSED [  9%]
tests/contracts/test_routing.py::TestRoutingSpec::test_create_with_copy PASSED [  9%]
tests/contracts/test_routing.py::TestRoutingSpec::test_frozen PASSED     [  9%]
tests/contracts/test_routing.py::TestEdgeInfo::test_create_edge_info PASSED [  9%]
tests/contracts/test_routing.py::TestEdgeInfo::test_edge_info_with_copy PASSED [  9%]
tests/contracts/test_routing.py::TestEdgeInfo::test_frozen PASSED        [  9%]
tests/contracts/test_schema_config.py::TestFieldDefinition::test_field_definition_exists PASSED [  9%]
tests/contracts/test_schema_config.py::TestFieldDefinition::test_parse_required_field PASSED [  9%]
tests/contracts/test_schema_config.py::TestFieldDefinition::test_parse_optional_field PASSED [  9%]
tests/contracts/test_schema_config.py::TestFieldDefinition::test_parse_all_types PASSED [  9%]
tests/contracts/test_schema_config.py::TestFieldDefinition::test_parse_invalid_type_raises PASSED [  9%]
tests/contracts/test_schema_config.py::TestFieldDefinition::test_parse_malformed_raises PASSED [  9%]
tests/contracts/test_schema_config.py::TestFieldDefinition::test_parse_hyphenated_field_name_raises PASSED [  9%]
tests/contracts/test_schema_config.py::TestFieldDefinition::test_parse_dotted_field_name_raises PASSED [  9%]
tests/contracts/test_schema_config.py::TestFieldDefinition::test_parse_numeric_prefix_raises PASSED [  9%]
tests/contracts/test_schema_config.py::TestSchemaConfig::test_schema_config_exists PASSED [  9%]
tests/contracts/test_schema_config.py::TestSchemaConfig::test_dynamic_schema PASSED [  9%]
tests/contracts/test_schema_config.py::TestSchemaConfig::test_strict_schema PASSED [  9%]
tests/contracts/test_schema_config.py::TestSchemaConfig::test_free_schema PASSED [  9%]
tests/contracts/test_schema_config.py::TestSchemaConfig::test_explicit_fields_require_mode PASSED [  9%]
tests/contracts/test_schema_config.py::TestSchemaConfig::test_dynamic_ignores_mode PASSED [  9%]
tests/contracts/test_schema_config.py::TestSchemaConfig::test_missing_fields_raises PASSED [  9%]
tests/contracts/test_schema_config.py::TestSchemaConfig::test_empty_fields_raises PASSED [  9%]
tests/contracts/test_schema_config.py::TestSchemaConfig::test_duplicate_field_names_raises PASSED [  9%]
tests/contracts/test_schema_config.py::TestSchemaConfig::test_dict_form_field_specs PASSED [  9%]
tests/contracts/test_schema_config.py::TestSchemaConfig::test_dict_form_optional_field PASSED [  9%]
tests/contracts/test_schema_config.py::TestSchemaConfig::test_mixed_string_and_dict_form PASSED [  9%]
tests/contracts/test_schema_config.py::TestSchemaConfig::test_multi_key_dict_raises_valueerror PASSED [  9%]
tests/contracts/test_schema_config.py::TestSchemaConfig::test_invalid_field_type_raises_valueerror PASSED [  9%]
tests/contracts/test_update_schemas.py::TestUpdateSchemas::test_export_status_update_importable PASSED [  9%]
tests/contracts/test_update_schemas.py::TestUpdateSchemas::test_batch_status_update_importable PASSED [  9%]
tests/contracts/test_update_schemas.py::TestUpdateSchemas::test_export_status_update_partial PASSED [ 10%]
tests/contracts/test_update_schemas.py::TestUpdateSchemas::test_batch_status_update_with_state_id PASSED [ 10%]
tests/contracts/transform_contracts/test_azure_content_safety_contract.py::TestAzureContentSafetyContract::test_transform_has_name PASSED [ 10%]
tests/contracts/transform_contracts/test_azure_content_safety_contract.py::TestAzureContentSafetyContract::test_transform_has_input_schema PASSED [ 10%]
tests/contracts/transform_contracts/test_azure_content_safety_contract.py::TestAzureContentSafetyContract::test_transform_has_output_schema PASSED [ 10%]
tests/contracts/transform_contracts/test_azure_content_safety_contract.py::TestAzureContentSafetyContract::test_transform_has_determinism PASSED [ 10%]
tests/contracts/transform_contracts/test_azure_content_safety_contract.py::TestAzureContentSafetyContract::test_transform_has_plugin_version PASSED [ 10%]
tests/contracts/transform_contracts/test_azure_content_safety_contract.py::TestAzureContentSafetyContract::test_transform_has_batch_awareness_flag PASSED [ 10%]
tests/contracts/transform_contracts/test_azure_content_safety_contract.py::TestAzureContentSafetyContract::test_transform_has_creates_tokens_flag PASSED [ 10%]
tests/contracts/transform_contracts/test_azure_content_safety_contract.py::TestAzureContentSafetyContract::test_process_returns_transform_result PASSED [ 10%]
tests/contracts/transform_contracts/test_azure_content_safety_contract.py::TestAzureContentSafetyContract::test_success_result_has_status PASSED [ 10%]
tests/contracts/transform_contracts/test_azure_content_safety_contract.py::TestAzureContentSafetyContract::test_success_result_has_output_data PASSED [ 10%]
tests/contracts/transform_contracts/test_azure_content_safety_contract.py::TestAzureContentSafetyContract::test_success_single_row_is_dict PASSED [ 10%]
tests/contracts/transform_contracts/test_azure_content_safety_contract.py::TestAzureContentSafetyContract::test_success_multi_row_is_list PASSED [ 10%]
tests/contracts/transform_contracts/test_azure_content_safety_contract.py::TestAzureContentSafetyContract::test_close_is_idempotent PASSED [ 10%]
tests/contracts/transform_contracts/test_azure_content_safety_contract.py::TestAzureContentSafetyContract::test_on_start_does_not_raise PASSED [ 10%]
tests/contracts/transform_contracts/test_azure_content_safety_contract.py::TestAzureContentSafetyContract::test_on_complete_does_not_raise PASSED [ 10%]
tests/contracts/transform_contracts/test_azure_content_safety_contract.py::TestAzureContentSafetyContract::test_process_handles_extra_fields_gracefully PASSED [ 10%]
tests/contracts/transform_contracts/test_azure_content_safety_contract.py::TestAzureContentSafetyContract::test_deterministic_transform_produces_same_output PASSED [ 10%]
tests/contracts/transform_contracts/test_azure_content_safety_contract.py::TestAzureContentSafetyErrorContract::test_transform_has_name PASSED [ 10%]
tests/contracts/transform_contracts/test_azure_content_safety_contract.py::TestAzureContentSafetyErrorContract::test_transform_has_input_schema PASSED [ 10%]
tests/contracts/transform_contracts/test_azure_content_safety_contract.py::TestAzureContentSafetyErrorContract::test_transform_has_output_schema PASSED [ 10%]
tests/contracts/transform_contracts/test_azure_content_safety_contract.py::TestAzureContentSafetyErrorContract::test_transform_has_determinism PASSED [ 10%]
tests/contracts/transform_contracts/test_azure_content_safety_contract.py::TestAzureContentSafetyErrorContract::test_transform_has_plugin_version PASSED [ 10%]
tests/contracts/transform_contracts/test_azure_content_safety_contract.py::TestAzureContentSafetyErrorContract::test_transform_has_batch_awareness_flag PASSED [ 10%]
tests/contracts/transform_contracts/test_azure_content_safety_contract.py::TestAzureContentSafetyErrorContract::test_transform_has_creates_tokens_flag PASSED [ 10%]
tests/contracts/transform_contracts/test_azure_content_safety_contract.py::TestAzureContentSafetyErrorContract::test_process_returns_transform_result PASSED [ 10%]
tests/contracts/transform_contracts/test_azure_content_safety_contract.py::TestAzureContentSafetyErrorContract::test_success_result_has_status PASSED [ 10%]
tests/contracts/transform_contracts/test_azure_content_safety_contract.py::TestAzureContentSafetyErrorContract::test_success_result_has_output_data PASSED [ 10%]
tests/contracts/transform_contracts/test_azure_content_safety_contract.py::TestAzureContentSafetyErrorContract::test_success_single_row_is_dict PASSED [ 10%]
tests/contracts/transform_contracts/test_azure_content_safety_contract.py::TestAzureContentSafetyErrorContract::test_success_multi_row_is_list PASSED [ 10%]
tests/contracts/transform_contracts/test_azure_content_safety_contract.py::TestAzureContentSafetyErrorContract::test_close_is_idempotent PASSED [ 10%]
tests/contracts/transform_contracts/test_azure_content_safety_contract.py::TestAzureContentSafetyErrorContract::test_on_start_does_not_raise PASSED [ 10%]
tests/contracts/transform_contracts/test_azure_content_safety_contract.py::TestAzureContentSafetyErrorContract::test_on_complete_does_not_raise PASSED [ 10%]
tests/contracts/transform_contracts/test_azure_content_safety_contract.py::TestAzureContentSafetyErrorContract::test_error_result_has_reason PASSED [ 11%]
tests/contracts/transform_contracts/test_azure_content_safety_contract.py::TestAzureContentSafetyErrorContract::test_error_result_has_no_output_data PASSED [ 11%]
tests/contracts/transform_contracts/test_azure_content_safety_contract.py::TestAzureContentSafetyErrorContract::test_error_result_has_retryable_flag PASSED [ 11%]
tests/contracts/transform_contracts/test_azure_multi_query_contract.py::TestAzureMultiQueryLLMContract::test_transform_has_name PASSED [ 11%]
tests/contracts/transform_contracts/test_azure_multi_query_contract.py::TestAzureMultiQueryLLMContract::test_transform_has_input_schema PASSED [ 11%]
tests/contracts/transform_contracts/test_azure_multi_query_contract.py::TestAzureMultiQueryLLMContract::test_transform_has_output_schema PASSED [ 11%]
tests/contracts/transform_contracts/test_azure_multi_query_contract.py::TestAzureMultiQueryLLMContract::test_transform_has_determinism PASSED [ 11%]
tests/contracts/transform_contracts/test_azure_multi_query_contract.py::TestAzureMultiQueryLLMContract::test_transform_has_plugin_version PASSED [ 11%]
tests/contracts/transform_contracts/test_azure_multi_query_contract.py::TestAzureMultiQueryLLMContract::test_transform_has_batch_awareness_flag PASSED [ 11%]
tests/contracts/transform_contracts/test_azure_multi_query_contract.py::TestAzureMultiQueryLLMContract::test_transform_has_creates_tokens_flag PASSED [ 11%]
tests/contracts/transform_contracts/test_azure_multi_query_contract.py::TestAzureMultiQueryLLMContract::test_process_returns_transform_result PASSED [ 11%]
tests/contracts/transform_contracts/test_azure_multi_query_contract.py::TestAzureMultiQueryLLMContract::test_success_result_has_status PASSED [ 11%]
tests/contracts/transform_contracts/test_azure_multi_query_contract.py::TestAzureMultiQueryLLMContract::test_success_result_has_output_data PASSED [ 11%]
tests/contracts/transform_contracts/test_azure_multi_query_contract.py::TestAzureMultiQueryLLMContract::test_success_single_row_is_dict PASSED [ 11%]
tests/contracts/transform_contracts/test_azure_multi_query_contract.py::TestAzureMultiQueryLLMContract::test_success_multi_row_is_list PASSED [ 11%]
tests/contracts/transform_contracts/test_azure_multi_query_contract.py::TestAzureMultiQueryLLMContract::test_close_is_idempotent PASSED [ 11%]
tests/contracts/transform_contracts/test_azure_multi_query_contract.py::TestAzureMultiQueryLLMContract::test_on_start_does_not_raise PASSED [ 11%]
tests/contracts/transform_contracts/test_azure_multi_query_contract.py::TestAzureMultiQueryLLMContract::test_on_complete_does_not_raise PASSED [ 11%]
tests/contracts/transform_contracts/test_azure_multi_query_contract.py::TestAzureMultiQueryLLMContract::test_process_handles_extra_fields_gracefully PASSED [ 11%]
tests/contracts/transform_contracts/test_azure_multi_query_contract.py::TestAzureMultiQueryLLMContract::test_deterministic_transform_produces_same_output PASSED [ 11%]
tests/contracts/transform_contracts/test_azure_multi_query_contract.py::TestAzureMultiQueryLLMSpecific::test_query_expansion_matches_cross_product PASSED [ 11%]
tests/contracts/transform_contracts/test_azure_multi_query_contract.py::TestAzureMultiQueryLLMSpecific::test_is_batch_aware_true PASSED [ 11%]
tests/contracts/transform_contracts/test_azure_multi_query_contract.py::TestAzureMultiQueryLLMSpecific::test_creates_tokens_false PASSED [ 11%]
tests/contracts/transform_contracts/test_azure_prompt_shield_contract.py::TestAzurePromptShieldContract::test_transform_has_name PASSED [ 11%]
tests/contracts/transform_contracts/test_azure_prompt_shield_contract.py::TestAzurePromptShieldContract::test_transform_has_input_schema PASSED [ 11%]
tests/contracts/transform_contracts/test_azure_prompt_shield_contract.py::TestAzurePromptShieldContract::test_transform_has_output_schema PASSED [ 11%]
tests/contracts/transform_contracts/test_azure_prompt_shield_contract.py::TestAzurePromptShieldContract::test_transform_has_determinism PASSED [ 11%]
tests/contracts/transform_contracts/test_azure_prompt_shield_contract.py::TestAzurePromptShieldContract::test_transform_has_plugin_version PASSED [ 11%]
tests/contracts/transform_contracts/test_azure_prompt_shield_contract.py::TestAzurePromptShieldContract::test_transform_has_batch_awareness_flag PASSED [ 11%]
tests/contracts/transform_contracts/test_azure_prompt_shield_contract.py::TestAzurePromptShieldContract::test_transform_has_creates_tokens_flag PASSED [ 11%]
tests/contracts/transform_contracts/test_azure_prompt_shield_contract.py::TestAzurePromptShieldContract::test_process_returns_transform_result PASSED [ 11%]
tests/contracts/transform_contracts/test_azure_prompt_shield_contract.py::TestAzurePromptShieldContract::test_success_result_has_status PASSED [ 11%]
tests/contracts/transform_contracts/test_azure_prompt_shield_contract.py::TestAzurePromptShieldContract::test_success_result_has_output_data PASSED [ 11%]
tests/contracts/transform_contracts/test_azure_prompt_shield_contract.py::TestAzurePromptShieldContract::test_success_single_row_is_dict PASSED [ 12%]
tests/contracts/transform_contracts/test_azure_prompt_shield_contract.py::TestAzurePromptShieldContract::test_success_multi_row_is_list PASSED [ 12%]
tests/contracts/transform_contracts/test_azure_prompt_shield_contract.py::TestAzurePromptShieldContract::test_close_is_idempotent PASSED [ 12%]
tests/contracts/transform_contracts/test_azure_prompt_shield_contract.py::TestAzurePromptShieldContract::test_on_start_does_not_raise PASSED [ 12%]
tests/contracts/transform_contracts/test_azure_prompt_shield_contract.py::TestAzurePromptShieldContract::test_on_complete_does_not_raise PASSED [ 12%]
tests/contracts/transform_contracts/test_azure_prompt_shield_contract.py::TestAzurePromptShieldContract::test_process_handles_extra_fields_gracefully PASSED [ 12%]
tests/contracts/transform_contracts/test_azure_prompt_shield_contract.py::TestAzurePromptShieldContract::test_deterministic_transform_produces_same_output PASSED [ 12%]
tests/contracts/transform_contracts/test_azure_prompt_shield_contract.py::TestAzurePromptShieldErrorContract::test_transform_has_name PASSED [ 12%]
tests/contracts/transform_contracts/test_azure_prompt_shield_contract.py::TestAzurePromptShieldErrorContract::test_transform_has_input_schema PASSED [ 12%]
tests/contracts/transform_contracts/test_azure_prompt_shield_contract.py::TestAzurePromptShieldErrorContract::test_transform_has_output_schema PASSED [ 12%]
tests/contracts/transform_contracts/test_azure_prompt_shield_contract.py::TestAzurePromptShieldErrorContract::test_transform_has_determinism PASSED [ 12%]
tests/contracts/transform_contracts/test_azure_prompt_shield_contract.py::TestAzurePromptShieldErrorContract::test_transform_has_plugin_version PASSED [ 12%]
tests/contracts/transform_contracts/test_azure_prompt_shield_contract.py::TestAzurePromptShieldErrorContract::test_transform_has_batch_awareness_flag PASSED [ 12%]
tests/contracts/transform_contracts/test_azure_prompt_shield_contract.py::TestAzurePromptShieldErrorContract::test_transform_has_creates_tokens_flag PASSED [ 12%]
tests/contracts/transform_contracts/test_azure_prompt_shield_contract.py::TestAzurePromptShieldErrorContract::test_process_returns_transform_result PASSED [ 12%]
tests/contracts/transform_contracts/test_azure_prompt_shield_contract.py::TestAzurePromptShieldErrorContract::test_success_result_has_status PASSED [ 12%]
tests/contracts/transform_contracts/test_azure_prompt_shield_contract.py::TestAzurePromptShieldErrorContract::test_success_result_has_output_data PASSED [ 12%]
tests/contracts/transform_contracts/test_azure_prompt_shield_contract.py::TestAzurePromptShieldErrorContract::test_success_single_row_is_dict PASSED [ 12%]
tests/contracts/transform_contracts/test_azure_prompt_shield_contract.py::TestAzurePromptShieldErrorContract::test_success_multi_row_is_list PASSED [ 12%]
tests/contracts/transform_contracts/test_azure_prompt_shield_contract.py::TestAzurePromptShieldErrorContract::test_close_is_idempotent PASSED [ 12%]
tests/contracts/transform_contracts/test_azure_prompt_shield_contract.py::TestAzurePromptShieldErrorContract::test_on_start_does_not_raise PASSED [ 12%]
tests/contracts/transform_contracts/test_azure_prompt_shield_contract.py::TestAzurePromptShieldErrorContract::test_on_complete_does_not_raise PASSED [ 12%]
tests/contracts/transform_contracts/test_azure_prompt_shield_contract.py::TestAzurePromptShieldErrorContract::test_error_result_has_reason PASSED [ 12%]
tests/contracts/transform_contracts/test_azure_prompt_shield_contract.py::TestAzurePromptShieldErrorContract::test_error_result_has_no_output_data PASSED [ 12%]
tests/contracts/transform_contracts/test_azure_prompt_shield_contract.py::TestAzurePromptShieldErrorContract::test_error_result_has_retryable_flag PASSED [ 12%]
tests/contracts/transform_contracts/test_keyword_filter_contract.py::TestKeywordFilterContract::test_transform_has_name PASSED [ 12%]
tests/contracts/transform_contracts/test_keyword_filter_contract.py::TestKeywordFilterContract::test_transform_has_input_schema PASSED [ 12%]
tests/contracts/transform_contracts/test_keyword_filter_contract.py::TestKeywordFilterContract::test_transform_has_output_schema PASSED [ 12%]
tests/contracts/transform_contracts/test_keyword_filter_contract.py::TestKeywordFilterContract::test_transform_has_determinism PASSED [ 12%]
tests/contracts/transform_contracts/test_keyword_filter_contract.py::TestKeywordFilterContract::test_transform_has_plugin_version PASSED [ 12%]
tests/contracts/transform_contracts/test_keyword_filter_contract.py::TestKeywordFilterContract::test_transform_has_batch_awareness_flag PASSED [ 12%]
tests/contracts/transform_contracts/test_keyword_filter_contract.py::TestKeywordFilterContract::test_transform_has_creates_tokens_flag PASSED [ 12%]
tests/contracts/transform_contracts/test_keyword_filter_contract.py::TestKeywordFilterContract::test_process_returns_transform_result PASSED [ 12%]
tests/contracts/transform_contracts/test_keyword_filter_contract.py::TestKeywordFilterContract::test_success_result_has_status PASSED [ 12%]
tests/contracts/transform_contracts/test_keyword_filter_contract.py::TestKeywordFilterContract::test_success_result_has_output_data PASSED [ 13%]
tests/contracts/transform_contracts/test_keyword_filter_contract.py::TestKeywordFilterContract::test_success_single_row_is_dict PASSED [ 13%]
tests/contracts/transform_contracts/test_keyword_filter_contract.py::TestKeywordFilterContract::test_success_multi_row_is_list PASSED [ 13%]
tests/contracts/transform_contracts/test_keyword_filter_contract.py::TestKeywordFilterContract::test_close_is_idempotent PASSED [ 13%]
tests/contracts/transform_contracts/test_keyword_filter_contract.py::TestKeywordFilterContract::test_on_start_does_not_raise PASSED [ 13%]
tests/contracts/transform_contracts/test_keyword_filter_contract.py::TestKeywordFilterContract::test_on_complete_does_not_raise PASSED [ 13%]
tests/contracts/transform_contracts/test_keyword_filter_contract.py::TestKeywordFilterContract::test_process_handles_extra_fields_gracefully PASSED [ 13%]
tests/contracts/transform_contracts/test_keyword_filter_contract.py::TestKeywordFilterContract::test_deterministic_transform_produces_same_output PASSED [ 13%]
tests/contracts/transform_contracts/test_keyword_filter_contract.py::TestKeywordFilterErrorContract::test_transform_has_name PASSED [ 13%]
tests/contracts/transform_contracts/test_keyword_filter_contract.py::TestKeywordFilterErrorContract::test_transform_has_input_schema PASSED [ 13%]
tests/contracts/transform_contracts/test_keyword_filter_contract.py::TestKeywordFilterErrorContract::test_transform_has_output_schema PASSED [ 13%]
tests/contracts/transform_contracts/test_keyword_filter_contract.py::TestKeywordFilterErrorContract::test_transform_has_determinism PASSED [ 13%]
tests/contracts/transform_contracts/test_keyword_filter_contract.py::TestKeywordFilterErrorContract::test_transform_has_plugin_version PASSED [ 13%]
tests/contracts/transform_contracts/test_keyword_filter_contract.py::TestKeywordFilterErrorContract::test_transform_has_batch_awareness_flag PASSED [ 13%]
tests/contracts/transform_contracts/test_keyword_filter_contract.py::TestKeywordFilterErrorContract::test_transform_has_creates_tokens_flag PASSED [ 13%]
tests/contracts/transform_contracts/test_keyword_filter_contract.py::TestKeywordFilterErrorContract::test_process_returns_transform_result PASSED [ 13%]
tests/contracts/transform_contracts/test_keyword_filter_contract.py::TestKeywordFilterErrorContract::test_success_result_has_status PASSED [ 13%]
tests/contracts/transform_contracts/test_keyword_filter_contract.py::TestKeywordFilterErrorContract::test_success_result_has_output_data PASSED [ 13%]
tests/contracts/transform_contracts/test_keyword_filter_contract.py::TestKeywordFilterErrorContract::test_success_single_row_is_dict PASSED [ 13%]
tests/contracts/transform_contracts/test_keyword_filter_contract.py::TestKeywordFilterErrorContract::test_success_multi_row_is_list PASSED [ 13%]
tests/contracts/transform_contracts/test_keyword_filter_contract.py::TestKeywordFilterErrorContract::test_close_is_idempotent PASSED [ 13%]
tests/contracts/transform_contracts/test_keyword_filter_contract.py::TestKeywordFilterErrorContract::test_on_start_does_not_raise PASSED [ 13%]
tests/contracts/transform_contracts/test_keyword_filter_contract.py::TestKeywordFilterErrorContract::test_on_complete_does_not_raise PASSED [ 13%]
tests/contracts/transform_contracts/test_keyword_filter_contract.py::TestKeywordFilterErrorContract::test_error_result_has_reason PASSED [ 13%]
tests/contracts/transform_contracts/test_keyword_filter_contract.py::TestKeywordFilterErrorContract::test_error_result_has_no_output_data PASSED [ 13%]
tests/contracts/transform_contracts/test_keyword_filter_contract.py::TestKeywordFilterErrorContract::test_error_result_has_retryable_flag PASSED [ 13%]
tests/contracts/transform_contracts/test_passthrough_contract.py::TestPassThroughContract::test_transform_has_name PASSED [ 13%]
tests/contracts/transform_contracts/test_passthrough_contract.py::TestPassThroughContract::test_transform_has_input_schema PASSED [ 13%]
tests/contracts/transform_contracts/test_passthrough_contract.py::TestPassThroughContract::test_transform_has_output_schema PASSED [ 13%]
tests/contracts/transform_contracts/test_passthrough_contract.py::TestPassThroughContract::test_transform_has_determinism PASSED [ 13%]
tests/contracts/transform_contracts/test_passthrough_contract.py::TestPassThroughContract::test_transform_has_plugin_version PASSED [ 13%]
tests/contracts/transform_contracts/test_passthrough_contract.py::TestPassThroughContract::test_transform_has_batch_awareness_flag PASSED [ 13%]
tests/contracts/transform_contracts/test_passthrough_contract.py::TestPassThroughContract::test_transform_has_creates_tokens_flag PASSED [ 13%]
tests/contracts/transform_contracts/test_passthrough_contract.py::TestPassThroughContract::test_process_returns_transform_result PASSED [ 14%]
tests/contracts/transform_contracts/test_passthrough_contract.py::TestPassThroughContract::test_success_result_has_status PASSED [ 14%]
tests/contracts/transform_contracts/test_passthrough_contract.py::TestPassThroughContract::test_success_result_has_output_data PASSED [ 14%]
tests/contracts/transform_contracts/test_passthrough_contract.py::TestPassThroughContract::test_success_single_row_is_dict PASSED [ 14%]
tests/contracts/transform_contracts/test_passthrough_contract.py::TestPassThroughContract::test_success_multi_row_is_list PASSED [ 14%]
tests/contracts/transform_contracts/test_passthrough_contract.py::TestPassThroughContract::test_close_is_idempotent PASSED [ 14%]
tests/contracts/transform_contracts/test_passthrough_contract.py::TestPassThroughContract::test_on_start_does_not_raise PASSED [ 14%]
tests/contracts/transform_contracts/test_passthrough_contract.py::TestPassThroughContract::test_on_complete_does_not_raise PASSED [ 14%]
tests/contracts/transform_contracts/test_passthrough_contract.py::TestPassThroughContract::test_process_handles_extra_fields_gracefully PASSED [ 14%]
tests/contracts/transform_contracts/test_passthrough_contract.py::TestPassThroughContract::test_deterministic_transform_produces_same_output PASSED [ 14%]
tests/contracts/transform_contracts/test_passthrough_contract.py::TestPassThroughContract::test_passthrough_preserves_all_fields PASSED [ 14%]
tests/contracts/transform_contracts/test_passthrough_contract.py::TestPassThroughContract::test_passthrough_does_not_mutate_input PASSED [ 14%]
tests/contracts/transform_contracts/test_passthrough_contract.py::TestPassThroughContract::test_passthrough_output_is_independent_copy PASSED [ 14%]
tests/contracts/transform_contracts/test_passthrough_contract.py::TestPassThroughStrictSchemaContract::test_transform_has_name PASSED [ 14%]
tests/contracts/transform_contracts/test_passthrough_contract.py::TestPassThroughStrictSchemaContract::test_transform_has_input_schema PASSED [ 14%]
tests/contracts/transform_contracts/test_passthrough_contract.py::TestPassThroughStrictSchemaContract::test_transform_has_output_schema PASSED [ 14%]
tests/contracts/transform_contracts/test_passthrough_contract.py::TestPassThroughStrictSchemaContract::test_transform_has_determinism PASSED [ 14%]
tests/contracts/transform_contracts/test_passthrough_contract.py::TestPassThroughStrictSchemaContract::test_transform_has_plugin_version PASSED [ 14%]
tests/contracts/transform_contracts/test_passthrough_contract.py::TestPassThroughStrictSchemaContract::test_transform_has_batch_awareness_flag PASSED [ 14%]
tests/contracts/transform_contracts/test_passthrough_contract.py::TestPassThroughStrictSchemaContract::test_transform_has_creates_tokens_flag PASSED [ 14%]
tests/contracts/transform_contracts/test_passthrough_contract.py::TestPassThroughStrictSchemaContract::test_process_returns_transform_result PASSED [ 14%]
tests/contracts/transform_contracts/test_passthrough_contract.py::TestPassThroughStrictSchemaContract::test_success_result_has_status PASSED [ 14%]
tests/contracts/transform_contracts/test_passthrough_contract.py::TestPassThroughStrictSchemaContract::test_success_result_has_output_data PASSED [ 14%]
tests/contracts/transform_contracts/test_passthrough_contract.py::TestPassThroughStrictSchemaContract::test_success_single_row_is_dict PASSED [ 14%]
tests/contracts/transform_contracts/test_passthrough_contract.py::TestPassThroughStrictSchemaContract::test_success_multi_row_is_list PASSED [ 14%]
tests/contracts/transform_contracts/test_passthrough_contract.py::TestPassThroughStrictSchemaContract::test_close_is_idempotent PASSED [ 14%]
tests/contracts/transform_contracts/test_passthrough_contract.py::TestPassThroughStrictSchemaContract::test_on_start_does_not_raise PASSED [ 14%]
tests/contracts/transform_contracts/test_passthrough_contract.py::TestPassThroughStrictSchemaContract::test_on_complete_does_not_raise PASSED [ 14%]
tests/contracts/transform_contracts/test_passthrough_contract.py::TestPassThroughStrictSchemaContract::test_strict_passthrough_rejects_wrong_type PASSED [ 14%]
tests/contracts/transform_contracts/test_passthrough_contract.py::TestPassThroughPropertyBased::test_passthrough_preserves_arbitrary_dicts PASSED [ 14%]
tests/contracts/transform_contracts/test_passthrough_contract.py::TestPassThroughPropertyBased::test_passthrough_is_deterministic PASSED [ 14%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateContract::test_transform_has_name PASSED [ 14%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateContract::test_transform_has_input_schema PASSED [ 14%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateContract::test_transform_has_output_schema PASSED [ 14%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateContract::test_transform_has_determinism PASSED [ 15%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateContract::test_transform_has_plugin_version PASSED [ 15%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateContract::test_transform_has_batch_awareness_flag PASSED [ 15%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateContract::test_transform_has_creates_tokens_flag PASSED [ 15%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateContract::test_process_returns_transform_result PASSED [ 15%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateContract::test_success_result_has_status PASSED [ 15%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateContract::test_success_result_has_output_data PASSED [ 15%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateContract::test_success_single_row_is_dict PASSED [ 15%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateContract::test_success_multi_row_is_list PASSED [ 15%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateContract::test_close_is_idempotent PASSED [ 15%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateContract::test_on_start_does_not_raise PASSED [ 15%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateContract::test_on_complete_does_not_raise PASSED [ 15%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateContract::test_process_handles_extra_fields_gracefully PASSED [ 15%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateContract::test_deterministic_transform_produces_same_output PASSED [ 15%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateWithSuffixContract::test_transform_has_name PASSED [ 15%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateWithSuffixContract::test_transform_has_input_schema PASSED [ 15%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateWithSuffixContract::test_transform_has_output_schema PASSED [ 15%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateWithSuffixContract::test_transform_has_determinism PASSED [ 15%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateWithSuffixContract::test_transform_has_plugin_version PASSED [ 15%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateWithSuffixContract::test_transform_has_batch_awareness_flag PASSED [ 15%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateWithSuffixContract::test_transform_has_creates_tokens_flag PASSED [ 15%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateWithSuffixContract::test_process_returns_transform_result PASSED [ 15%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateWithSuffixContract::test_success_result_has_status PASSED [ 15%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateWithSuffixContract::test_success_result_has_output_data PASSED [ 15%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateWithSuffixContract::test_success_single_row_is_dict PASSED [ 15%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateWithSuffixContract::test_success_multi_row_is_list PASSED [ 15%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateWithSuffixContract::test_close_is_idempotent PASSED [ 15%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateWithSuffixContract::test_on_start_does_not_raise PASSED [ 15%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateWithSuffixContract::test_on_complete_does_not_raise PASSED [ 15%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateWithSuffixContract::test_process_handles_extra_fields_gracefully PASSED [ 15%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateWithSuffixContract::test_deterministic_transform_produces_same_output PASSED [ 15%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateStrictContract::test_transform_has_name PASSED [ 15%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateStrictContract::test_transform_has_input_schema PASSED [ 15%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateStrictContract::test_transform_has_output_schema PASSED [ 16%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateStrictContract::test_transform_has_determinism PASSED [ 16%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateStrictContract::test_transform_has_plugin_version PASSED [ 16%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateStrictContract::test_transform_has_batch_awareness_flag PASSED [ 16%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateStrictContract::test_transform_has_creates_tokens_flag PASSED [ 16%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateStrictContract::test_process_returns_transform_result PASSED [ 16%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateStrictContract::test_success_result_has_status PASSED [ 16%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateStrictContract::test_success_result_has_output_data PASSED [ 16%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateStrictContract::test_success_single_row_is_dict PASSED [ 16%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateStrictContract::test_success_multi_row_is_list PASSED [ 16%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateStrictContract::test_close_is_idempotent PASSED [ 16%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateStrictContract::test_on_start_does_not_raise PASSED [ 16%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateStrictContract::test_on_complete_does_not_raise PASSED [ 16%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateStrictContract::test_error_result_has_reason PASSED [ 16%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateStrictContract::test_error_result_has_no_output_data PASSED [ 16%]
tests/contracts/transform_contracts/test_truncate_contract.py::TestTruncateStrictContract::test_error_result_has_retryable_flag PASSED [ 16%]
tests/core/checkpoint/test_manager.py::TestCheckpointManager::test_create_checkpoint PASSED [ 16%]
tests/core/checkpoint/test_manager.py::TestCheckpointManager::test_get_latest_checkpoint PASSED [ 16%]
tests/core/checkpoint/test_manager.py::TestCheckpointManager::test_get_latest_checkpoint_no_checkpoints PASSED [ 16%]
tests/core/checkpoint/test_manager.py::TestCheckpointManager::test_checkpoint_with_aggregation_state PASSED [ 16%]
tests/core/checkpoint/test_manager.py::TestCheckpointManager::test_checkpoint_with_empty_aggregation_state_preserved PASSED [ 16%]
tests/core/checkpoint/test_manager.py::TestCheckpointManager::test_checkpoint_with_none_aggregation_state_is_null PASSED [ 16%]
tests/core/checkpoint/test_manager.py::TestCheckpointManager::test_get_checkpoints_ordered PASSED [ 16%]
tests/core/checkpoint/test_manager.py::TestCheckpointManager::test_delete_checkpoints PASSED [ 16%]
tests/core/checkpoint/test_manager.py::TestCheckpointManager::test_delete_checkpoints_no_checkpoints PASSED [ 16%]
tests/core/checkpoint/test_manager.py::TestCheckpointManager::test_old_checkpoint_rejected PASSED [ 16%]
tests/core/checkpoint/test_manager.py::TestCheckpointManager::test_new_checkpoint_accepted PASSED [ 16%]
tests/core/checkpoint/test_manager.py::TestCheckpointManager::test_checkpoint_after_cutoff_accepted PASSED [ 16%]
tests/core/checkpoint/test_manager_mutation_gaps.py::TestCheckpointIdFormat::test_checkpoint_id_starts_with_cp_prefix PASSED [ 16%]
tests/core/checkpoint/test_manager_mutation_gaps.py::TestCheckpointIdFormat::test_checkpoint_id_has_correct_format PASSED [ 16%]
tests/core/checkpoint/test_manager_mutation_gaps.py::TestGetLatestCheckpointOrdering::test_get_latest_returns_highest_sequence_not_lowest PASSED [ 16%]
tests/core/checkpoint/test_manager_mutation_gaps.py::TestGetLatestCheckpointOrdering::test_get_latest_with_only_one_checkpoint PASSED [ 16%]
tests/core/checkpoint/test_manager_mutation_gaps.py::TestGetLatestCheckpointOrdering::test_get_latest_returns_most_recent_not_first_created PASSED [ 16%]
tests/core/checkpoint/test_recovery.py::TestRecoveryProtocol::test_can_resume_returns_true_for_failed_run_with_checkpoint PASSED [ 16%]
tests/core/checkpoint/test_recovery.py::TestRecoveryProtocol::test_can_resume_returns_false_for_completed_run PASSED [ 17%]
tests/core/checkpoint/test_recovery.py::TestRecoveryProtocol::test_can_resume_returns_false_without_checkpoint PASSED [ 17%]
tests/core/checkpoint/test_recovery.py::TestRecoveryProtocol::test_can_resume_returns_false_for_running_run PASSED [ 17%]
tests/core/checkpoint/test_recovery.py::TestRecoveryProtocol::test_can_resume_returns_false_for_nonexistent_run PASSED [ 17%]
tests/core/checkpoint/test_recovery.py::TestRecoveryProtocol::test_get_resume_point PASSED [ 17%]
tests/core/checkpoint/test_recovery.py::TestRecoveryProtocol::test_get_resume_point_returns_none_for_unresumable_run PASSED [ 17%]
tests/core/checkpoint/test_recovery.py::TestRecoveryProtocol::test_get_resume_point_includes_checkpoint PASSED [ 17%]
tests/core/checkpoint/test_recovery.py::TestRecoveryProtocol::test_get_resume_point_with_aggregation_state PASSED [ 17%]
tests/core/checkpoint/test_recovery.py::TestGetUnprocessedRows::test_returns_correct_rows_when_checkpoint_exists PASSED [ 17%]
tests/core/checkpoint/test_recovery.py::TestGetUnprocessedRows::test_returns_empty_list_when_no_checkpoint_exists PASSED [ 17%]
tests/core/checkpoint/test_recovery.py::TestGetUnprocessedRows::test_returns_empty_list_when_all_rows_processed PASSED [ 17%]
tests/core/checkpoint/test_recovery.py::TestGetUnprocessedRows::test_handles_nonexistent_run_id_gracefully PASSED [ 17%]
tests/core/checkpoint/test_recovery.py::TestResumeCheck::test_can_resume_true PASSED [ 17%]
tests/core/checkpoint/test_recovery.py::TestResumeCheck::test_can_resume_false_with_reason PASSED [ 17%]
tests/core/checkpoint/test_recovery.py::TestResumeCheck::test_can_resume_true_with_reason_raises PASSED [ 17%]
tests/core/checkpoint/test_recovery.py::TestResumeCheck::test_can_resume_false_without_reason_raises PASSED [ 17%]
tests/core/checkpoint/test_recovery.py::TestResumeCheck::test_frozen PASSED [ 17%]
tests/core/checkpoint/test_recovery.py::TestGetUnprocessedRowsForkScenarios::test_fork_scenario_does_not_skip_unprocessed_rows PASSED [ 17%]
tests/core/checkpoint/test_recovery.py::TestGetUnprocessedRowsFailureScenarios::test_failure_scenario_includes_failed_row_in_resume PASSED [ 17%]
tests/core/checkpoint/test_recovery_mutation_gaps.py::TestResumeCheckDataclass::test_can_resume_true_with_no_reason_is_valid PASSED [ 17%]
tests/core/checkpoint/test_recovery_mutation_gaps.py::TestResumeCheckDataclass::test_can_resume_true_with_reason_raises PASSED [ 17%]
tests/core/checkpoint/test_recovery_mutation_gaps.py::TestResumeCheckDataclass::test_can_resume_false_with_reason_is_valid PASSED [ 17%]
tests/core/checkpoint/test_recovery_mutation_gaps.py::TestResumeCheckDataclass::test_can_resume_false_without_reason_raises PASSED [ 17%]
tests/core/checkpoint/test_recovery_mutation_gaps.py::TestResumeCheckDataclass::test_can_resume_field_is_bool PASSED [ 17%]
tests/core/checkpoint/test_recovery_mutation_gaps.py::TestCanResumeBranches::test_nonexistent_run_returns_cannot_resume PASSED [ 17%]
tests/core/checkpoint/test_recovery_mutation_gaps.py::TestCanResumeBranches::test_completed_run_returns_cannot_resume PASSED [ 17%]
tests/core/checkpoint/test_recovery_mutation_gaps.py::TestCanResumeBranches::test_running_run_returns_cannot_resume PASSED [ 17%]
tests/core/checkpoint/test_recovery_mutation_gaps.py::TestCanResumeBranches::test_failed_run_without_checkpoint_returns_cannot_resume PASSED [ 17%]
tests/core/checkpoint/test_recovery_mutation_gaps.py::TestCanResumeBranches::test_failed_run_with_checkpoint_returns_can_resume PASSED [ 17%]
tests/core/checkpoint/test_recovery_mutation_gaps.py::TestGetResumePoint::test_get_resume_point_returns_none_for_nonresumable PASSED [ 17%]
tests/core/checkpoint/test_recovery_mutation_gaps.py::TestGetResumePoint::test_get_resume_point_returns_resume_point_for_resumable PASSED [ 17%]
tests/core/checkpoint/test_recovery_mutation_gaps.py::TestGetResumePoint::test_get_resume_point_with_no_aggregation_state PASSED [ 17%]
tests/core/checkpoint/test_recovery_mutation_gaps.py::TestGetUnprocessedRowDataErrors::test_empty_unprocessed_rows_returns_empty_list PASSED [ 17%]
tests/core/checkpoint/test_recovery_mutation_gaps.py::TestGetUnprocessedRowDataErrors::test_row_not_found_raises_value_error PASSED [ 18%]
tests/core/checkpoint/test_recovery_mutation_gaps.py::TestGetUnprocessedRowDataErrors::test_missing_source_data_ref_raises_value_error PASSED [ 18%]
tests/core/checkpoint/test_recovery_mutation_gaps.py::TestGetUnprocessedRowDataErrors::test_purged_payload_raises_value_error PASSED [ 18%]
tests/core/checkpoint/test_recovery_mutation_gaps.py::TestGetUnprocessedRowsErrors::test_no_checkpoint_returns_empty_list PASSED [ 18%]
tests/core/checkpoint/test_recovery_mutation_gaps.py::TestGetUnprocessedRowsErrors::test_checkpoint_with_invalid_token_raises_runtime_error PASSED [ 18%]
tests/core/checkpoint/test_recovery_row_data.py::TestRecoveryManagerRowData::test_get_unprocessed_row_data_returns_row_dicts PASSED [ 18%]
tests/core/checkpoint/test_recovery_row_data.py::TestRecoveryManagerRowData::test_get_unprocessed_row_data_empty_when_all_processed PASSED [ 18%]
tests/core/checkpoint/test_recovery_row_data.py::TestRecoveryManagerRowData::test_get_unprocessed_row_data_raises_on_missing_payload PASSED [ 18%]
tests/core/checkpoint/test_recovery_type_fidelity.py::test_get_unprocessed_row_data_loses_type_fidelity PASSED [ 18%]
tests/core/landscape/test_database.py::TestDatabaseConnection::test_connect_creates_tables PASSED [ 18%]
tests/core/landscape/test_database.py::TestDatabaseConnection::test_sqlite_wal_mode PASSED [ 18%]
tests/core/landscape/test_database.py::TestDatabaseConnection::test_sqlite_foreign_keys_enabled PASSED [ 18%]
tests/core/landscape/test_database.py::TestDatabaseConnection::test_context_manager PASSED [ 18%]
tests/core/landscape/test_database.py::TestPhase3ADBMethods::test_in_memory_factory PASSED [ 18%]
tests/core/landscape/test_database.py::TestPhase3ADBMethods::test_connection_context_manager PASSED [ 18%]
tests/core/landscape/test_database.py::TestPhase3ADBMethods::test_from_url_factory PASSED [ 18%]
tests/core/landscape/test_database.py::TestPhase3ADBMethods::test_from_url_skip_table_creation PASSED [ 18%]
tests/core/landscape/test_database.py::TestPhase3ADBMethods::test_in_memory_enables_foreign_keys PASSED [ 18%]
tests/core/landscape/test_database.py::TestPhase3ADBMethods::test_in_memory_enables_wal_mode PASSED [ 18%]
tests/core/landscape/test_database.py::TestPhase3ADBMethods::test_from_url_enables_foreign_keys PASSED [ 18%]
tests/core/landscape/test_database.py::TestPhase3ADBMethods::test_from_url_enables_wal_mode PASSED [ 18%]
tests/core/landscape/test_database.py::TestSchemaCompatibility::test_fresh_database_passes_validation PASSED [ 18%]
tests/core/landscape/test_database.py::TestSchemaCompatibility::test_in_memory_database_passes_validation PASSED [ 18%]
tests/core/landscape/test_database.py::TestSchemaCompatibility::test_old_schema_missing_column_fails_validation PASSED [ 18%]
tests/core/landscape/test_database.py::TestSchemaCompatibility::test_from_url_with_old_schema_fails PASSED [ 18%]
tests/core/landscape/test_database.py::TestSchemaCompatibility::test_error_message_includes_remediation PASSED [ 18%]
tests/core/landscape/test_error_table_foreign_keys.py::TestTransformErrorsForeignKeys::test_rejects_orphan_token_id PASSED [ 18%]
tests/core/landscape/test_error_table_foreign_keys.py::TestTransformErrorsForeignKeys::test_rejects_orphan_transform_id PASSED [ 18%]
tests/core/landscape/test_error_table_foreign_keys.py::TestTransformErrorsForeignKeys::test_restrict_prevents_token_deletion PASSED [ 18%]
tests/core/landscape/test_error_table_foreign_keys.py::TestTransformErrorsForeignKeys::test_restrict_prevents_node_deletion PASSED [ 18%]
tests/core/landscape/test_error_table_foreign_keys.py::TestTransformErrorsForeignKeys::test_accepts_valid_foreign_keys PASSED [ 18%]
tests/core/landscape/test_error_table_foreign_keys.py::TestValidationErrorsForeignKeys::test_rejects_orphan_node_id PASSED [ 18%]
tests/core/landscape/test_error_table_foreign_keys.py::TestValidationErrorsForeignKeys::test_allows_null_node_id PASSED [ 18%]
tests/core/landscape/test_error_table_foreign_keys.py::TestValidationErrorsForeignKeys::test_restrict_prevents_node_deletion PASSED [ 18%]
tests/core/landscape/test_error_table_foreign_keys.py::TestValidationErrorsForeignKeys::test_accepts_valid_node_id PASSED [ 19%]
tests/core/landscape/test_exporter.py::TestLandscapeExporterRunMetadata::test_exporter_extracts_run_metadata PASSED [ 19%]
tests/core/landscape/test_exporter.py::TestLandscapeExporterRunMetadata::test_exporter_run_metadata_has_required_fields PASSED [ 19%]
tests/core/landscape/test_exporter.py::TestLandscapeExporterRows::test_exporter_extracts_rows PASSED [ 19%]
tests/core/landscape/test_exporter.py::TestLandscapeExporterRows::test_exporter_row_has_required_fields PASSED [ 19%]
tests/core/landscape/test_exporter.py::TestLandscapeExporterNodes::test_exporter_extracts_nodes PASSED [ 19%]
tests/core/landscape/test_exporter.py::TestLandscapeExporterErrors::test_exporter_raises_for_missing_run PASSED [ 19%]
tests/core/landscape/test_exporter.py::TestLandscapeExporterComplexRun::test_exporter_extracts_edges PASSED [ 19%]
tests/core/landscape/test_exporter.py::TestLandscapeExporterComplexRun::test_exporter_extracts_tokens PASSED [ 19%]
tests/core/landscape/test_exporter.py::TestLandscapeExporterComplexRun::test_exporter_extracts_node_states PASSED [ 19%]
tests/core/landscape/test_exporter.py::TestLandscapeExporterComplexRun::test_exporter_extracts_artifacts PASSED [ 19%]
tests/core/landscape/test_exporter.py::TestLandscapeExporterComplexRun::test_exporter_extracts_batches PASSED [ 19%]
tests/core/landscape/test_exporter.py::TestLandscapeExporterComplexRun::test_exporter_extracts_batch_members PASSED [ 19%]
tests/core/landscape/test_exporter.py::TestLandscapeExporterComplexRun::test_exporter_extracts_routing_events PASSED [ 19%]
tests/core/landscape/test_exporter.py::TestLandscapeExporterComplexRun::test_exporter_extracts_token_parents PASSED [ 19%]
tests/core/landscape/test_exporter.py::TestLandscapeExporterSigning::test_exporter_signs_records_when_enabled PASSED [ 19%]
tests/core/landscape/test_exporter.py::TestLandscapeExporterSigning::test_exporter_manifest_contains_final_hash PASSED [ 19%]
tests/core/landscape/test_exporter.py::TestLandscapeExporterSigning::test_exporter_unsigned_has_no_signatures PASSED [ 19%]
tests/core/landscape/test_exporter.py::TestLandscapeExporterSigning::test_exporter_raises_when_sign_without_key PASSED [ 19%]
tests/core/landscape/test_exporter.py::TestLandscapeExporterSigning::test_exporter_manifest_record_count_matches PASSED [ 19%]
tests/core/landscape/test_exporter.py::TestLandscapeExporterSigning::test_exporter_signatures_are_deterministic PASSED [ 19%]
tests/core/landscape/test_exporter.py::TestLandscapeExporterSigning::test_exporter_different_keys_produce_different_signatures PASSED [ 19%]
tests/core/landscape/test_exporter.py::TestLandscapeExporterSigning::test_exporter_manifest_includes_algorithm_metadata PASSED [ 19%]
tests/core/landscape/test_exporter.py::TestLandscapeExporterSigning::test_exporter_final_hash_deterministic_with_multiple_records PASSED [ 19%]
tests/core/landscape/test_exporter.py::TestLandscapeExporterSigning::test_exporter_record_order_is_stable PASSED [ 19%]
tests/core/landscape/test_exports.py::TestLandscapeExports::test_can_import_database PASSED [ 19%]
tests/core/landscape/test_exports.py::TestLandscapeExports::test_can_import_recorder PASSED [ 19%]
tests/core/landscape/test_exports.py::TestLandscapeExports::test_can_import_models PASSED [ 19%]
tests/core/landscape/test_exports.py::TestLandscapeExports::test_can_import_recorder_types PASSED [ 19%]
tests/core/landscape/test_exports.py::TestLandscapeExports::test_can_import_exporter PASSED [ 19%]
tests/core/landscape/test_exports.py::TestLandscapeExports::test_can_import_all_exports PASSED [ 19%]
tests/core/landscape/test_formatters.py::TestCSVFormatter::test_csv_formatter_flattens_nested_fields PASSED [ 19%]
tests/core/landscape/test_formatters.py::TestCSVFormatter::test_csv_formatter_preserves_flat_fields PASSED [ 19%]
tests/core/landscape/test_formatters.py::TestCSVFormatter::test_csv_formatter_handles_deeply_nested PASSED [ 20%]
tests/core/landscape/test_formatters.py::TestCSVFormatter::test_csv_formatter_converts_lists_to_json PASSED [ 20%]
tests/core/landscape/test_formatters.py::TestCSVFormatter::test_csv_formatter_format_returns_flat_dict PASSED [ 20%]
tests/core/landscape/test_formatters.py::TestCSVFormatter::test_csv_formatter_handles_none_values PASSED [ 20%]
tests/core/landscape/test_formatters.py::TestCSVFormatter::test_csv_formatter_handles_empty_dict PASSED [ 20%]
tests/core/landscape/test_formatters.py::TestJSONFormatter::test_json_formatter_preserves_structure PASSED [ 20%]
tests/core/landscape/test_formatters.py::TestJSONFormatter::test_json_formatter_outputs_string PASSED [ 20%]
tests/core/landscape/test_formatters.py::TestJSONFormatter::test_json_formatter_handles_datetime_via_default PASSED [ 20%]
tests/core/landscape/test_formatters.py::TestJSONFormatter::test_json_formatter_handles_lists PASSED [ 20%]
tests/core/landscape/test_formatters.py::TestJSONFormatter::test_json_formatter_handles_nested_lists_of_dicts PASSED [ 20%]
tests/core/landscape/test_lineage.py::TestLineageResult::test_lineage_result_exists PASSED [ 20%]
tests/core/landscape/test_lineage.py::TestLineageResult::test_lineage_result_fields PASSED [ 20%]
tests/core/landscape/test_lineage.py::TestExplainFunction::test_explain_exists PASSED [ 20%]
tests/core/landscape/test_lineage.py::TestExplainFunction::test_explain_returns_lineage_result PASSED [ 20%]
tests/core/landscape/test_lineage.py::TestExplainFunction::test_explain_by_row_id PASSED [ 20%]
tests/core/landscape/test_lineage.py::TestExplainFunction::test_explain_nonexistent_returns_none PASSED [ 20%]
tests/core/landscape/test_lineage.py::TestExplainFunction::test_explain_fork_with_sink_disambiguation PASSED [ 20%]
tests/core/landscape/test_lineage.py::TestExplainFunction::test_explain_single_terminal_path_works_without_sink PASSED [ 20%]
tests/core/landscape/test_lineage.py::TestExplainFunction::test_explain_nonexistent_sink_returns_none PASSED [ 20%]
tests/core/landscape/test_lineage.py::TestExplainFunction::test_explain_buffered_tokens_returns_none PASSED [ 20%]
tests/core/landscape/test_lineage.py::TestExplainFunction::test_explain_multiple_tokens_same_sink_raises PASSED [ 20%]
tests/core/landscape/test_lineage_mutation_gaps.py::TestLineageResultDefaults::test_transform_errors_defaults_to_empty_list PASSED [ 20%]
tests/core/landscape/test_lineage_mutation_gaps.py::TestLineageResultDefaults::test_transform_errors_default_is_independent_per_instance PASSED [ 20%]
tests/core/landscape/test_lineage_mutation_gaps.py::TestLineageResultDefaults::test_outcome_defaults_to_none PASSED [ 20%]
tests/core/landscape/test_lineage_mutation_gaps.py::TestLineageResultDefaults::test_validation_errors_defaults_to_empty_list PASSED [ 20%]
tests/core/landscape/test_lineage_mutation_gaps.py::TestLineageResultFieldTypes::test_transform_errors_accepts_list_of_records PASSED [ 20%]
tests/core/landscape/test_lineage_mutation_gaps.py::TestLineageResultFieldTypes::test_outcome_accepts_token_outcome PASSED [ 20%]
tests/core/landscape/test_models.py::TestRunModel::test_create_run PASSED [ 20%]
tests/core/landscape/test_models.py::TestNodeModel::test_create_node PASSED [ 20%]
tests/core/landscape/test_models.py::TestRowModel::test_create_row PASSED [ 20%]
tests/core/landscape/test_models.py::TestTokenModel::test_create_token PASSED [ 20%]
tests/core/landscape/test_models_enums.py::TestModelEnumTypes::test_run_export_status_accepts_enum PASSED [ 20%]
tests/core/landscape/test_models_enums.py::TestModelEnumTypes::test_node_type_accepts_enum PASSED [ 20%]
tests/core/landscape/test_models_enums.py::TestModelEnumTypes::test_node_determinism_accepts_enum PASSED [ 20%]
tests/core/landscape/test_models_enums.py::TestModelEnumTypes::test_edge_default_mode_accepts_enum PASSED [ 21%]
tests/core/landscape/test_models_mutation_gaps.py::TestRunDataclass::test_status_is_required_run_status_enum PASSED [ 21%]
tests/core/landscape/test_models_mutation_gaps.py::TestRunDataclass::test_completed_at_defaults_to_none PASSED [ 21%]
tests/core/landscape/test_models_mutation_gaps.py::TestRunDataclass::test_reproducibility_grade_defaults_to_none PASSED [ 21%]
tests/core/landscape/test_models_mutation_gaps.py::TestRunDataclass::test_export_status_defaults_to_none PASSED [ 21%]
tests/core/landscape/test_models_mutation_gaps.py::TestRunDataclass::test_export_error_defaults_to_none PASSED [ 21%]
tests/core/landscape/test_models_mutation_gaps.py::TestRunDataclass::test_exported_at_defaults_to_none PASSED [ 21%]
tests/core/landscape/test_models_mutation_gaps.py::TestRunDataclass::test_export_format_defaults_to_none PASSED [ 21%]
tests/core/landscape/test_models_mutation_gaps.py::TestRunDataclass::test_export_sink_defaults_to_none PASSED [ 21%]
tests/core/landscape/test_models_mutation_gaps.py::TestRunDataclass::test_run_with_all_optional_fields_set PASSED [ 21%]
tests/core/landscape/test_models_mutation_gaps.py::TestNodeDataclass::test_registered_at_is_required PASSED [ 21%]
tests/core/landscape/test_models_mutation_gaps.py::TestNodeDataclass::test_schema_hash_defaults_to_none PASSED [ 21%]
tests/core/landscape/test_models_mutation_gaps.py::TestNodeDataclass::test_sequence_in_pipeline_defaults_to_none PASSED [ 21%]
tests/core/landscape/test_models_mutation_gaps.py::TestRowDataclass::test_created_at_is_required PASSED [ 21%]
tests/core/landscape/test_models_mutation_gaps.py::TestRowDataclass::test_source_data_ref_defaults_to_none PASSED [ 21%]
tests/core/landscape/test_models_mutation_gaps.py::TestTokenDataclass::test_created_at_is_required PASSED [ 21%]
tests/core/landscape/test_models_mutation_gaps.py::TestTokenDataclass::test_fork_group_id_defaults_to_none PASSED [ 21%]
tests/core/landscape/test_models_mutation_gaps.py::TestTokenDataclass::test_join_group_id_defaults_to_none PASSED [ 21%]
tests/core/landscape/test_models_mutation_gaps.py::TestTokenDataclass::test_expand_group_id_defaults_to_none PASSED [ 21%]
tests/core/landscape/test_models_mutation_gaps.py::TestTokenDataclass::test_branch_name_defaults_to_none PASSED [ 21%]
tests/core/landscape/test_models_mutation_gaps.py::TestTokenDataclass::test_step_in_pipeline_defaults_to_none PASSED [ 21%]
tests/core/landscape/test_models_mutation_gaps.py::TestNodeStateOpenDataclass::test_status_is_literal_open PASSED [ 21%]
tests/core/landscape/test_models_mutation_gaps.py::TestNodeStateOpenDataclass::test_started_at_is_required PASSED [ 21%]
tests/core/landscape/test_models_mutation_gaps.py::TestNodeStateOpenDataclass::test_context_before_json_defaults_to_none PASSED [ 21%]
tests/core/landscape/test_models_mutation_gaps.py::TestNodeStateCompletedDataclass::test_duration_ms_is_required PASSED [ 21%]
tests/core/landscape/test_models_mutation_gaps.py::TestNodeStateCompletedDataclass::test_context_before_json_defaults_to_none PASSED [ 21%]
tests/core/landscape/test_models_mutation_gaps.py::TestNodeStateCompletedDataclass::test_context_after_json_defaults_to_none PASSED [ 21%]
tests/core/landscape/test_models_mutation_gaps.py::TestNodeStateFailedDataclass::test_duration_ms_is_required PASSED [ 21%]
tests/core/landscape/test_models_mutation_gaps.py::TestNodeStateFailedDataclass::test_error_json_defaults_to_none PASSED [ 21%]
tests/core/landscape/test_models_mutation_gaps.py::TestNodeStateFailedDataclass::test_output_hash_defaults_to_none PASSED [ 21%]
tests/core/landscape/test_models_mutation_gaps.py::TestNodeStateFailedDataclass::test_context_before_json_defaults_to_none PASSED [ 21%]
tests/core/landscape/test_models_mutation_gaps.py::TestNodeStateFailedDataclass::test_context_after_json_defaults_to_none PASSED [ 21%]
tests/core/landscape/test_models_mutation_gaps.py::TestNodeStateUnion::test_node_state_open_is_node_state PASSED [ 21%]
tests/core/landscape/test_models_mutation_gaps.py::TestNodeStateUnion::test_node_state_completed_is_node_state PASSED [ 21%]
tests/core/landscape/test_models_mutation_gaps.py::TestNodeStateUnion::test_node_state_failed_is_node_state PASSED [ 22%]
tests/core/landscape/test_models_mutation_gaps.py::TestCallDataclass::test_created_at_is_required PASSED [ 22%]
tests/core/landscape/test_models_mutation_gaps.py::TestCallDataclass::test_request_ref_defaults_to_none PASSED [ 22%]
tests/core/landscape/test_models_mutation_gaps.py::TestCallDataclass::test_response_hash_defaults_to_none PASSED [ 22%]
tests/core/landscape/test_models_mutation_gaps.py::TestCallDataclass::test_response_ref_defaults_to_none PASSED [ 22%]
tests/core/landscape/test_models_mutation_gaps.py::TestCallDataclass::test_error_json_defaults_to_none PASSED [ 22%]
tests/core/landscape/test_models_mutation_gaps.py::TestCallDataclass::test_latency_ms_defaults_to_none PASSED [ 22%]
tests/core/landscape/test_models_mutation_gaps.py::TestArtifactDataclass::test_idempotency_key_defaults_to_none PASSED [ 22%]
tests/core/landscape/test_models_mutation_gaps.py::TestRoutingEventDataclass::test_created_at_is_required PASSED [ 22%]
tests/core/landscape/test_models_mutation_gaps.py::TestRoutingEventDataclass::test_reason_hash_defaults_to_none PASSED [ 22%]
tests/core/landscape/test_models_mutation_gaps.py::TestRoutingEventDataclass::test_reason_ref_defaults_to_none PASSED [ 22%]
tests/core/landscape/test_models_mutation_gaps.py::TestBatchDataclass::test_created_at_is_required PASSED [ 22%]
tests/core/landscape/test_models_mutation_gaps.py::TestBatchDataclass::test_aggregation_state_id_defaults_to_none PASSED [ 22%]
tests/core/landscape/test_models_mutation_gaps.py::TestBatchDataclass::test_trigger_reason_defaults_to_none PASSED [ 22%]
tests/core/landscape/test_models_mutation_gaps.py::TestBatchDataclass::test_trigger_type_defaults_to_none PASSED [ 22%]
tests/core/landscape/test_models_mutation_gaps.py::TestBatchDataclass::test_completed_at_defaults_to_none PASSED [ 22%]
tests/core/landscape/test_models_mutation_gaps.py::TestCheckpointDataclass::test_aggregation_state_json_defaults_to_none PASSED [ 22%]
tests/core/landscape/test_models_mutation_gaps.py::TestCheckpointDataclass::test_checkpoint_with_aggregation_state PASSED [ 22%]
tests/core/landscape/test_models_mutation_gaps.py::TestEdgeDataclass::test_created_at_is_required PASSED [ 22%]
tests/core/landscape/test_models_mutation_gaps.py::TestEdgeDataclass::test_edge_with_all_fields PASSED [ 22%]
tests/core/landscape/test_models_mutation_gaps.py::TestRowLineageDataclass::test_row_lineage_with_payload_available PASSED [ 22%]
tests/core/landscape/test_models_mutation_gaps.py::TestRowLineageDataclass::test_row_lineage_with_payload_purged PASSED [ 22%]
tests/core/landscape/test_models_mutation_gaps.py::TestSimpleDataclasses::test_token_parent_all_fields_required PASSED [ 22%]
tests/core/landscape/test_models_mutation_gaps.py::TestSimpleDataclasses::test_batch_member_all_fields_required PASSED [ 22%]
tests/core/landscape/test_models_mutation_gaps.py::TestSimpleDataclasses::test_batch_output_all_fields_required PASSED [ 22%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderRuns::test_begin_run PASSED [ 22%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderRuns::test_complete_run_success PASSED [ 22%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderRuns::test_complete_run_failed PASSED [ 22%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderRuns::test_get_run PASSED [ 22%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderRunStatusValidation::test_begin_run_with_enum_status PASSED [ 22%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderRunStatusValidation::test_begin_run_with_valid_string_status PASSED [ 22%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderRunStatusValidation::test_begin_run_with_invalid_status_raises PASSED [ 22%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderRunStatusValidation::test_complete_run_with_enum_status PASSED [ 22%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderRunStatusValidation::test_complete_run_with_valid_string_status PASSED [ 23%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderRunStatusValidation::test_complete_run_with_invalid_status_raises PASSED [ 23%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderRunStatusValidation::test_list_runs_with_enum_status_filter PASSED [ 23%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderRunStatusValidation::test_list_runs_with_valid_string_status_filter PASSED [ 23%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderRunStatusValidation::test_list_runs_with_invalid_status_filter_raises PASSED [ 23%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderNodes::test_register_node PASSED [ 23%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderNodes::test_register_node_with_enum PASSED [ 23%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderNodes::test_register_node_invalid_type_raises PASSED [ 23%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderNodes::test_register_edge PASSED [ 23%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderNodes::test_get_nodes_for_run PASSED [ 23%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderTokens::test_create_row PASSED [ 23%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderTokens::test_create_initial_token PASSED [ 23%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderTokens::test_fork_token PASSED [ 23%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderTokens::test_coalesce_tokens PASSED [ 23%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderTokens::test_fork_token_with_step_in_pipeline PASSED [ 23%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderTokens::test_fork_token_rejects_empty_branches PASSED [ 23%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderTokens::test_coalesce_tokens_with_step_in_pipeline PASSED [ 23%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderNodeStates::test_begin_node_state PASSED [ 23%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderNodeStates::test_complete_node_state_success PASSED [ 23%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderNodeStates::test_complete_node_state_failed PASSED [ 23%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderNodeStates::test_complete_node_state_with_empty_output PASSED [ 23%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderNodeStates::test_complete_node_state_with_empty_error PASSED [ 23%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderNodeStates::test_begin_node_state_with_empty_context PASSED [ 23%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderNodeStates::test_retry_increments_attempt PASSED [ 23%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderRouting::test_record_routing_event PASSED [ 23%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderRouting::test_record_multiple_routing_events PASSED [ 23%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderBatches::test_create_batch PASSED [ 23%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderBatches::test_add_batch_member PASSED [ 23%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderBatches::test_complete_batch PASSED [ 23%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderBatches::test_batch_lifecycle PASSED [ 23%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderBatches::test_get_batches_by_status PASSED [ 23%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderArtifacts::test_register_artifact PASSED [ 23%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderArtifacts::test_get_artifacts_for_run PASSED [ 23%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderArtifacts::test_register_artifact_with_idempotency_key PASSED [ 23%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderArtifacts::test_register_artifact_without_idempotency_key_returns_none PASSED [ 24%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderArtifacts::test_get_rows_for_run PASSED [ 24%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderArtifacts::test_get_tokens_for_row PASSED [ 24%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderArtifacts::test_get_node_states_for_token PASSED [ 24%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderEdges::test_get_edges_returns_all_edges_for_run PASSED [ 24%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderEdges::test_get_edges_returns_empty_list_for_run_with_no_edges PASSED [ 24%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderEdges::test_get_edges_returns_multiple_edges PASSED [ 24%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderQueryMethods::test_get_row PASSED [ 24%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderQueryMethods::test_get_row_not_found PASSED [ 24%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderQueryMethods::test_get_token PASSED [ 24%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderQueryMethods::test_get_token_not_found PASSED [ 24%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderQueryMethods::test_get_token_parents_for_coalesced PASSED [ 24%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderQueryMethods::test_get_routing_events PASSED [ 24%]
tests/core/landscape/test_recorder.py::TestLandscapeRecorderQueryMethods::test_get_row_data_without_payload_ref PASSED [ 24%]
tests/core/landscape/test_recorder.py::TestExplainGracefulDegradation::test_explain_with_missing_row_payload PASSED [ 24%]
tests/core/landscape/test_recorder.py::TestExplainGracefulDegradation::test_explain_reports_payload_status PASSED [ 24%]
tests/core/landscape/test_recorder.py::TestExplainGracefulDegradation::test_explain_with_available_payload PASSED [ 24%]
tests/core/landscape/test_recorder.py::TestExplainGracefulDegradation::test_explain_row_not_found PASSED [ 24%]
tests/core/landscape/test_recorder.py::TestExplainGracefulDegradation::test_explain_row_without_payload_store PASSED [ 24%]
tests/core/landscape/test_recorder.py::TestExplainGracefulDegradation::test_explain_row_with_no_payload_ref PASSED [ 24%]
tests/core/landscape/test_recorder.py::TestExplainGracefulDegradation::test_explain_row_with_corrupted_payload PASSED [ 24%]
tests/core/landscape/test_recorder.py::TestExplainGracefulDegradation::test_explain_row_rejects_run_id_mismatch PASSED [ 24%]
tests/core/landscape/test_recorder.py::TestReproducibilityGradeComputation::test_pure_pipeline_gets_full_reproducible PASSED [ 24%]
tests/core/landscape/test_recorder.py::TestReproducibilityGradeComputation::test_external_calls_gets_replay_reproducible PASSED [ 24%]
tests/core/landscape/test_recorder.py::TestReproducibilityGradeComputation::test_finalize_run_sets_grade PASSED [ 24%]
tests/core/landscape/test_recorder.py::TestReproducibilityGradeComputation::test_grade_degrades_after_purge PASSED [ 24%]
tests/core/landscape/test_recorder.py::TestReproducibilityGradeComputation::test_full_reproducible_unchanged_after_purge PASSED [ 24%]
tests/core/landscape/test_recorder.py::TestReproducibilityGradeComputation::test_compute_grade_empty_pipeline PASSED [ 24%]
tests/core/landscape/test_recorder.py::TestReproducibilityGradeComputation::test_update_grade_after_purge_nonexistent_run PASSED [ 24%]
tests/core/landscape/test_recorder.py::TestReproducibilityGradeComputation::test_attributable_only_unchanged_after_purge PASSED [ 24%]
tests/core/landscape/test_recorder.py::TestReproducibilityGradeComputation::test_default_determinism_counts_as_deterministic PASSED [ 24%]
tests/core/landscape/test_recorder.py::TestSchemaRecording::test_register_node_with_dynamic_schema PASSED [ 24%]
tests/core/landscape/test_recorder.py::TestSchemaRecording::test_register_node_with_explicit_schema PASSED [ 24%]
tests/core/landscape/test_recorder.py::TestSchemaRecording::test_register_node_with_free_schema PASSED [ 25%]
tests/core/landscape/test_recorder.py::TestSchemaRecording::test_get_nodes_includes_schema_info PASSED [ 25%]
tests/core/landscape/test_recorder.py::TestTransformErrorRecording::test_record_transform_error_returns_error_id PASSED [ 25%]
tests/core/landscape/test_recorder.py::TestTransformErrorRecording::test_record_transform_error_stores_in_database PASSED [ 25%]
tests/core/landscape/test_recorder.py::TestTransformErrorRecording::test_record_transform_error_stores_row_hash PASSED [ 25%]
tests/core/landscape/test_recorder.py::TestTransformErrorRecording::test_record_transform_error_discard_destination PASSED [ 25%]
tests/core/landscape/test_recorder.py::TestBatchRecoveryQueries::test_get_incomplete_batches_returns_draft_and_executing PASSED [ 25%]
tests/core/landscape/test_recorder.py::TestBatchRecoveryQueries::test_get_incomplete_batches_includes_failed_for_retry PASSED [ 25%]
tests/core/landscape/test_recorder.py::TestBatchRecoveryQueries::test_get_incomplete_batches_ordered_by_created_at PASSED [ 25%]
tests/core/landscape/test_recorder.py::TestExpandToken::test_expand_token_creates_children_with_parent_relationship PASSED [ 25%]
tests/core/landscape/test_recorder.py::TestExpandToken::test_expand_token_with_zero_count_raises PASSED [ 25%]
tests/core/landscape/test_recorder.py::TestExpandToken::test_expand_token_stores_step_in_pipeline PASSED [ 25%]
tests/core/landscape/test_recorder.py::TestExpandToken::test_expand_token_with_single_child PASSED [ 25%]
tests/core/landscape/test_recorder.py::TestExpandToken::test_expand_token_preserves_expand_group_id_through_retrieval PASSED [ 25%]
tests/core/landscape/test_recorder.py::TestBatchRetry::test_retry_batch_increments_attempt_and_resets_status PASSED [ 25%]
tests/core/landscape/test_recorder.py::TestBatchRetry::test_retry_batch_preserves_members PASSED [ 25%]
tests/core/landscape/test_recorder.py::TestBatchRetry::test_retry_batch_raises_for_non_failed_batch PASSED [ 25%]
tests/core/landscape/test_recorder.py::TestBatchRetry::test_retry_batch_raises_for_nonexistent_batch PASSED [ 25%]
tests/core/landscape/test_recorder.py::TestExportStatusEnumCoercion::test_get_run_returns_export_status_enum PASSED [ 25%]
tests/core/landscape/test_recorder.py::TestExportStatusEnumCoercion::test_list_runs_returns_export_status_enum PASSED [ 25%]
tests/core/landscape/test_recorder.py::TestExportStatusEnumCoercion::test_set_export_status_validates_status_string PASSED [ 25%]
tests/core/landscape/test_recorder.py::TestExportStatusEnumCoercion::test_set_export_status_clears_stale_error_on_completed PASSED [ 25%]
tests/core/landscape/test_recorder.py::TestExportStatusEnumCoercion::test_set_export_status_clears_stale_error_on_pending PASSED [ 25%]
tests/core/landscape/test_recorder.py::TestExportStatusEnumCoercion::test_set_export_status_accepts_enum_directly PASSED [ 25%]
tests/core/landscape/test_recorder.py::TestNodeStateIntegrityValidation::test_completed_state_with_null_completed_at_raises PASSED [ 25%]
tests/core/landscape/test_recorder.py::TestNodeStateIntegrityValidation::test_failed_state_with_null_completed_at_raises PASSED [ 25%]
tests/core/landscape/test_recorder.py::TestNodeStateOrderingWithRetries::test_get_node_states_orders_by_step_index_and_attempt PASSED [ 25%]
tests/core/landscape/test_recorder_calls.py::TestRecordCall::test_record_successful_llm_call PASSED [ 25%]
tests/core/landscape/test_recorder_calls.py::TestRecordCall::test_record_failed_call_with_error PASSED [ 25%]
tests/core/landscape/test_recorder_calls.py::TestRecordCall::test_multiple_calls_same_state PASSED [ 25%]
tests/core/landscape/test_recorder_calls.py::TestRecordCall::test_call_with_payload_refs PASSED [ 25%]
tests/core/landscape/test_recorder_calls.py::TestRecordCall::test_duplicate_call_index_raises_integrity_error PASSED [ 25%]
tests/core/landscape/test_recorder_calls.py::TestRecordCall::test_invalid_state_id_raises_integrity_error PASSED [ 25%]
tests/core/landscape/test_recorder_calls.py::TestRecordCall::test_record_http_call PASSED [ 25%]
tests/core/landscape/test_recorder_calls.py::TestRecordCall::test_record_sql_call PASSED [ 26%]
tests/core/landscape/test_recorder_calls.py::TestRecordCall::test_record_filesystem_call PASSED [ 26%]
tests/core/landscape/test_recorder_calls.py::TestRecordCall::test_call_without_latency PASSED [ 26%]
tests/core/landscape/test_recorder_calls.py::TestRecordCall::test_error_call_without_response PASSED [ 26%]
tests/core/landscape/test_recorder_calls.py::TestRecordCall::test_created_at_is_set PASSED [ 26%]
tests/core/landscape/test_recorder_calls.py::TestRecordCall::test_request_hash_is_deterministic PASSED [ 26%]
tests/core/landscape/test_recorder_calls.py::TestCallPayloadPersistence::test_auto_persist_response_when_payload_store_configured PASSED [ 26%]
tests/core/landscape/test_recorder_calls.py::TestCallPayloadPersistence::test_auto_persist_request_when_payload_store_configured PASSED [ 26%]
tests/core/landscape/test_recorder_calls.py::TestCallPayloadPersistence::test_no_auto_persist_without_payload_store PASSED [ 26%]
tests/core/landscape/test_recorder_calls.py::TestCallPayloadPersistence::test_explicit_ref_not_overwritten PASSED [ 26%]
tests/core/landscape/test_recorder_calls.py::TestCallPayloadPersistence::test_error_call_without_response_no_ref PASSED [ 26%]
tests/core/landscape/test_recorder_row_data.py::TestGetRowDataExplicitStates::test_row_not_found PASSED [ 26%]
tests/core/landscape/test_recorder_row_data.py::TestGetRowDataExplicitStates::test_never_stored PASSED [ 26%]
tests/core/landscape/test_recorder_row_data.py::TestGetRowDataExplicitStates::test_store_not_configured PASSED [ 26%]
tests/core/landscape/test_recorder_row_data.py::TestGetRowDataExplicitStates::test_purged PASSED [ 26%]
tests/core/landscape/test_recorder_row_data.py::TestGetRowDataExplicitStates::test_available PASSED [ 26%]
tests/core/landscape/test_repositories.py::TestRunRepository::test_load_converts_status_to_enum PASSED [ 26%]
tests/core/landscape/test_repositories.py::TestRunRepository::test_load_converts_export_status_to_enum PASSED [ 26%]
tests/core/landscape/test_repositories.py::TestRunRepository::test_load_handles_null_export_status PASSED [ 26%]
tests/core/landscape/test_repositories.py::TestRunRepository::test_load_crashes_on_invalid_status PASSED [ 26%]
tests/core/landscape/test_repositories.py::TestNodeRepository::test_load_converts_node_type_to_enum PASSED [ 26%]
tests/core/landscape/test_repositories.py::TestNodeRepository::test_load_crashes_on_invalid_node_type PASSED [ 26%]
tests/core/landscape/test_repositories.py::TestNodeRepository::test_load_crashes_on_invalid_determinism PASSED [ 26%]
tests/core/landscape/test_repositories.py::TestEdgeRepository::test_load_converts_default_mode_to_enum PASSED [ 26%]
tests/core/landscape/test_repositories.py::TestEdgeRepository::test_load_crashes_on_invalid_default_mode PASSED [ 26%]
tests/core/landscape/test_repositories.py::TestRowRepository::test_load_primitive_fields PASSED [ 26%]
tests/core/landscape/test_repositories.py::TestTokenRepository::test_load_primitive_fields PASSED [ 26%]
tests/core/landscape/test_repositories.py::TestTokenParentRepository::test_load_primitive_fields PASSED [ 26%]
tests/core/landscape/test_repositories.py::TestCallRepository::test_load_converts_enums PASSED [ 26%]
tests/core/landscape/test_repositories.py::TestCallRepository::test_load_crashes_on_invalid_call_type PASSED [ 26%]
tests/core/landscape/test_repositories.py::TestCallRepository::test_load_crashes_on_invalid_status PASSED [ 26%]
tests/core/landscape/test_repositories.py::TestRoutingEventRepository::test_load_converts_mode_to_enum PASSED [ 26%]
tests/core/landscape/test_repositories.py::TestRoutingEventRepository::test_load_crashes_on_invalid_mode PASSED [ 26%]
tests/core/landscape/test_repositories.py::TestBatchRepository::test_load_converts_status_to_enum PASSED [ 27%]
tests/core/landscape/test_repositories.py::TestBatchRepository::test_load_crashes_on_invalid_status PASSED [ 27%]
tests/core/landscape/test_reproducibility.py::TestReproducibilityGradeComparison::test_update_grade_after_purge_uses_enum PASSED [ 27%]
tests/core/landscape/test_reproducibility.py::TestReproducibilityGradeComparison::test_update_grade_after_purge_full_reproducible_unchanged PASSED [ 27%]
tests/core/landscape/test_reproducibility.py::TestReproducibilityGradeComparison::test_update_grade_after_purge_attributable_only_unchanged PASSED [ 27%]
tests/core/landscape/test_reproducibility.py::TestReproducibilityGradeComparison::test_update_grade_after_purge_null_grade_raises PASSED [ 27%]
tests/core/landscape/test_reproducibility.py::TestReproducibilityGradeComparison::test_update_grade_after_purge_invalid_grade_raises PASSED [ 27%]
tests/core/landscape/test_reproducibility.py::TestReproducibilityGradeComparison::test_update_grade_after_purge_nonexistent_run_is_noop PASSED [ 27%]
tests/core/landscape/test_routing.py::TestRoutingSpecReExport::test_can_import_from_landscape PASSED [ 27%]
tests/core/landscape/test_routing.py::TestRoutingSpecReExport::test_create_with_move_mode PASSED [ 27%]
tests/core/landscape/test_routing.py::TestRoutingSpecReExport::test_create_with_copy_mode PASSED [ 27%]
tests/core/landscape/test_routing.py::TestRoutingSpecReExport::test_frozen PASSED [ 27%]
tests/core/landscape/test_row_data.py::TestRowDataState::test_all_states_defined PASSED [ 27%]
tests/core/landscape/test_row_data.py::TestRowDataResult::test_available_with_data PASSED [ 27%]
tests/core/landscape/test_row_data.py::TestRowDataResult::test_available_without_data_raises PASSED [ 27%]
tests/core/landscape/test_row_data.py::TestRowDataResult::test_non_available_with_data_raises PASSED [ 27%]
tests/core/landscape/test_row_data.py::TestRowDataResult::test_purged_state PASSED [ 27%]
tests/core/landscape/test_row_data.py::TestRowDataResult::test_never_stored_state PASSED [ 27%]
tests/core/landscape/test_row_data.py::TestRowDataResult::test_store_not_configured_state PASSED [ 27%]
tests/core/landscape/test_row_data.py::TestRowDataResult::test_row_not_found_state PASSED [ 27%]
tests/core/landscape/test_row_data.py::TestRowDataResult::test_frozen_immutability PASSED [ 27%]
tests/core/landscape/test_schema.py::TestSchemaDefinition::test_runs_table_exists PASSED [ 27%]
tests/core/landscape/test_schema.py::TestSchemaDefinition::test_nodes_table_exists PASSED [ 27%]
tests/core/landscape/test_schema.py::TestSchemaDefinition::test_rows_table_exists PASSED [ 27%]
tests/core/landscape/test_schema.py::TestSchemaDefinition::test_tokens_table_exists PASSED [ 27%]
tests/core/landscape/test_schema.py::TestSchemaDefinition::test_node_states_table_exists PASSED [ 27%]
tests/core/landscape/test_schema.py::TestSchemaCreation::test_create_all_tables PASSED [ 27%]
tests/core/landscape/test_schema.py::TestPhase3ASchemaAdditions::test_routing_events_table_exists PASSED [ 27%]
tests/core/landscape/test_schema.py::TestPhase3ASchemaAdditions::test_batches_table_exists PASSED [ 27%]
tests/core/landscape/test_schema.py::TestPhase3ASchemaAdditions::test_batch_members_table_exists PASSED [ 27%]
tests/core/landscape/test_schema.py::TestPhase3ASchemaAdditions::test_batch_outputs_table_exists PASSED [ 27%]
tests/core/landscape/test_schema.py::TestPhase3ASchemaAdditions::test_all_13_tables_exist PASSED [ 27%]
tests/core/landscape/test_schema.py::TestPhase3AModels::test_routing_event_model PASSED [ 27%]
tests/core/landscape/test_schema.py::TestPhase3AModels::test_batch_model PASSED [ 27%]
tests/core/landscape/test_schema.py::TestNodesDeterminismColumn::test_nodes_table_has_determinism_column PASSED [ 28%]
tests/core/landscape/test_schema.py::TestNodesDeterminismColumn::test_node_model_has_determinism_field PASSED [ 28%]
tests/core/landscape/test_schema.py::TestNodesDeterminismColumn::test_determinism_values PASSED [ 28%]
tests/core/landscape/test_schema.py::TestPhase5CheckpointSchema::test_checkpoints_table_exists PASSED [ 28%]
tests/core/landscape/test_schema.py::TestPhase5CheckpointSchema::test_checkpoints_table_has_progress_columns PASSED [ 28%]
tests/core/landscape/test_schema.py::TestPhase5CheckpointSchema::test_checkpoints_table_in_metadata PASSED [ 28%]
tests/core/landscape/test_schema.py::TestPhase5CheckpointSchema::test_checkpoints_table_creates_in_database PASSED [ 28%]
tests/core/landscape/test_schema.py::TestPhase5CheckpointSchema::test_checkpoint_model PASSED [ 28%]
tests/core/landscape/test_schema.py::TestPhase5CheckpointSchema::test_checkpoint_model_with_aggregation_state PASSED [ 28%]
tests/core/landscape/test_schema.py::TestArtifactsIdempotencyKey::test_artifacts_table_has_idempotency_key PASSED [ 28%]
tests/core/landscape/test_schema.py::TestArtifactsIdempotencyKey::test_artifact_model_has_idempotency_key PASSED [ 28%]
tests/core/landscape/test_schema.py::TestBatchStatusType::test_batch_status_is_typed PASSED [ 28%]
tests/core/landscape/test_schema.py::TestBatchesTriggerType::test_batches_table_has_trigger_type PASSED [ 28%]
tests/core/landscape/test_schema.py::TestBatchesTriggerType::test_batch_model_has_trigger_type PASSED [ 28%]
tests/core/landscape/test_validation_error_noncanonical.py::TestValidationErrorNonCanonical::test_record_primitive_int PASSED [ 28%]
tests/core/landscape/test_validation_error_noncanonical.py::TestValidationErrorNonCanonical::test_record_primitive_string PASSED [ 28%]
tests/core/landscape/test_validation_error_noncanonical.py::TestValidationErrorNonCanonical::test_record_list PASSED [ 28%]
tests/core/landscape/test_validation_error_noncanonical.py::TestValidationErrorNonCanonical::test_record_nan_value PASSED [ 28%]
tests/core/landscape/test_validation_error_noncanonical.py::TestValidationErrorNonCanonical::test_record_infinity_value PASSED [ 28%]
tests/core/landscape/test_validation_error_noncanonical.py::TestValidationErrorNonCanonical::test_record_negative_infinity PASSED [ 28%]
tests/core/landscape/test_validation_error_noncanonical.py::TestValidationErrorNonCanonical::test_audit_trail_contains_repr_fallback PASSED [ 28%]
tests/core/landscape/test_validation_error_noncanonical.py::TestValidationErrorNonCanonical::test_multiple_non_canonical_rows PASSED [ 28%]
tests/core/landscape/test_validation_error_noncanonical.py::test_repr_hash_helper PASSED [ 28%]
tests/core/landscape/test_validation_error_noncanonical.py::test_noncanonical_metadata_structure PASSED [ 28%]
tests/core/rate_limit/test_limiter.py::TestRateLimiterValidation::test_rejects_empty_name PASSED [ 28%]
tests/core/rate_limit/test_limiter.py::TestRateLimiterValidation::test_rejects_name_starting_with_number PASSED [ 28%]
tests/core/rate_limit/test_limiter.py::TestRateLimiterValidation::test_rejects_name_with_special_characters PASSED [ 28%]
tests/core/rate_limit/test_limiter.py::TestRateLimiterValidation::test_rejects_sql_injection_attempt PASSED [ 28%]
tests/core/rate_limit/test_limiter.py::TestRateLimiterValidation::test_accepts_valid_names PASSED [ 28%]
tests/core/rate_limit/test_limiter.py::TestRateLimiterValidation::test_rejects_zero_requests_per_second PASSED [ 28%]
tests/core/rate_limit/test_limiter.py::TestRateLimiterValidation::test_rejects_negative_requests_per_second PASSED [ 28%]
tests/core/rate_limit/test_limiter.py::TestRateLimiterValidation::test_rejects_zero_requests_per_minute PASSED [ 28%]
tests/core/rate_limit/test_limiter.py::TestRateLimiterValidation::test_rejects_negative_requests_per_minute PASSED [ 28%]
tests/core/rate_limit/test_limiter.py::TestRateLimiterValidation::test_accepts_none_requests_per_minute PASSED [ 29%]
tests/core/rate_limit/test_limiter.py::TestTryAcquireAtomicity::test_try_acquire_does_not_consume_on_partial_failure PASSED [ 29%]
tests/core/rate_limit/test_limiter.py::TestRateLimiter::test_create_limiter PASSED [ 29%]
tests/core/rate_limit/test_limiter.py::TestRateLimiter::test_acquire_within_limit PASSED [ 29%]
tests/core/rate_limit/test_limiter.py::TestRateLimiter::test_acquire_blocks_when_exceeded PASSED [ 29%]
tests/core/rate_limit/test_limiter.py::TestRateLimiter::test_try_acquire_returns_false_when_exceeded PASSED [ 29%]
tests/core/rate_limit/test_limiter.py::TestRateLimiter::test_limiter_with_sqlite_persistence PASSED [ 29%]
tests/core/rate_limit/test_limiter.py::TestRateLimiter::test_limiter_context_manager PASSED [ 29%]
tests/core/rate_limit/test_limiter.py::TestRateLimiter::test_weight_parameter PASSED [ 29%]
tests/core/rate_limit/test_limiter.py::TestRateLimiter::test_requests_per_minute_limit PASSED [ 29%]
tests/core/rate_limit/test_limiter.py::TestRateLimitRegistry::test_get_or_create_limiter PASSED [ 29%]
tests/core/rate_limit/test_limiter.py::TestRateLimitRegistry::test_different_services_different_limiters PASSED [ 29%]
tests/core/rate_limit/test_limiter.py::TestRateLimitRegistry::test_registry_respects_service_config PASSED [ 29%]
tests/core/rate_limit/test_limiter.py::TestRateLimitRegistry::test_registry_disabled PASSED [ 29%]
tests/core/rate_limit/test_limiter.py::TestRateLimitRegistry::test_registry_disabled_returns_same_noop_instance PASSED [ 29%]
tests/core/rate_limit/test_limiter.py::TestRateLimitRegistry::test_reset_all_clears_registry PASSED [ 29%]
tests/core/rate_limit/test_limiter.py::TestRateLimitRegistry::test_registry_close PASSED [ 29%]
tests/core/rate_limit/test_limiter.py::TestNoOpLimiter::test_noop_limiter_acquire PASSED [ 29%]
tests/core/rate_limit/test_limiter.py::TestNoOpLimiter::test_noop_limiter_try_acquire PASSED [ 29%]
tests/core/rate_limit/test_limiter.py::TestNoOpLimiter::test_noop_limiter_context_manager PASSED [ 29%]
tests/core/rate_limit/test_limiter.py::TestNoOpLimiter::test_noop_limiter_close PASSED [ 29%]
tests/core/rate_limit/test_limiter.py::TestExcepthookSuppression::test_suppression_only_for_registered_threads PASSED [ 29%]
tests/core/rate_limit/test_limiter.py::TestExcepthookSuppression::test_suppression_only_for_assertion_error PASSED [ 29%]
tests/core/rate_limit/test_limiter.py::TestExcepthookSuppression::test_suppression_works_for_registered_assertion_error PASSED [ 29%]
tests/core/rate_limit/test_limiter.py::TestAcquireThreadSafety::test_acquire_concurrency_no_interleaving PASSED [ 29%]
tests/core/rate_limit/test_limiter.py::TestAcquireThreadSafety::test_acquire_atomicity_across_multiple_rate_limits PASSED [ 29%]
tests/core/rate_limit/test_limiter.py::TestAcquireThreadSafety::test_acquire_timeout_parameter PASSED [ 29%]
tests/core/rate_limit/test_limiter.py::TestAcquireThreadSafety::test_acquire_with_timeout_none_accepts_parameter PASSED [ 29%]
tests/core/rate_limit/test_registry.py::TestNoOpLimiter::test_acquire_does_nothing PASSED [ 29%]
tests/core/rate_limit/test_registry.py::TestNoOpLimiter::test_try_acquire_always_succeeds PASSED [ 29%]
tests/core/rate_limit/test_registry.py::TestNoOpLimiter::test_close_does_nothing PASSED [ 29%]
tests/core/rate_limit/test_registry.py::TestNoOpLimiter::test_context_manager_protocol PASSED [ 29%]
tests/core/rate_limit/test_registry.py::TestNoOpLimiter::test_context_manager_calls_close_on_exit PASSED [ 29%]
tests/core/rate_limit/test_registry.py::TestRateLimitRegistryDisabled::test_returns_noop_limiter_when_disabled PASSED [ 29%]
tests/core/rate_limit/test_registry.py::TestRateLimitRegistryDisabled::test_same_noop_instance_for_all_services PASSED [ 30%]
tests/core/rate_limit/test_registry.py::TestRateLimitRegistryEnabled::test_creates_limiter_for_unknown_service PASSED [ 30%]
tests/core/rate_limit/test_registry.py::TestRateLimitRegistryEnabled::test_returns_same_limiter_for_same_service PASSED [ 30%]
tests/core/rate_limit/test_registry.py::TestRateLimitRegistryEnabled::test_different_limiters_for_different_services PASSED [ 30%]
tests/core/rate_limit/test_registry.py::TestRateLimitRegistryEnabled::test_uses_service_specific_config PASSED [ 30%]
tests/core/rate_limit/test_registry.py::TestRateLimitRegistryEnabled::test_uses_default_config_for_unconfigured_service PASSED [ 30%]
tests/core/rate_limit/test_registry.py::TestRateLimitRegistryThreadSafety::test_concurrent_get_limiter_same_service PASSED [ 30%]
tests/core/rate_limit/test_registry.py::TestRateLimitRegistryThreadSafety::test_concurrent_get_limiter_different_services PASSED [ 30%]
tests/core/rate_limit/test_registry.py::TestRateLimitRegistryCleanup::test_reset_all_clears_limiters PASSED [ 30%]
tests/core/rate_limit/test_registry.py::TestRateLimitRegistryCleanup::test_close_releases_resources PASSED [ 30%]
tests/core/rate_limit/test_registry.py::TestRateLimitRegistryCleanup::test_close_is_idempotent PASSED [ 30%]
tests/core/rate_limit/test_registry.py::TestRateLimitRegistryCleanup::test_reset_all_allows_new_limiters PASSED [ 30%]
tests/core/retention/test_purge.py::TestPurgeResult::test_purge_result_fields PASSED [ 30%]
tests/core/retention/test_purge.py::TestFindExpiredRowPayloads::test_find_expired_row_payloads PASSED [ 30%]
tests/core/retention/test_purge.py::TestFindExpiredRowPayloads::test_find_expired_respects_retention PASSED [ 30%]
tests/core/retention/test_purge.py::TestFindExpiredRowPayloads::test_find_expired_ignores_incomplete_runs PASSED [ 30%]
tests/core/retention/test_purge.py::TestFindExpiredRowPayloads::test_find_expired_excludes_null_refs PASSED [ 30%]
tests/core/retention/test_purge.py::TestFindExpiredRowPayloads::test_find_expired_with_as_of_date PASSED [ 30%]
tests/core/retention/test_purge.py::TestFindExpiredRowPayloads::test_find_expired_deduplicates_shared_refs PASSED [ 30%]
tests/core/retention/test_purge.py::TestPurgePayloads::test_purge_payloads_deletes_content PASSED [ 30%]
tests/core/retention/test_purge.py::TestPurgePayloads::test_purge_preserves_landscape_hashes PASSED [ 30%]
tests/core/retention/test_purge.py::TestPurgePayloads::test_purge_tracks_skipped_refs PASSED [ 30%]
tests/core/retention/test_purge.py::TestPurgePayloads::test_purge_measures_duration PASSED [ 30%]
tests/core/retention/test_purge.py::TestPurgePayloads::test_purge_empty_list PASSED [ 30%]
tests/core/retention/test_purge.py::TestFindExpiredCallPayloads::test_find_expired_includes_call_request_refs PASSED [ 30%]
tests/core/retention/test_purge.py::TestFindExpiredCallPayloads::test_find_expired_includes_call_response_refs PASSED [ 30%]
tests/core/retention/test_purge.py::TestFindExpiredRoutingPayloads::test_find_expired_includes_routing_reason_refs PASSED [ 30%]
tests/core/retention/test_purge.py::TestFindExpiredAllPayloadRefs::test_find_expired_payload_refs_returns_deduplicated_union PASSED [ 30%]
tests/core/retention/test_purge.py::TestFindExpiredAllPayloadRefs::test_find_expired_payload_refs_respects_retention PASSED [ 30%]
tests/core/retention/test_purge.py::TestContentAddressableSharedRefs::test_shared_row_ref_excluded_when_used_by_recent_run PASSED [ 30%]
tests/core/retention/test_purge.py::TestContentAddressableSharedRefs::test_shared_call_ref_excluded_when_used_by_recent_run PASSED [ 30%]
tests/core/retention/test_purge.py::TestContentAddressableSharedRefs::test_exclusive_expired_ref_is_returned PASSED [ 30%]
tests/core/retention/test_purge.py::TestContentAddressableSharedRefs::test_shared_ref_excluded_when_used_by_running_run PASSED [ 30%]
tests/core/security/test_fingerprint.py::TestSecretFingerprint::test_fingerprint_returns_hex_string PASSED [ 30%]
tests/core/security/test_fingerprint.py::TestSecretFingerprint::test_fingerprint_is_deterministic PASSED [ 31%]
tests/core/security/test_fingerprint.py::TestSecretFingerprint::test_different_secrets_have_different_fingerprints PASSED [ 31%]
tests/core/security/test_fingerprint.py::TestSecretFingerprint::test_different_keys_produce_different_fingerprints PASSED [ 31%]
tests/core/security/test_fingerprint.py::TestSecretFingerprint::test_fingerprint_length_is_64_chars PASSED [ 31%]
tests/core/security/test_fingerprint.py::TestSecretFingerprint::test_fingerprint_without_key_uses_env_var PASSED [ 31%]
tests/core/security/test_fingerprint.py::TestSecretFingerprint::test_fingerprint_without_key_raises_if_env_missing PASSED [ 31%]
tests/core/security/test_fingerprint.py::TestGetFingerprintKey::test_get_key_from_env PASSED [ 31%]
tests/core/security/test_fingerprint.py::TestGetFingerprintKey::test_get_key_raises_if_missing PASSED [ 31%]
tests/core/security/test_fingerprint.py::TestKeyVaultIntegration::test_keyvault_used_when_env_var_missing_and_vault_configured PASSED [ 31%]
tests/core/security/test_fingerprint.py::TestKeyVaultIntegration::test_keyvault_uses_custom_secret_name PASSED [ 31%]
tests/core/security/test_fingerprint.py::TestKeyVaultIntegration::test_env_var_takes_precedence_over_keyvault PASSED [ 31%]
tests/core/security/test_fingerprint.py::TestKeyVaultIntegration::test_raises_when_neither_env_nor_keyvault_configured PASSED [ 31%]
tests/core/security/test_fingerprint.py::TestKeyVaultIntegration::test_keyvault_error_includes_helpful_message PASSED [ 31%]
tests/core/security/test_fingerprint.py::TestKeyVaultIntegration::test_keyvault_raises_when_secret_value_is_none PASSED [ 31%]
tests/core/security/test_url.py::TestSanitizedDatabaseUrl::test_url_without_password_unchanged PASSED [ 31%]
tests/core/security/test_url.py::TestSanitizedDatabaseUrl::test_password_removed_from_url PASSED [ 31%]
tests/core/security/test_url.py::TestSanitizedDatabaseUrl::test_fingerprint_computed_when_password_present PASSED [ 31%]
tests/core/security/test_url.py::TestSanitizedDatabaseUrl::test_same_password_same_fingerprint PASSED [ 31%]
tests/core/security/test_url.py::TestSanitizedDatabaseUrl::test_different_passwords_different_fingerprints PASSED [ 31%]
tests/core/security/test_url.py::TestSanitizedDatabaseUrl::test_raises_when_password_present_no_key_production_mode PASSED [ 31%]
tests/core/security/test_url.py::TestSanitizedDatabaseUrl::test_dev_mode_sanitizes_without_fingerprint PASSED [ 31%]
tests/core/security/test_url.py::TestSanitizedDatabaseUrl::test_sqlite_url_unchanged PASSED [ 31%]
tests/core/security/test_url.py::TestSanitizedDatabaseUrl::test_is_frozen PASSED [ 31%]
tests/core/security/test_url.py::TestSanitizedWebhookUrl::test_url_without_tokens_unchanged PASSED [ 31%]
tests/core/security/test_url.py::TestSanitizedWebhookUrl::test_token_param_removed PASSED [ 31%]
tests/core/security/test_url.py::TestSanitizedWebhookUrl::test_api_key_param_removed PASSED [ 31%]
tests/core/security/test_url.py::TestSanitizedWebhookUrl::test_multiple_sensitive_params_removed PASSED [ 31%]
tests/core/security/test_url.py::TestSanitizedWebhookUrl::test_basic_auth_password_removed PASSED [ 31%]
tests/core/security/test_url.py::TestSanitizedWebhookUrl::test_basic_auth_username_only_removed PASSED [ 31%]
tests/core/security/test_url.py::TestSanitizedWebhookUrl::test_basic_auth_username_empty_password_removed PASSED [ 31%]
tests/core/security/test_url.py::TestSanitizedWebhookUrl::test_basic_auth_username_and_password_both_fingerprinted PASSED [ 31%]
tests/core/security/test_url.py::TestSanitizedWebhookUrl::test_fingerprint_computed_for_tokens PASSED [ 31%]
tests/core/security/test_url.py::TestSanitizedWebhookUrl::test_fingerprint_of_tokens_only_not_full_url PASSED [ 31%]
tests/core/security/test_url.py::TestSanitizedWebhookUrl::test_raises_when_token_present_no_key_production_mode PASSED [ 32%]
tests/core/security/test_url.py::TestSanitizedWebhookUrl::test_dev_mode_sanitizes_without_fingerprint PASSED [ 32%]
tests/core/security/test_url.py::TestSanitizedWebhookUrl::test_case_insensitive_param_matching PASSED [ 32%]
tests/core/security/test_url.py::TestSanitizedWebhookUrl::test_is_frozen PASSED [ 32%]
tests/core/security/test_url.py::TestSanitizedWebhookUrl::test_ipv6_url_without_auth_unchanged PASSED [ 32%]
tests/core/security/test_url.py::TestSanitizedWebhookUrl::test_ipv6_with_username_only_preserves_brackets PASSED [ 32%]
tests/core/security/test_url.py::TestSanitizedWebhookUrl::test_ipv6_with_username_and_password_preserves_brackets PASSED [ 32%]
tests/core/security/test_url.py::TestSanitizedWebhookUrl::test_ipv6_full_address_with_auth PASSED [ 32%]
tests/core/security/test_url.py::TestSanitizedWebhookUrl::test_ipv6_no_port_with_auth PASSED [ 32%]
tests/core/security/test_url.py::TestSensitiveParams::test_sensitive_param_in_set[token] PASSED [ 32%]
tests/core/security/test_url.py::TestSensitiveParams::test_sensitive_param_in_set[api_key] PASSED [ 32%]
tests/core/security/test_url.py::TestSensitiveParams::test_sensitive_param_in_set[apikey] PASSED [ 32%]
tests/core/security/test_url.py::TestSensitiveParams::test_sensitive_param_in_set[secret] PASSED [ 32%]
tests/core/security/test_url.py::TestSensitiveParams::test_sensitive_param_in_set[key] PASSED [ 32%]
tests/core/security/test_url.py::TestSensitiveParams::test_sensitive_param_in_set[password] PASSED [ 32%]
tests/core/security/test_url.py::TestSensitiveParams::test_sensitive_param_in_set[auth] PASSED [ 32%]
tests/core/security/test_url.py::TestSensitiveParams::test_sensitive_param_in_set[access_token] PASSED [ 32%]
tests/core/security/test_url.py::TestSensitiveParams::test_sensitive_param_in_set[client_secret] PASSED [ 32%]
tests/core/security/test_url.py::TestSensitiveParams::test_sensitive_param_in_set[api_secret] PASSED [ 32%]
tests/core/security/test_url.py::TestSensitiveParams::test_sensitive_param_in_set[bearer] PASSED [ 32%]
tests/core/security/test_url.py::TestSensitiveParams::test_sensitive_param_in_set[signature] PASSED [ 32%]
tests/core/security/test_url.py::TestSensitiveParams::test_sensitive_param_in_set[sig] PASSED [ 32%]
tests/core/security/test_url.py::TestSensitiveParams::test_sensitive_param_in_set[authorization] PASSED [ 32%]
tests/core/security/test_url.py::TestSensitiveParams::test_sensitive_param_in_set[x-api-key] PASSED [ 32%]
tests/core/security/test_url.py::TestSensitiveParams::test_sensitive_param_in_set[credential] PASSED [ 32%]
tests/core/security/test_url.py::TestSensitiveParams::test_sensitive_param_in_set[credentials] PASSED [ 32%]
tests/core/security/test_url.py::TestSensitiveParams::test_sensitive_param_removed_from_url[token] PASSED [ 32%]
tests/core/security/test_url.py::TestSensitiveParams::test_sensitive_param_removed_from_url[api_key] PASSED [ 32%]
tests/core/security/test_url.py::TestSensitiveParams::test_sensitive_param_removed_from_url[secret] PASSED [ 32%]
tests/core/security/test_url.py::TestSensitiveParams::test_sensitive_param_removed_from_url[access_token] PASSED [ 32%]
tests/core/security/test_url.py::TestSensitiveParams::test_sensitive_param_removed_from_url[signature] PASSED [ 32%]
tests/core/security/test_url.py::TestSensitiveParams::test_empty_token_value_still_strips_param_name PASSED [ 32%]
tests/core/security/test_url.py::TestSensitiveParams::test_empty_api_key_value_still_strips_param_name PASSED [ 32%]
tests/core/security/test_url.py::TestSensitiveParams::test_empty_token_does_not_trigger_fingerprint_error PASSED [ 32%]
tests/core/security/test_url.py::TestSensitiveParams::test_mixed_empty_and_nonempty_sensitive_params PASSED [ 33%]
tests/core/security/test_url.py::TestIntegrationWithArtifactDescriptor::test_database_artifact_uses_sanitized_url PASSED [ 33%]
tests/core/security/test_url.py::TestIntegrationWithArtifactDescriptor::test_webhook_artifact_uses_sanitized_url PASSED [ 33%]
tests/core/test_canonical.py::TestNormalizeValue::test_string_passthrough PASSED [ 33%]
tests/core/test_canonical.py::TestNormalizeValue::test_int_passthrough PASSED [ 33%]
tests/core/test_canonical.py::TestNormalizeValue::test_float_passthrough PASSED [ 33%]
tests/core/test_canonical.py::TestNormalizeValue::test_none_passthrough PASSED [ 33%]
tests/core/test_canonical.py::TestNormalizeValue::test_bool_passthrough PASSED [ 33%]
tests/core/test_canonical.py::TestNanInfinityRejection::test_nan_raises_value_error PASSED [ 33%]
tests/core/test_canonical.py::TestNanInfinityRejection::test_positive_infinity_raises_value_error PASSED [ 33%]
tests/core/test_canonical.py::TestNanInfinityRejection::test_negative_infinity_raises_value_error PASSED [ 33%]
tests/core/test_canonical.py::TestNanInfinityRejection::test_normal_float_allowed PASSED [ 33%]
tests/core/test_canonical.py::TestDecimalNonFiniteRejection::test_decimal_non_finite_raises_value_error[value0] PASSED [ 33%]
tests/core/test_canonical.py::TestDecimalNonFiniteRejection::test_decimal_non_finite_raises_value_error[value1] PASSED [ 33%]
tests/core/test_canonical.py::TestDecimalNonFiniteRejection::test_decimal_non_finite_raises_value_error[value2] PASSED [ 33%]
tests/core/test_canonical.py::TestDecimalNonFiniteRejection::test_decimal_non_finite_raises_value_error[value3] PASSED [ 33%]
tests/core/test_canonical.py::TestDecimalNonFiniteRejection::test_decimal_normal_values_allowed PASSED [ 33%]
tests/core/test_canonical.py::TestNumpyTypeConversion::test_numpy_int64_converts_to_int PASSED [ 33%]
tests/core/test_canonical.py::TestNumpyTypeConversion::test_numpy_float64_converts_to_float PASSED [ 33%]
tests/core/test_canonical.py::TestNumpyTypeConversion::test_numpy_float64_nan_raises PASSED [ 33%]
tests/core/test_canonical.py::TestNumpyTypeConversion::test_numpy_float64_inf_raises PASSED [ 33%]
tests/core/test_canonical.py::TestNumpyTypeConversion::test_numpy_bool_converts_to_bool PASSED [ 33%]
tests/core/test_canonical.py::TestNumpyTypeConversion::test_numpy_array_converts_to_list PASSED [ 33%]
tests/core/test_canonical.py::TestPandasTypeConversion::test_pandas_timestamp_naive_to_utc_iso PASSED [ 33%]
tests/core/test_canonical.py::TestPandasTypeConversion::test_pandas_timestamp_aware_to_utc_iso PASSED [ 33%]
tests/core/test_canonical.py::TestPandasTypeConversion::test_pandas_nat_to_none PASSED [ 33%]
tests/core/test_canonical.py::TestPandasTypeConversion::test_pandas_na_to_none PASSED [ 33%]
tests/core/test_canonical.py::TestSpecialTypeConversion::test_datetime_naive_to_utc_iso PASSED [ 33%]
tests/core/test_canonical.py::TestSpecialTypeConversion::test_datetime_aware_to_utc_iso PASSED [ 33%]
tests/core/test_canonical.py::TestSpecialTypeConversion::test_bytes_to_base64_wrapper PASSED [ 33%]
tests/core/test_canonical.py::TestSpecialTypeConversion::test_decimal_to_string PASSED [ 33%]
tests/core/test_canonical.py::TestRecursiveNormalization::test_dict_with_numpy_values PASSED [ 33%]
tests/core/test_canonical.py::TestRecursiveNormalization::test_list_with_mixed_types PASSED [ 33%]
tests/core/test_canonical.py::TestRecursiveNormalization::test_nested_dict PASSED [ 34%]
tests/core/test_canonical.py::TestRecursiveNormalization::test_tuple_converts_to_list PASSED [ 34%]
tests/core/test_canonical.py::TestRecursiveNormalization::test_nan_in_nested_raises PASSED [ 34%]
tests/core/test_canonical.py::TestCanonicalJsonSerialization::test_canonical_json_sorts_keys PASSED [ 34%]
tests/core/test_canonical.py::TestCanonicalJsonSerialization::test_canonical_json_no_whitespace PASSED [ 34%]
tests/core/test_canonical.py::TestCanonicalJsonSerialization::test_canonical_json_handles_numpy PASSED [ 34%]
tests/core/test_canonical.py::TestStableHash::test_stable_hash_returns_hex_string PASSED [ 34%]
tests/core/test_canonical.py::TestStableHash::test_stable_hash_deterministic PASSED [ 34%]
tests/core/test_canonical.py::TestStableHash::test_stable_hash_key_order_independent PASSED [ 34%]
tests/core/test_canonical.py::TestStableHash::test_stable_hash_verifiable PASSED [ 34%]
tests/core/test_canonical.py::TestCrossProcessStability::test_golden_hash_stability PASSED [ 34%]
tests/core/test_canonical.py::TestCrossProcessStability::test_version_constant_exists PASSED [ 34%]
tests/core/test_canonical.py::TestPublicAPI::test_import_from_core_module PASSED [ 34%]
tests/core/test_canonical.py::TestCoreIntegration::test_dag_importable_from_core PASSED [ 34%]
tests/core/test_canonical.py::TestCoreIntegration::test_config_importable_from_core PASSED [ 34%]
tests/core/test_canonical.py::TestCoreIntegration::test_payload_store_importable_from_core PASSED [ 34%]
tests/core/test_canonical_mutation_gaps.py::TestNanInfinityOrLogic::test_nan_alone_is_rejected_not_requiring_infinity PASSED [ 34%]
tests/core/test_canonical_mutation_gaps.py::TestNanInfinityOrLogic::test_positive_infinity_alone_is_rejected_not_requiring_nan PASSED [ 34%]
tests/core/test_canonical_mutation_gaps.py::TestNanInfinityOrLogic::test_negative_infinity_alone_is_rejected_not_requiring_nan PASSED [ 34%]
tests/core/test_canonical_mutation_gaps.py::TestTypeCheckCoversBothFloatTypes::test_python_float_nan_is_rejected PASSED [ 34%]
tests/core/test_canonical_mutation_gaps.py::TestTypeCheckCoversBothFloatTypes::test_numpy_float64_nan_is_rejected PASSED [ 34%]
tests/core/test_canonical_mutation_gaps.py::TestTypeCheckCoversBothFloatTypes::test_numpy_float32_nan_is_rejected PASSED [ 34%]
tests/core/test_canonical_mutation_gaps.py::TestTypeCheckCoversBothFloatTypes::test_python_float_infinity_is_rejected PASSED [ 34%]
tests/core/test_canonical_mutation_gaps.py::TestTypeCheckCoversBothFloatTypes::test_numpy_float64_infinity_is_rejected PASSED [ 34%]
tests/core/test_canonical_mutation_gaps.py::TestNormalFloatsPassThrough::test_zero_float_passes PASSED [ 34%]
tests/core/test_canonical_mutation_gaps.py::TestNormalFloatsPassThrough::test_negative_zero_passes PASSED [ 34%]
tests/core/test_canonical_mutation_gaps.py::TestNormalFloatsPassThrough::test_large_float_passes PASSED [ 34%]
tests/core/test_canonical_mutation_gaps.py::TestNormalFloatsPassThrough::test_small_float_passes PASSED [ 34%]
tests/core/test_canonical_mutation_gaps.py::TestNormalFloatsPassThrough::test_normal_numpy_float_passes PASSED [ 34%]
tests/core/test_config.py::TestDatabaseSettings::test_valid_sqlite_url PASSED [ 34%]
tests/core/test_config.py::TestDatabaseSettings::test_valid_postgres_url PASSED [ 34%]
tests/core/test_config.py::TestDatabaseSettings::test_pool_size_must_be_positive PASSED [ 34%]
tests/core/test_config.py::TestDatabaseSettings::test_settings_are_frozen PASSED [ 34%]
tests/core/test_config.py::TestRetrySettings::test_defaults PASSED       [ 34%]
tests/core/test_config.py::TestRetrySettings::test_max_attempts_must_be_positive PASSED [ 35%]
tests/core/test_config.py::TestRetrySettings::test_delays_must_be_positive PASSED [ 35%]
tests/core/test_config.py::TestElspethSettings::test_minimal_valid_config PASSED [ 35%]
tests/core/test_config.py::TestElspethSettings::test_nested_config PASSED [ 35%]
tests/core/test_config.py::TestElspethSettings::test_settings_are_frozen PASSED [ 35%]
tests/core/test_config.py::TestLoadSettings::test_load_from_yaml_file PASSED [ 35%]
tests/core/test_config.py::TestLoadSettings::test_load_with_env_override PASSED [ 35%]
tests/core/test_config.py::TestLoadSettings::test_load_validates_schema PASSED [ 35%]
tests/core/test_config.py::TestLoadSettings::test_load_missing_required_field PASSED [ 35%]
tests/core/test_config.py::TestLoadSettings::test_load_missing_file_raises_file_not_found PASSED [ 35%]
tests/core/test_config.py::TestDatasourceSettings::test_datasource_settings_structure PASSED [ 35%]
tests/core/test_config.py::TestDatasourceSettings::test_datasource_settings_options_default_empty PASSED [ 35%]
tests/core/test_config.py::TestDatasourceSettings::test_datasource_settings_frozen PASSED [ 35%]
tests/core/test_config.py::TestRowPluginSettings::test_row_plugin_settings_structure PASSED [ 35%]
tests/core/test_config.py::TestRowPluginSettings::test_row_plugin_settings_defaults PASSED [ 35%]
tests/core/test_config.py::TestRowPluginSettings::test_row_plugin_settings_requires_plugin PASSED [ 35%]
tests/core/test_config.py::TestSinkSettings::test_sink_settings_structure PASSED [ 35%]
tests/core/test_config.py::TestSinkSettings::test_sink_settings_options_default_empty PASSED [ 35%]
tests/core/test_config.py::TestLandscapeExportSettings::test_landscape_export_config_defaults PASSED [ 35%]
tests/core/test_config.py::TestLandscapeExportSettings::test_landscape_export_config_with_sink PASSED [ 35%]
tests/core/test_config.py::TestLandscapeExportSettings::test_landscape_export_format_validation PASSED [ 35%]
tests/core/test_config.py::TestLandscapeExportSettings::test_landscape_export_settings_frozen PASSED [ 35%]
tests/core/test_config.py::TestLandscapeSettings::test_landscape_settings_structure PASSED [ 35%]
tests/core/test_config.py::TestLandscapeSettings::test_landscape_settings_defaults PASSED [ 35%]
tests/core/test_config.py::TestLandscapeSettings::test_landscape_settings_postgresql_url PASSED [ 35%]
tests/core/test_config.py::TestLandscapeSettings::test_landscape_settings_backend_validation PASSED [ 35%]
tests/core/test_config.py::TestConcurrencySettings::test_concurrency_settings_structure PASSED [ 35%]
tests/core/test_config.py::TestConcurrencySettings::test_concurrency_settings_default PASSED [ 35%]
tests/core/test_config.py::TestConcurrencySettings::test_concurrency_settings_validation PASSED [ 35%]
tests/core/test_config.py::TestLoadSettingsArchitecture::test_load_readme_example PASSED [ 35%]
tests/core/test_config.py::TestLoadSettingsArchitecture::test_load_minimal_config PASSED [ 35%]
tests/core/test_config.py::TestLoadSettingsArchitecture::test_load_invalid_output_sink PASSED [ 35%]
tests/core/test_config.py::TestExportSinkValidation::test_export_sink_must_exist_when_enabled PASSED [ 35%]
tests/core/test_config.py::TestExportSinkValidation::test_export_sink_not_required_when_disabled PASSED [ 36%]
tests/core/test_config.py::TestExportSinkValidation::test_export_sink_required_when_enabled PASSED [ 36%]
tests/core/test_config.py::TestExportSinkValidation::test_export_sink_valid_reference PASSED [ 36%]
tests/core/test_config.py::TestCheckpointSettings::test_checkpoint_settings_defaults PASSED [ 36%]
tests/core/test_config.py::TestCheckpointSettings::test_checkpoint_frequency_options PASSED [ 36%]
tests/core/test_config.py::TestCheckpointSettings::test_checkpoint_settings_validation PASSED [ 36%]
tests/core/test_config.py::TestCheckpointSettings::test_checkpoint_interval_must_be_positive PASSED [ 36%]
tests/core/test_config.py::TestCheckpointSettings::test_checkpoint_settings_frozen PASSED [ 36%]
tests/core/test_config.py::TestCheckpointSettings::test_checkpoint_settings_invalid_frequency PASSED [ 36%]
tests/core/test_config.py::TestElspethSettingsArchitecture::test_elspeth_settings_required_fields PASSED [ 36%]
tests/core/test_config.py::TestElspethSettingsArchitecture::test_elspeth_settings_minimal_valid PASSED [ 36%]
tests/core/test_config.py::TestElspethSettingsArchitecture::test_elspeth_settings_output_sink_must_exist PASSED [ 36%]
tests/core/test_config.py::TestElspethSettingsArchitecture::test_elspeth_settings_at_least_one_sink PASSED [ 36%]
tests/core/test_config.py::TestRateLimitSettings::test_rate_limit_settings_defaults PASSED [ 36%]
tests/core/test_config.py::TestRateLimitSettings::test_rate_limit_per_service PASSED [ 36%]
tests/core/test_config.py::TestRateLimitSettings::test_rate_limit_get_service_config PASSED [ 36%]
tests/core/test_config.py::TestRateLimitSettings::test_rate_limit_settings_frozen PASSED [ 36%]
tests/core/test_config.py::TestRateLimitSettings::test_service_rate_limit_frozen PASSED [ 36%]
tests/core/test_config.py::TestRateLimitSettings::test_service_rate_limit_requests_per_second_must_be_positive PASSED [ 36%]
tests/core/test_config.py::TestRateLimitSettings::test_service_rate_limit_requests_per_minute_must_be_positive PASSED [ 36%]
tests/core/test_config.py::TestRateLimitSettings::test_rate_limit_settings_default_requests_per_second_must_be_positive PASSED [ 36%]
tests/core/test_config.py::TestRateLimitSettings::test_rate_limit_settings_default_requests_per_minute_must_be_positive PASSED [ 36%]
tests/core/test_config.py::TestResolveConfig::test_resolve_config_returns_dict PASSED [ 36%]
tests/core/test_config.py::TestResolveConfig::test_resolve_config_includes_defaults PASSED [ 36%]
tests/core/test_config.py::TestResolveConfig::test_resolve_config_json_serializable PASSED [ 36%]
tests/core/test_config.py::TestResolveConfig::test_resolve_config_preserves_row_plugins PASSED [ 36%]
tests/core/test_config.py::TestGateSettings::test_gate_settings_minimal_valid PASSED [ 36%]
tests/core/test_config.py::TestGateSettings::test_gate_settings_with_fork PASSED [ 36%]
tests/core/test_config.py::TestGateSettings::test_gate_settings_frozen PASSED [ 36%]
tests/core/test_config.py::TestGateSettings::test_gate_settings_invalid_condition_syntax PASSED [ 36%]
tests/core/test_config.py::TestGateSettings::test_gate_settings_forbidden_condition_construct PASSED [ 36%]
tests/core/test_config.py::TestGateSettings::test_gate_settings_forbidden_name_in_condition PASSED [ 36%]
tests/core/test_config.py::TestGateSettings::test_gate_settings_empty_routes PASSED [ 36%]
tests/core/test_config.py::TestGateSettings::test_gate_settings_hyphenated_sink_destination_accepted PASSED [ 36%]
tests/core/test_config.py::TestGateSettings::test_gate_settings_numeric_prefix_sink_destination_accepted PASSED [ 37%]
tests/core/test_config.py::TestGateSettings::test_gate_settings_fork_requires_fork_to PASSED [ 37%]
tests/core/test_config.py::TestGateSettings::test_gate_settings_fork_to_requires_fork_route PASSED [ 37%]
tests/core/test_config.py::TestGateSettings::test_gate_settings_valid_identifiers PASSED [ 37%]
tests/core/test_config.py::TestGateSettings::test_gate_settings_complex_condition PASSED [ 37%]
tests/core/test_config.py::TestGateSettings::test_gate_settings_reserved_route_label_rejected PASSED [ 37%]
tests/core/test_config.py::TestGateSettings::test_gate_settings_reserved_fork_branch_rejected PASSED [ 37%]
tests/core/test_config.py::TestGateSettings::test_gate_settings_continue_as_destination_allowed PASSED [ 37%]
tests/core/test_config.py::TestGateSettings::test_gate_settings_boolean_condition_requires_true_false_routes PASSED [ 37%]
tests/core/test_config.py::TestGateSettings::test_gate_settings_non_boolean_allows_custom_routes PASSED [ 37%]
tests/core/test_config.py::TestElspethSettingsWithGates::test_elspeth_settings_gates_default_empty PASSED [ 37%]
tests/core/test_config.py::TestElspethSettingsWithGates::test_elspeth_settings_with_gates PASSED [ 37%]
tests/core/test_config.py::TestElspethSettingsWithGates::test_elspeth_settings_multiple_gates PASSED [ 37%]
tests/core/test_config.py::TestElspethSettingsWithGates::test_elspeth_settings_rejects_duplicate_gate_names PASSED [ 37%]
tests/core/test_config.py::TestElspethSettingsWithGates::test_elspeth_settings_rejects_multiple_duplicate_gate_pairs PASSED [ 37%]
tests/core/test_config.py::TestElspethSettingsWithGates::test_resolve_config_includes_gates PASSED [ 37%]
tests/core/test_config.py::TestLoadSettingsWithGates::test_load_settings_with_gates PASSED [ 37%]
tests/core/test_config.py::TestLoadSettingsWithGates::test_load_settings_with_fork_gate PASSED [ 37%]
tests/core/test_config.py::TestCoalesceSettings::test_coalesce_settings_basic PASSED [ 37%]
tests/core/test_config.py::TestCoalesceSettings::test_coalesce_settings_quorum_requires_count PASSED [ 37%]
tests/core/test_config.py::TestCoalesceSettings::test_coalesce_settings_quorum_with_count PASSED [ 37%]
tests/core/test_config.py::TestCoalesceSettings::test_coalesce_settings_best_effort_requires_timeout PASSED [ 37%]
tests/core/test_config.py::TestCoalesceSettings::test_coalesce_settings_nested_merge_strategy PASSED [ 37%]
tests/core/test_config.py::TestCoalesceSettings::test_coalesce_settings_select_merge_strategy PASSED [ 37%]
tests/core/test_config.py::TestCoalesceSettings::test_coalesce_settings_select_with_branch PASSED [ 37%]
tests/core/test_config.py::TestCoalesceSettings::test_coalesce_settings_quorum_count_cannot_exceed_branches PASSED [ 37%]
tests/core/test_config.py::TestCoalesceSettings::test_coalesce_settings_select_branch_must_be_in_branches PASSED [ 37%]
tests/core/test_config.py::TestCoalesceSettings::test_coalesce_settings_branches_minimum_two PASSED [ 37%]
tests/core/test_config.py::TestCoalesceSettings::test_coalesce_settings_timeout_must_be_positive PASSED [ 37%]
tests/core/test_config.py::TestCoalesceSettings::test_coalesce_settings_quorum_count_must_be_positive PASSED [ 37%]
tests/core/test_config.py::TestCoalesceSettings::test_coalesce_settings_frozen PASSED [ 37%]
tests/core/test_config.py::TestCoalesceSettings::test_coalesce_settings_first_policy PASSED [ 37%]
tests/core/test_config.py::TestCoalesceSettings::test_coalesce_settings_best_effort_with_timeout PASSED [ 37%]
tests/core/test_config.py::TestCoalesceSettings::test_coalesce_settings_timeout_negative_rejected PASSED [ 38%]
tests/core/test_config.py::TestCoalesceSettings::test_coalesce_settings_quorum_count_negative_rejected PASSED [ 38%]
tests/core/test_config.py::TestElspethSettingsWithCoalesce::test_elspeth_settings_with_coalesce PASSED [ 38%]
tests/core/test_config.py::TestElspethSettingsWithCoalesce::test_elspeth_settings_coalesce_default_empty PASSED [ 38%]
tests/core/test_config.py::TestElspethSettingsWithCoalesce::test_resolve_config_includes_coalesce PASSED [ 38%]
tests/core/test_config.py::TestElspethSettingsWithCoalesce::test_elspeth_settings_rejects_duplicate_coalesce_names PASSED [ 38%]
tests/core/test_config.py::TestElspethSettingsWithCoalesce::test_elspeth_settings_rejects_multiple_duplicate_coalesce_pairs PASSED [ 38%]
tests/core/test_config.py::TestSecretFieldFingerprinting::test_api_key_preserved_at_load_time PASSED [ 38%]
tests/core/test_config.py::TestSecretFieldFingerprinting::test_api_key_is_fingerprinted_in_resolve_config PASSED [ 38%]
tests/core/test_config.py::TestSecretFieldFingerprinting::test_token_preserved_at_load_time PASSED [ 38%]
tests/core/test_config.py::TestSecretFieldFingerprinting::test_token_is_fingerprinted_in_resolve_config PASSED [ 38%]
tests/core/test_config.py::TestSecretFieldFingerprinting::test_secret_suffix_preserved_at_load_time PASSED [ 38%]
tests/core/test_config.py::TestSecretFieldFingerprinting::test_secret_suffix_is_fingerprinted_in_resolve_config PASSED [ 38%]
tests/core/test_config.py::TestSecretFieldFingerprinting::test_sink_options_preserved_at_load_time PASSED [ 38%]
tests/core/test_config.py::TestSecretFieldFingerprinting::test_sink_options_are_fingerprinted_in_resolve_config PASSED [ 38%]
tests/core/test_config.py::TestSecretFieldFingerprinting::test_non_secret_fields_preserved PASSED [ 38%]
tests/core/test_config.py::TestSecretFieldFingerprinting::test_row_plugin_options_preserved_at_load_time PASSED [ 38%]
tests/core/test_config.py::TestSecretFieldFingerprinting::test_row_plugin_options_are_fingerprinted_in_resolve_config PASSED [ 38%]
tests/core/test_config.py::TestSecretFieldFingerprinting::test_nested_secrets_are_fingerprinted PASSED [ 38%]
tests/core/test_config.py::TestSecretFieldFingerprinting::test_secrets_in_lists_are_fingerprinted PASSED [ 38%]
tests/core/test_config.py::TestSecretFieldFingerprinting::test_missing_key_raises_error_on_fingerprint PASSED [ 38%]
tests/core/test_config.py::TestSecretFieldFingerprinting::test_load_settings_allows_secrets_without_fingerprint_key PASSED [ 38%]
tests/core/test_config.py::TestSecretFieldFingerprinting::test_missing_key_raises_error_on_resolve_config PASSED [ 38%]
tests/core/test_config.py::TestSecretFieldFingerprinting::test_dev_mode_keeps_secrets_unchanged PASSED [ 38%]
tests/core/test_config.py::TestSecretFieldFingerprinting::test_dev_mode_allows_load_settings PASSED [ 38%]
tests/core/test_config.py::TestSecretFieldFingerprinting::test_dsn_password_sanitized PASSED [ 38%]
tests/core/test_config.py::TestSecretFieldFingerprinting::test_dsn_without_password_unchanged PASSED [ 38%]
tests/core/test_config.py::TestSecretFieldFingerprinting::test_dsn_password_raises_without_key PASSED [ 38%]
tests/core/test_config.py::TestSecretFieldFingerprinting::test_dsn_password_redacted_in_dev_mode PASSED [ 38%]
tests/core/test_config.py::TestSecretFieldFingerprinting::test_landscape_url_password_fingerprinted PASSED [ 38%]
tests/core/test_config.py::TestSecretFieldFingerprinting::test_landscape_url_password_redacted_in_dev_mode PASSED [ 38%]
tests/core/test_config.py::TestRunModeSettings::test_run_mode_defaults_to_live PASSED [ 38%]
tests/core/test_config.py::TestRunModeSettings::test_run_mode_accepts_all_valid_modes PASSED [ 38%]
tests/core/test_config.py::TestRunModeSettings::test_replay_mode_requires_source_run_id PASSED [ 38%]
tests/core/test_config.py::TestRunModeSettings::test_verify_mode_requires_source_run_id PASSED [ 39%]
tests/core/test_config.py::TestRunModeSettings::test_live_mode_ignores_source_run_id PASSED [ 39%]
tests/core/test_config.py::TestRunModeSettings::test_live_mode_accepts_source_run_id PASSED [ 39%]
tests/core/test_config.py::TestRunModeSettings::test_run_mode_invalid_value_rejected PASSED [ 39%]
tests/core/test_config.py::TestRunModeSettings::test_run_mode_settings_frozen PASSED [ 39%]
tests/core/test_config.py::TestRunModeSettings::test_resolve_config_includes_run_mode PASSED [ 39%]
tests/core/test_config.py::TestExpandTemplateFiles::test_expand_template_file_not_found PASSED [ 39%]
tests/core/test_config.py::TestExpandTemplateFiles::test_expand_template_file_with_inline_raises PASSED [ 39%]
tests/core/test_config.py::TestExpandTemplateFiles::test_expand_lookup_file_invalid_yaml PASSED [ 39%]
tests/core/test_config.py::TestExpandTemplateFiles::test_expand_template_file PASSED [ 39%]
tests/core/test_config.py::TestExpandTemplateFiles::test_expand_lookup_file_with_inline_raises PASSED [ 39%]
tests/core/test_config.py::TestExpandTemplateFiles::test_expand_lookup_file PASSED [ 39%]
tests/core/test_config.py::TestExpandTemplateFiles::test_expand_template_and_lookup_files PASSED [ 39%]
tests/core/test_config.py::TestExpandTemplateFiles::test_expand_system_prompt_file_not_found PASSED [ 39%]
tests/core/test_config.py::TestExpandTemplateFiles::test_expand_system_prompt_file_with_inline_raises PASSED [ 39%]
tests/core/test_config.py::TestExpandTemplateFiles::test_expand_system_prompt_file PASSED [ 39%]
tests/core/test_config.py::TestExpandTemplateFiles::test_expand_all_file_types PASSED [ 39%]
tests/core/test_config.py::TestLoadSettingsWithRunMode::test_load_settings_with_live_mode PASSED [ 39%]
tests/core/test_config.py::TestLoadSettingsWithRunMode::test_load_settings_with_replay_mode PASSED [ 39%]
tests/core/test_config.py::TestLoadSettingsWithRunMode::test_load_settings_with_verify_mode PASSED [ 39%]
tests/core/test_config.py::TestLoadSettingsWithRunMode::test_load_settings_replay_without_source_run_id_fails PASSED [ 39%]
tests/core/test_config.py::TestLoadSettingsTemplateFileExpansion::test_load_settings_expands_template_files PASSED [ 39%]
tests/core/test_config_aggregation.py::TestTriggerConfig::test_count_trigger_only PASSED [ 39%]
tests/core/test_config_aggregation.py::TestTriggerConfig::test_timeout_trigger_only PASSED [ 39%]
tests/core/test_config_aggregation.py::TestTriggerConfig::test_condition_trigger_only PASSED [ 39%]
tests/core/test_config_aggregation.py::TestTriggerConfig::test_combined_count_and_timeout PASSED [ 39%]
tests/core/test_config_aggregation.py::TestTriggerConfig::test_combined_all_triggers PASSED [ 39%]
tests/core/test_config_aggregation.py::TestTriggerConfig::test_at_least_one_trigger_required PASSED [ 39%]
tests/core/test_config_aggregation.py::TestTriggerConfig::test_condition_validates_expression PASSED [ 39%]
tests/core/test_config_aggregation.py::TestTriggerConfig::test_count_must_be_positive PASSED [ 39%]
tests/core/test_config_aggregation.py::TestTriggerConfig::test_timeout_must_be_positive PASSED [ 39%]
tests/core/test_config_aggregation.py::TestTriggerConfig::test_has_count_property PASSED [ 39%]
tests/core/test_config_aggregation.py::TestTriggerConfig::test_has_timeout_property PASSED [ 39%]
tests/core/test_config_aggregation.py::TestTriggerConfig::test_has_condition_property PASSED [ 40%]
tests/core/test_config_aggregation.py::TestTriggerConfig::test_condition_rejects_forbidden_constructs PASSED [ 40%]
tests/core/test_config_aggregation.py::TestAggregationSettings::test_aggregation_settings_valid PASSED [ 40%]
tests/core/test_config_aggregation.py::TestAggregationSettings::test_aggregation_settings_combined_triggers PASSED [ 40%]
tests/core/test_config_aggregation.py::TestAggregationSettings::test_aggregation_settings_default_output_mode PASSED [ 40%]
tests/core/test_config_aggregation.py::TestAggregationSettings::test_aggregation_settings_passthrough_mode PASSED [ 40%]
tests/core/test_config_aggregation.py::TestAggregationSettings::test_aggregation_settings_transform_mode PASSED [ 40%]
tests/core/test_config_aggregation.py::TestAggregationSettings::test_aggregation_settings_invalid_output_mode PASSED [ 40%]
tests/core/test_config_aggregation.py::TestAggregationSettings::test_aggregation_settings_requires_name PASSED [ 40%]
tests/core/test_config_aggregation.py::TestAggregationSettings::test_aggregation_settings_options_default_empty PASSED [ 40%]
tests/core/test_config_aggregation.py::TestAggregationSettings::test_aggregation_settings_with_options PASSED [ 40%]
tests/core/test_config_aggregation.py::TestElspethSettingsAggregations::test_elspeth_settings_aggregations_default_empty PASSED [ 40%]
tests/core/test_config_aggregation.py::TestElspethSettingsAggregations::test_elspeth_settings_with_aggregations PASSED [ 40%]
tests/core/test_config_aggregation.py::TestElspethSettingsAggregations::test_elspeth_settings_rejects_duplicate_aggregation_names PASSED [ 40%]
tests/core/test_dag.py::TestDAGBuilder::test_empty_dag PASSED            [ 40%]
tests/core/test_dag.py::TestDAGBuilder::test_add_node PASSED             [ 40%]
tests/core/test_dag.py::TestDAGBuilder::test_add_edge PASSED             [ 40%]
tests/core/test_dag.py::TestDAGBuilder::test_linear_pipeline PASSED      [ 40%]
tests/core/test_dag.py::TestDAGValidation::test_is_valid_for_acyclic PASSED [ 40%]
tests/core/test_dag.py::TestDAGValidation::test_is_invalid_for_cycle PASSED [ 40%]
tests/core/test_dag.py::TestDAGValidation::test_validate_raises_on_cycle PASSED [ 40%]
tests/core/test_dag.py::TestDAGValidation::test_topological_order PASSED [ 40%]
tests/core/test_dag.py::TestDAGValidation::test_validate_rejects_duplicate_outgoing_edge_labels PASSED [ 40%]
tests/core/test_dag.py::TestDAGValidation::test_validate_allows_same_label_from_different_nodes PASSED [ 40%]
tests/core/test_dag.py::TestSourceSinkValidation::test_validate_requires_exactly_one_source PASSED [ 40%]
tests/core/test_dag.py::TestSourceSinkValidation::test_validate_requires_at_least_one_sink PASSED [ 40%]
tests/core/test_dag.py::TestSourceSinkValidation::test_validate_multiple_sinks_allowed PASSED [ 40%]
tests/core/test_dag.py::TestSourceSinkValidation::test_get_source_node PASSED [ 40%]
tests/core/test_dag.py::TestSourceSinkValidation::test_get_sink_nodes PASSED [ 40%]
tests/core/test_dag.py::TestExecutionGraphAccessors::test_get_node_info PASSED [ 40%]
tests/core/test_dag.py::TestExecutionGraphAccessors::test_get_node_info_missing PASSED [ 40%]
tests/core/test_dag.py::TestExecutionGraphAccessors::test_get_edges PASSED [ 40%]
tests/core/test_dag.py::TestExecutionGraphAccessors::test_get_edges_empty_graph PASSED [ 40%]
tests/core/test_dag.py::TestExecutionGraphAccessors::test_get_incoming_edges_returns_edges_pointing_to_node PASSED [ 40%]
tests/core/test_dag.py::TestExecutionGraphAccessors::test_get_incoming_edges_returns_empty_for_source_node PASSED [ 41%]
tests/core/test_dag.py::TestExecutionGraphAccessors::test_get_effective_producer_schema_walks_through_gates SKIPPED [ 41%]
tests/core/test_dag.py::TestExecutionGraphAccessors::test_get_effective_producer_schema_crashes_on_gate_without_inputs SKIPPED [ 41%]
tests/core/test_dag.py::TestExecutionGraphAccessors::test_get_effective_producer_schema_handles_chained_gates SKIPPED [ 41%]
tests/core/test_dag.py::TestExecutionGraphAccessors::test_dag_validation_only_checks_structure PASSED [ 41%]
tests/core/test_dag.py::TestExecutionGraphAccessors::test_get_effective_producer_schema_returns_direct_schema_for_transform SKIPPED [ 41%]
tests/core/test_dag.py::TestExecutionGraphAccessors::test_validate_edge_schemas_uses_effective_schema_for_gates SKIPPED [ 41%]
tests/core/test_dag.py::TestExecutionGraphAccessors::test_validate_edge_schemas_validates_all_fork_destinations SKIPPED [ 41%]
tests/core/test_dag.py::TestExecutionGraphFromConfig::test_from_config_minimal PASSED [ 41%]
tests/core/test_dag.py::TestExecutionGraphFromConfig::test_from_config_is_valid PASSED [ 41%]
tests/core/test_dag.py::TestExecutionGraphFromConfig::test_from_config_with_transforms PASSED [ 41%]
tests/core/test_dag.py::TestExecutionGraphFromConfig::test_from_config_with_gate_routes PASSED [ 41%]
tests/core/test_dag.py::TestExecutionGraphFromConfig::test_from_config_validates_route_targets PASSED [ 41%]
tests/core/test_dag.py::TestExecutionGraphFromConfig::test_get_sink_id_map PASSED [ 41%]
tests/core/test_dag.py::TestExecutionGraphFromConfig::test_get_transform_id_map PASSED [ 41%]
tests/core/test_dag.py::TestExecutionGraphFromConfig::test_get_output_sink PASSED [ 41%]
tests/core/test_dag.py::TestExecutionGraphRouteMapping::test_get_route_label_for_sink PASSED [ 41%]
tests/core/test_dag.py::TestExecutionGraphRouteMapping::test_get_route_label_for_continue PASSED [ 41%]
tests/core/test_dag.py::TestExecutionGraphRouteMapping::test_hyphenated_sink_names_work_in_dag PASSED [ 41%]
tests/core/test_dag.py::TestMultiEdgeSupport::test_multiple_edges_same_node_pair PASSED [ 41%]
tests/core/test_dag.py::TestMultiEdgeSupport::test_multi_edge_graph_is_acyclic PASSED [ 41%]
tests/core/test_dag.py::TestEdgeInfoIntegration::test_get_edges_returns_edge_info PASSED [ 41%]
tests/core/test_dag.py::TestEdgeInfoIntegration::test_add_edge_accepts_routing_mode_enum PASSED [ 41%]
tests/core/test_dag.py::TestMultiEdgeScenarios::test_fork_gate_config_parses_into_valid_graph PASSED [ 41%]
tests/core/test_dag.py::TestMultiEdgeScenarios::test_gate_multiple_routes_same_sink PASSED [ 41%]
tests/core/test_dag.py::TestCoalesceNodes::test_from_config_creates_coalesce_node PASSED [ 41%]
tests/core/test_dag.py::TestCoalesceNodes::test_from_config_coalesce_edges_from_fork_branches PASSED [ 41%]
tests/core/test_dag.py::TestCoalesceNodes::test_partial_branch_coverage_branches_not_in_coalesce_route_to_sink PASSED [ 41%]
tests/core/test_dag.py::TestCoalesceNodes::test_get_coalesce_id_map_returns_mapping PASSED [ 41%]
tests/core/test_dag.py::TestCoalesceNodes::test_get_branch_to_coalesce_map_returns_mapping PASSED [ 41%]
tests/core/test_dag.py::TestCoalesceNodes::test_coalesce_node_has_edge_to_output_sink PASSED [ 41%]
tests/core/test_dag.py::TestCoalesceNodes::test_coalesce_node_stores_config PASSED [ 41%]
tests/core/test_dag.py::TestSchemaValidation::test_schema_validation_catches_gate_routing_to_incompatible_sink SKIPPED [ 41%]
tests/core/test_dag.py::TestSchemaValidation::test_coalesce_rejects_incompatible_branch_schemas SKIPPED [ 41%]
tests/core/test_dag.py::TestSchemaValidation::test_aggregation_schema_transition_in_topology PASSED [ 42%]
tests/core/test_dag.py::TestSchemaValidation::test_aggregation_schema_transition_incompatible_output SKIPPED [ 42%]
tests/core/test_dag.py::TestSchemaValidation::test_schema_validation_error_includes_diagnostic_details SKIPPED [ 42%]
tests/core/test_dag.py::test_from_plugin_instances_extracts_schemas PASSED [ 42%]
tests/core/test_dag.py::test_validate_aggregation_dual_schema SKIPPED    [ 42%]
tests/core/test_dag.py::test_validate_aggregation_detects_incompatibility SKIPPED [ 42%]
tests/core/test_dag.py::TestDynamicSchemaDetection::test_dynamic_source_to_specific_sink_should_skip_validation PASSED [ 42%]
tests/core/test_dag.py::TestDynamicSchemaDetection::test_specific_source_to_dynamic_sink_should_skip_validation PASSED [ 42%]
tests/core/test_dag.py::TestDynamicSchemaDetection::test_is_dynamic_schema_helper_detects_dynamic_schemas SKIPPED [ 42%]
tests/core/test_dag.py::TestDeterministicNodeIDs::test_node_ids_are_deterministic_for_same_config PASSED [ 42%]
tests/core/test_dag.py::TestDeterministicNodeIDs::test_node_ids_change_when_config_changes PASSED [ 42%]
tests/core/test_edge_validation.py::test_edge_validation_detects_missing_fields PASSED [ 42%]
tests/core/test_edge_validation.py::test_edge_validation_allows_dynamic_schemas PASSED [ 42%]
tests/core/test_edge_validation.py::test_gate_passthrough_validation PASSED [ 42%]
tests/core/test_edge_validation.py::test_coalesce_branch_compatibility PASSED [ 42%]
tests/core/test_edge_validation.py::test_gate_walk_through_for_effective_schema PASSED [ 42%]
tests/core/test_edge_validation.py::test_chained_gates PASSED            [ 42%]
tests/core/test_edge_validation.py::test_none_schema_handling PASSED     [ 42%]
tests/core/test_edge_validation.py::test_edge_validation_timing_from_plugin_instances PASSED [ 42%]
tests/core/test_edge_validation.py::test_aggregation_dual_schema_both_edges_validated PASSED [ 42%]
tests/core/test_edge_validation.py::test_orphaned_config_gate_crashes_with_diagnostic PASSED [ 42%]
tests/core/test_edge_validation.py::test_schema_mismatch_error_includes_field_name_and_nodes PASSED [ 42%]
tests/core/test_events.py::TestEventBus::test_subscribe_and_emit PASSED  [ 42%]
tests/core/test_events.py::TestEventBus::test_multiple_subscribers PASSED [ 42%]
tests/core/test_events.py::TestEventBus::test_handler_ordering PASSED    [ 42%]
tests/core/test_events.py::TestEventBus::test_different_event_types_isolated PASSED [ 42%]
tests/core/test_events.py::TestEventBus::test_no_subscribers_silent PASSED [ 42%]
tests/core/test_events.py::TestEventBus::test_handler_exception_propagates PASSED [ 42%]
tests/core/test_events.py::TestEventBus::test_handler_exception_stops_subsequent_handlers PASSED [ 42%]
tests/core/test_events.py::TestNullEventBus::test_subscribe_is_noop PASSED [ 42%]
tests/core/test_events.py::TestNullEventBus::test_emit_is_noop PASSED    [ 42%]
tests/core/test_events.py::TestEventBusProtocol::test_eventbus_satisfies_protocol PASSED [ 42%]
tests/core/test_events.py::TestEventBusProtocol::test_nulleventbus_satisfies_protocol PASSED [ 42%]
tests/core/test_events.py::TestEventBusEdgeCases::test_subscribe_same_handler_multiple_times PASSED [ 43%]
tests/core/test_events.py::TestEventBusEdgeCases::test_handler_can_emit_events PASSED [ 43%]
tests/core/test_logging.py::TestLoggingConfig::test_get_logger_exists PASSED [ 43%]
tests/core/test_logging.py::TestLoggingConfig::test_get_logger_returns_logger PASSED [ 43%]
tests/core/test_logging.py::TestLoggingConfig::test_configure_logging_exists PASSED [ 43%]
tests/core/test_logging.py::TestLoggingConfig::test_logger_outputs_structured PASSED [ 43%]
tests/core/test_logging.py::TestLoggingConfig::test_logger_console_output PASSED [ 43%]
tests/core/test_logging.py::TestLoggingConfig::test_logger_binds_context PASSED [ 43%]
tests/core/test_payload_store.py::TestPayloadStoreProtocol::test_protocol_has_required_methods PASSED [ 43%]
tests/core/test_payload_store.py::TestFilesystemPayloadStore::test_store_returns_content_hash PASSED [ 43%]
tests/core/test_payload_store.py::TestFilesystemPayloadStore::test_retrieve_by_hash PASSED [ 43%]
tests/core/test_payload_store.py::TestFilesystemPayloadStore::test_exists_returns_true_for_stored PASSED [ 43%]
tests/core/test_payload_store.py::TestFilesystemPayloadStore::test_retrieve_nonexistent_raises PASSED [ 43%]
tests/core/test_payload_store.py::TestFilesystemPayloadStore::test_store_is_idempotent PASSED [ 43%]
tests/core/test_payload_store.py::TestFilesystemPayloadStore::test_creates_directory_structure PASSED [ 43%]
tests/core/test_payload_store.py::TestFilesystemPayloadStore::test_delete_removes_content PASSED [ 43%]
tests/core/test_payload_store.py::TestFilesystemPayloadStore::test_delete_nonexistent_returns_false PASSED [ 43%]
tests/core/test_payload_store.py::TestFilesystemPayloadStore::test_retrieve_corrupted_file_raises_integrity_error PASSED [ 43%]
tests/core/test_payload_store.py::TestFilesystemPayloadStore::test_retrieve_truncated_file_raises_integrity_error PASSED [ 43%]
tests/core/test_payload_store.py::TestFilesystemPayloadStore::test_integrity_error_includes_actual_hash PASSED [ 43%]
tests/core/test_token_outcomes.py::TestTokenOutcomeDataclass::test_token_outcome_has_required_fields PASSED [ 43%]
tests/core/test_token_outcomes.py::TestTokenOutcomeDataclass::test_token_outcome_instantiation PASSED [ 43%]
tests/core/test_token_outcomes.py::TestTokenOutcomeDataclass::test_token_outcome_is_frozen PASSED [ 43%]
tests/core/test_token_outcomes.py::TestTokenOutcomeDataclass::test_token_outcome_optional_fields PASSED [ 43%]
tests/core/test_token_outcomes.py::TestTokenOutcomeDataclass::test_token_outcome_with_sink_context PASSED [ 43%]
tests/core/test_token_outcomes.py::TestTokenOutcomeDataclass::test_token_outcome_with_batch_context PASSED [ 43%]
tests/core/test_token_outcomes.py::TestTokenOutcomeDataclass::test_token_outcome_uses_row_outcome_enum PASSED [ 43%]
tests/core/test_token_outcomes.py::TestTokenOutcomesTableSchema::test_table_exists_in_metadata PASSED [ 43%]
tests/core/test_token_outcomes.py::TestTokenOutcomesTableSchema::test_table_has_required_columns PASSED [ 43%]
tests/core/test_token_outcomes.py::TestTokenOutcomesTableSchema::test_outcome_id_is_primary_key PASSED [ 43%]
tests/core/test_token_outcomes.py::TestTokenOutcomesTableSchema::test_run_id_has_foreign_key PASSED [ 43%]
tests/core/test_token_outcomes.py::TestTokenOutcomesTableSchema::test_token_id_has_foreign_key PASSED [ 43%]
tests/core/test_token_outcomes.py::TestRecordTokenOutcome::test_record_completed_outcome PASSED [ 43%]
tests/core/test_token_outcomes.py::TestRecordTokenOutcome::test_record_routed_outcome PASSED [ 43%]
tests/core/test_token_outcomes.py::TestRecordTokenOutcome::test_record_buffered_then_terminal PASSED [ 44%]
tests/core/test_token_outcomes.py::TestRecordTokenOutcome::test_duplicate_terminal_raises PASSED [ 44%]
tests/core/test_token_outcomes.py::TestGetTokenOutcome::test_get_token_outcome_returns_dataclass PASSED [ 44%]
tests/core/test_token_outcomes.py::TestGetTokenOutcome::test_get_token_outcome_returns_terminal_over_buffered PASSED [ 44%]
tests/core/test_token_outcomes.py::TestGetTokenOutcome::test_get_nonexistent_returns_none PASSED [ 44%]
tests/core/test_token_outcomes.py::TestExplainIncludesOutcome::test_explain_returns_outcome PASSED [ 44%]
tests/core/test_token_outcomes.py::TestExplainIncludesOutcome::test_explain_returns_none_outcome_when_not_recorded PASSED [ 44%]
tests/engine/test_aggregation_audit.py::TestAggregationFlushAuditTrail::test_flush_creates_node_state PASSED [ 44%]
tests/engine/test_aggregation_audit.py::TestAggregationFlushAuditTrail::test_flush_transitions_batch_status PASSED [ 44%]
tests/engine/test_aggregation_audit.py::TestAggregationFlushAuditTrail::test_failed_flush_marks_batch_failed PASSED [ 44%]
tests/engine/test_aggregation_audit.py::TestAggregationFlushAuditTrail::test_error_result_marks_batch_failed PASSED [ 44%]
tests/engine/test_aggregation_audit.py::TestAggregationFlushAuditTrail::test_end_of_source_trigger_recorded PASSED [ 44%]
tests/engine/test_aggregation_audit.py::TestAggregationFlushAuditTrail::test_flush_clears_buffers PASSED [ 44%]
tests/engine/test_aggregation_audit.py::TestAggregationFlushAuditTrail::test_flush_returns_consumed_tokens PASSED [ 44%]
tests/engine/test_aggregation_audit.py::TestAggregationFlushAuditTrail::test_batch_pending_error_closes_node_state_and_links_batch PASSED [ 44%]
tests/engine/test_aggregation_audit.py::TestAggregationFlushAuditTrail::test_pending_to_completed_transition PASSED [ 44%]
tests/engine/test_checkpoint_durability.py::TestCheckpointDurability::test_successful_run_creates_checkpoints_for_all_rows PASSED [ 44%]
tests/engine/test_checkpoint_durability.py::TestCheckpointDurability::test_crash_before_sink_write_recovers_correctly PASSED [ 44%]
tests/engine/test_checkpoint_durability.py::TestCheckpointDurability::test_failed_batch_creates_no_checkpoints PASSED [ 44%]
tests/engine/test_checkpoint_durability.py::TestCheckpointDurability::test_checkpoint_node_id_is_sink_node PASSED [ 44%]
tests/engine/test_checkpoint_durability.py::TestCheckpointDurability::test_no_checkpoint_until_sink_write_completes PASSED [ 44%]
tests/engine/test_checkpoint_durability.py::TestCheckpointTimingInvariants::test_every_n_checkpointing_respects_sink_writes PASSED [ 44%]
tests/engine/test_checkpoint_durability.py::TestCheckpointTimingInvariants::test_checkpointing_disabled_creates_no_checkpoints PASSED [ 44%]
tests/engine/test_checkpoint_durability.py::TestCheckpointTimingInvariants::test_no_checkpoint_manager_skips_checkpointing PASSED [ 44%]
tests/engine/test_coalesce_executor.py::TestCoalesceExecutorInit::test_executor_initializes PASSED [ 44%]
tests/engine/test_coalesce_executor.py::TestCoalesceExecutorRequireAll::test_accept_holds_first_token PASSED [ 44%]
tests/engine/test_coalesce_executor.py::TestCoalesceExecutorRequireAll::test_accept_merges_when_all_arrive PASSED [ 44%]
tests/engine/test_coalesce_executor.py::TestCoalesceExecutorFirst::test_first_merges_immediately PASSED [ 44%]
tests/engine/test_coalesce_executor.py::TestCoalesceExecutorQuorum::test_quorum_merges_at_threshold PASSED [ 44%]
tests/engine/test_coalesce_executor.py::TestCoalesceExecutorQuorum::test_quorum_does_not_merge_on_timeout_if_quorum_not_met PASSED [ 44%]
tests/engine/test_coalesce_executor.py::TestCoalesceExecutorBestEffort::test_best_effort_merges_on_timeout PASSED [ 44%]
tests/engine/test_coalesce_executor.py::TestCoalesceExecutorBestEffort::test_check_timeouts_unregistered_raises PASSED [ 44%]
tests/engine/test_coalesce_executor.py::TestCoalesceAuditMetadata::test_coalesce_records_audit_metadata PASSED [ 44%]
tests/engine/test_coalesce_executor.py::TestCoalesceIntegration::test_fork_process_coalesce_full_flow PASSED [ 45%]
tests/engine/test_coalesce_executor.py::TestFlushPending::test_flush_pending_merges_incomplete_best_effort PASSED [ 45%]
tests/engine/test_coalesce_executor.py::TestFlushPending::test_flush_pending_respects_quorum PASSED [ 45%]
tests/engine/test_coalesce_executor.py::TestFlushPending::test_flush_pending_require_all_returns_failure PASSED [ 45%]
tests/engine/test_coalesce_executor.py::TestFlushPending::test_flush_pending_quorum_met_merges PASSED [ 45%]
tests/engine/test_coalesce_executor.py::TestFlushPending::test_flush_pending_empty_when_no_pending PASSED [ 45%]
tests/engine/test_coalesce_integration.py::TestForkCoalescePipeline::test_fork_coalesce_pipeline_produces_merged_output PASSED [ 45%]
tests/engine/test_coalesce_integration.py::TestForkCoalescePipeline::test_partial_branch_coverage_non_coalesced_branches_reach_sink PASSED [ 45%]
tests/engine/test_coalesce_integration.py::TestForkCoalescePipeline::test_fork_coalesce_with_transform PASSED [ 45%]
tests/engine/test_coalesce_integration.py::TestForkCoalescePipeline::test_multiple_source_rows_fork_coalesce PASSED [ 45%]
tests/engine/test_coalesce_integration.py::TestCoalesceAuditTrail::test_coalesce_records_node_states PASSED [ 45%]
tests/engine/test_config_gates.py::TestConfigGateIntegration::test_config_gate_continue PASSED [ 45%]
tests/engine/test_config_gates.py::TestConfigGateIntegration::test_config_gate_routes_to_sink PASSED [ 45%]
tests/engine/test_config_gates.py::TestConfigGateIntegration::test_config_gate_with_string_result PASSED [ 45%]
tests/engine/test_config_gates.py::TestConfigGateIntegration::test_config_gate_integer_route_label PASSED [ 45%]
tests/engine/test_config_gates.py::TestConfigGateIntegration::test_config_gate_node_registered_in_landscape PASSED [ 45%]
tests/engine/test_config_gates.py::TestConfigGateFromSettings::test_from_config_builds_config_gates PASSED [ 45%]
tests/engine/test_config_gates.py::TestConfigGateFromSettings::test_from_config_validates_gate_sink_targets PASSED [ 45%]
tests/engine/test_config_gates.py::TestConfigGateFromSettings::test_config_gates_ordered_after_transforms PASSED [ 45%]
tests/engine/test_config_gates.py::TestMultipleConfigGates::test_multiple_config_gates_processed_in_order PASSED [ 45%]
tests/engine/test_engine_gates.py::TestCompositeConditions::test_composite_and_condition PASSED [ 45%]
tests/engine/test_engine_gates.py::TestCompositeConditions::test_composite_or_condition PASSED [ 45%]
tests/engine/test_engine_gates.py::TestCompositeConditions::test_membership_condition PASSED [ 45%]
tests/engine/test_engine_gates.py::TestCompositeConditions::test_optional_field_with_get PASSED [ 45%]
tests/engine/test_engine_gates.py::TestRouteLabelResolution::test_route_labels_resolve_to_sinks PASSED [ 45%]
tests/engine/test_engine_gates.py::TestRouteLabelResolution::test_ternary_expression_returns_string_routes PASSED [ 45%]
tests/engine/test_engine_gates.py::TestForkCreatesChildTokens::test_fork_config_accepted PASSED [ 45%]
tests/engine/test_engine_gates.py::TestForkCreatesChildTokens::test_fork_config_requires_fork_to PASSED [ 45%]
tests/engine/test_engine_gates.py::TestForkCreatesChildTokens::test_fork_to_without_fork_route_rejected PASSED [ 45%]
tests/engine/test_engine_gates.py::TestForkCreatesChildTokens::test_fork_gate_in_graph PASSED [ 45%]
tests/engine/test_engine_gates.py::TestForkCreatesChildTokens::test_fork_children_route_to_branch_named_sinks PASSED [ 45%]
tests/engine/test_engine_gates.py::TestForkCreatesChildTokens::test_fork_multiple_source_rows_counts_correctly PASSED [ 45%]
tests/engine/test_engine_gates.py::TestSecurityRejectionAtConfigTime::test_import_rejected_at_config_time PASSED [ 45%]
tests/engine/test_engine_gates.py::TestSecurityRejectionAtConfigTime::test_eval_rejected_at_config_time PASSED [ 45%]
tests/engine/test_engine_gates.py::TestSecurityRejectionAtConfigTime::test_exec_rejected_at_config_time PASSED [ 46%]
tests/engine/test_engine_gates.py::TestSecurityRejectionAtConfigTime::test_lambda_rejected_at_config_time PASSED [ 46%]
tests/engine/test_engine_gates.py::TestSecurityRejectionAtConfigTime::test_list_comprehension_rejected_at_config_time PASSED [ 46%]
tests/engine/test_engine_gates.py::TestSecurityRejectionAtConfigTime::test_attribute_access_rejected_at_config_time PASSED [ 46%]
tests/engine/test_engine_gates.py::TestSecurityRejectionAtConfigTime::test_arbitrary_function_call_rejected_at_config_time PASSED [ 46%]
tests/engine/test_engine_gates.py::TestSecurityRejectionAtConfigTime::test_assignment_expression_rejected_at_config_time PASSED [ 46%]
tests/engine/test_engine_gates.py::TestEndToEndPipeline::test_source_transform_gate_sink_pipeline PASSED [ 46%]
tests/engine/test_engine_gates.py::TestEndToEndPipeline::test_audit_trail_records_gate_evaluation PASSED [ 46%]
tests/engine/test_engine_gates.py::TestEndToEndPipeline::test_gate_audit_trail_includes_evaluation_metadata PASSED [ 46%]
tests/engine/test_engine_gates.py::TestGateRuntimeErrors::test_missing_field_raises_key_error PASSED [ 46%]
tests/engine/test_engine_gates.py::TestGateRuntimeErrors::test_optional_field_with_get_succeeds PASSED [ 46%]
tests/engine/test_engine_gates.py::TestErrorHandling::test_invalid_condition_rejected_at_config_time PASSED [ 46%]
tests/engine/test_engine_gates.py::TestErrorHandling::test_route_to_nonexistent_sink_caught_at_graph_construction PASSED [ 46%]
tests/engine/test_executors.py::TestTransformExecutor::test_execute_transform_success PASSED [ 46%]
tests/engine/test_executors.py::TestTransformExecutor::test_execute_transform_error PASSED [ 46%]
tests/engine/test_executors.py::TestTransformExecutor::test_execute_transform_exception_records_failure PASSED [ 46%]
tests/engine/test_executors.py::TestTransformExecutor::test_execute_transform_updates_token_row_data PASSED [ 46%]
tests/engine/test_executors.py::TestTransformExecutor::test_node_state_records_input_and_output PASSED [ 46%]
tests/engine/test_executors.py::TestTransformExecutor::test_execute_transform_returns_error_sink_on_discard PASSED [ 46%]
tests/engine/test_executors.py::TestTransformExecutor::test_execute_transform_returns_error_sink_name PASSED [ 46%]
tests/engine/test_executors.py::TestTransformExecutor::test_execute_transform_returns_none_error_sink_on_success PASSED [ 46%]
tests/engine/test_executors.py::TestTransformExecutor::test_execute_transform_records_attempt_number PASSED [ 46%]
tests/engine/test_executors.py::TestTransformErrorIdRegression::test_transform_error_uses_node_id_not_name PASSED [ 46%]
tests/engine/test_executors.py::TestGateExecutor::test_execute_gate_continue PASSED [ 46%]
tests/engine/test_executors.py::TestGateExecutor::test_execute_gate_route PASSED [ 46%]
tests/engine/test_executors.py::TestGateExecutor::test_missing_edge_raises_error PASSED [ 46%]
tests/engine/test_executors.py::TestGateExecutor::test_execute_gate_fork PASSED [ 46%]
tests/engine/test_executors.py::TestGateExecutor::test_fork_without_token_manager_raises_error PASSED [ 46%]
tests/engine/test_executors.py::TestGateExecutor::test_execute_gate_exception_records_failure PASSED [ 46%]
tests/engine/test_executors.py::TestConfigGateExecutor::test_execute_config_gate_continue PASSED [ 46%]
tests/engine/test_executors.py::TestConfigGateExecutor::test_execute_config_gate_route_to_sink PASSED [ 46%]
tests/engine/test_executors.py::TestConfigGateExecutor::test_execute_config_gate_string_result PASSED [ 46%]
tests/engine/test_executors.py::TestConfigGateExecutor::test_execute_config_gate_fork PASSED [ 46%]
tests/engine/test_executors.py::TestConfigGateExecutor::test_execute_config_gate_fork_without_token_manager_raises_error PASSED [ 47%]
tests/engine/test_executors.py::TestConfigGateExecutor::test_execute_config_gate_missing_route_label_raises_error PASSED [ 47%]
tests/engine/test_executors.py::TestConfigGateExecutor::test_execute_config_gate_expression_error_records_failure PASSED [ 47%]
tests/engine/test_executors.py::TestConfigGateExecutor::test_execute_config_gate_missing_edge_raises_error PASSED [ 47%]
tests/engine/test_executors.py::TestConfigGateExecutor::test_execute_config_gate_reason_includes_condition PASSED [ 47%]
tests/engine/test_executors.py::TestAggregationExecutorOldInterfaceDeleted::test_old_accept_method_deleted PASSED [ 47%]
tests/engine/test_executors.py::TestAggregationExecutorOldInterfaceDeleted::test_old_flush_method_deleted PASSED [ 47%]
tests/engine/test_executors.py::TestAggregationExecutorTriggersDeleted::test_base_aggregation_deleted PASSED [ 47%]
tests/engine/test_executors.py::TestSinkExecutor::test_write_records_artifact PASSED [ 47%]
tests/engine/test_executors.py::TestSinkExecutor::test_write_empty_tokens_returns_none PASSED [ 47%]
tests/engine/test_executors.py::TestSinkExecutor::test_write_exception_records_failure PASSED [ 47%]
tests/engine/test_executors.py::TestSinkExecutor::test_write_multiple_batches_creates_multiple_artifacts PASSED [ 47%]
tests/engine/test_executors.py::TestSinkExecutor::test_artifact_linked_to_first_state PASSED [ 47%]
tests/engine/test_executors.py::TestAggregationExecutorRestore::test_restore_state_sets_internal_state PASSED [ 47%]
tests/engine/test_executors.py::TestAggregationExecutorRestore::test_restore_state_returns_none_for_unknown_node PASSED [ 47%]
tests/engine/test_executors.py::TestAggregationExecutorRestore::test_restore_batch_sets_current_batch PASSED [ 47%]
tests/engine/test_executors.py::TestAggregationExecutorRestore::test_restore_batch_not_found_raises_error PASSED [ 47%]
tests/engine/test_executors.py::TestAggregationExecutorRestore::test_restore_batch_restores_member_count_deleted PASSED [ 47%]
tests/engine/test_executors.py::TestAggregationExecutorBuffering::test_executor_buffers_rows_internally PASSED [ 47%]
tests/engine/test_executors.py::TestAggregationExecutorBuffering::test_get_buffered_data_does_not_clear_buffer PASSED [ 47%]
tests/engine/test_executors.py::TestAggregationExecutorBuffering::test_buffered_tokens_are_tracked PASSED [ 47%]
tests/engine/test_executors.py::TestAggregationExecutorBuffering::test_buffer_creates_batch_on_first_row PASSED [ 47%]
tests/engine/test_executors.py::TestAggregationExecutorBuffering::test_buffer_updates_trigger_evaluator PASSED [ 47%]
tests/engine/test_executors.py::TestAggregationExecutorBuffering::test_get_buffered_data_returns_both_rows_and_tokens PASSED [ 47%]
tests/engine/test_executors.py::TestAggregationExecutorCheckpoint::test_get_checkpoint_state_stores_full_token_info PASSED [ 47%]
tests/engine/test_executors.py::TestAggregationExecutorCheckpoint::test_get_checkpoint_state_excludes_empty_buffers PASSED [ 47%]
tests/engine/test_executors.py::TestAggregationExecutorCheckpoint::test_restore_from_checkpoint_reconstructs_full_token_info PASSED [ 47%]
tests/engine/test_executors.py::TestAggregationExecutorCheckpoint::test_restore_from_checkpoint_restores_trigger_count PASSED [ 47%]
tests/engine/test_executors.py::TestAggregationExecutorCheckpoint::test_checkpoint_roundtrip PASSED [ 47%]
tests/engine/test_executors.py::TestAggregationExecutorCheckpoint::test_checkpoint_restore_then_flush_succeeds PASSED [ 47%]
tests/engine/test_executors.py::TestAggregationExecutorCheckpoint::test_execute_flush_detects_incomplete_restoration PASSED [ 47%]
tests/engine/test_executors.py::TestAggregationExecutorCheckpoint::test_checkpoint_size_warning_at_1mb_threshold PASSED [ 47%]
tests/engine/test_executors.py::TestAggregationExecutorCheckpoint::test_checkpoint_size_error_at_10mb_limit PASSED [ 47%]
tests/engine/test_executors.py::TestAggregationExecutorCheckpoint::test_checkpoint_size_error_message_includes_solutions PASSED [ 47%]
tests/engine/test_executors.py::TestAggregationExecutorCheckpoint::test_checkpoint_size_no_warning_under_1mb PASSED [ 48%]
tests/engine/test_executors.py::TestAggregationExecutorCheckpoint::test_checkpoint_size_warning_but_no_error_between_thresholds PASSED [ 48%]
tests/engine/test_executors.py::TestAggregationExecutorCheckpoint::test_restore_from_checkpoint_handles_empty_state PASSED [ 48%]
tests/engine/test_executors.py::TestAggregationExecutorCheckpoint::test_restore_from_checkpoint_crashes_on_missing_tokens_key PASSED [ 48%]
tests/engine/test_executors.py::TestAggregationExecutorCheckpoint::test_restore_from_checkpoint_crashes_on_invalid_tokens_type PASSED [ 48%]
tests/engine/test_executors.py::TestAggregationExecutorCheckpoint::test_restore_from_checkpoint_crashes_on_missing_token_fields PASSED [ 48%]
tests/engine/test_expression_parser.py::TestExpressionParserBasicOperations::test_simple_equality PASSED [ 48%]
tests/engine/test_expression_parser.py::TestExpressionParserBasicOperations::test_numeric_comparison PASSED [ 48%]
tests/engine/test_expression_parser.py::TestExpressionParserBasicOperations::test_less_than PASSED [ 48%]
tests/engine/test_expression_parser.py::TestExpressionParserBasicOperations::test_greater_than PASSED [ 48%]
tests/engine/test_expression_parser.py::TestExpressionParserBasicOperations::test_less_than_or_equal PASSED [ 48%]
tests/engine/test_expression_parser.py::TestExpressionParserBasicOperations::test_not_equal PASSED [ 48%]
tests/engine/test_expression_parser.py::TestExpressionParserBooleanOperations::test_and_operator PASSED [ 48%]
tests/engine/test_expression_parser.py::TestExpressionParserBooleanOperations::test_or_operator PASSED [ 48%]
tests/engine/test_expression_parser.py::TestExpressionParserBooleanOperations::test_not_operator PASSED [ 48%]
tests/engine/test_expression_parser.py::TestExpressionParserBooleanOperations::test_complex_boolean_expression PASSED [ 48%]
tests/engine/test_expression_parser.py::TestExpressionParserMembership::test_in_list PASSED [ 48%]
tests/engine/test_expression_parser.py::TestExpressionParserMembership::test_not_in_list PASSED [ 48%]
tests/engine/test_expression_parser.py::TestExpressionParserMembership::test_in_tuple PASSED [ 48%]
tests/engine/test_expression_parser.py::TestExpressionParserMembership::test_in_set PASSED [ 48%]
tests/engine/test_expression_parser.py::TestExpressionParserRowGet::test_row_get_basic PASSED [ 48%]
tests/engine/test_expression_parser.py::TestExpressionParserRowGet::test_row_get_missing_key_returns_none PASSED [ 48%]
tests/engine/test_expression_parser.py::TestExpressionParserRowGet::test_row_get_with_default PASSED [ 48%]
tests/engine/test_expression_parser.py::TestExpressionParserRowGet::test_row_get_with_default_when_key_exists PASSED [ 48%]
tests/engine/test_expression_parser.py::TestExpressionParserNoneChecks::test_is_none PASSED [ 48%]
tests/engine/test_expression_parser.py::TestExpressionParserNoneChecks::test_is_not_none PASSED [ 48%]
tests/engine/test_expression_parser.py::TestExpressionParserArithmetic::test_addition PASSED [ 48%]
tests/engine/test_expression_parser.py::TestExpressionParserArithmetic::test_subtraction PASSED [ 48%]
tests/engine/test_expression_parser.py::TestExpressionParserArithmetic::test_multiplication PASSED [ 48%]
tests/engine/test_expression_parser.py::TestExpressionParserArithmetic::test_division PASSED [ 48%]
tests/engine/test_expression_parser.py::TestExpressionParserArithmetic::test_floor_division PASSED [ 48%]
tests/engine/test_expression_parser.py::TestExpressionParserArithmetic::test_modulo PASSED [ 48%]
tests/engine/test_expression_parser.py::TestExpressionParserArithmetic::test_unary_minus PASSED [ 48%]
tests/engine/test_expression_parser.py::TestExpressionParserTernary::test_ternary_true_branch PASSED [ 49%]
tests/engine/test_expression_parser.py::TestExpressionParserTernary::test_ternary_in_comparison PASSED [ 49%]
tests/engine/test_expression_parser.py::TestExpressionParserComparisonChains::test_chained_comparison PASSED [ 49%]
tests/engine/test_expression_parser.py::TestExpressionParserComparisonChains::test_double_equals_chain PASSED [ 49%]
tests/engine/test_expression_parser.py::TestExpressionParserSecurityRejections::test_reject_import PASSED [ 49%]
tests/engine/test_expression_parser.py::TestExpressionParserSecurityRejections::test_reject_eval PASSED [ 49%]
tests/engine/test_expression_parser.py::TestExpressionParserSecurityRejections::test_reject_exec PASSED [ 49%]
tests/engine/test_expression_parser.py::TestExpressionParserSecurityRejections::test_reject_compile PASSED [ 49%]
tests/engine/test_expression_parser.py::TestExpressionParserSecurityRejections::test_reject_lambda PASSED [ 49%]
tests/engine/test_expression_parser.py::TestExpressionParserSecurityRejections::test_reject_list_comprehension PASSED [ 49%]
tests/engine/test_expression_parser.py::TestExpressionParserSecurityRejections::test_reject_dict_comprehension PASSED [ 49%]
tests/engine/test_expression_parser.py::TestExpressionParserSecurityRejections::test_reject_set_comprehension PASSED [ 49%]
tests/engine/test_expression_parser.py::TestExpressionParserSecurityRejections::test_reject_generator_expression PASSED [ 49%]
tests/engine/test_expression_parser.py::TestExpressionParserSecurityRejections::test_reject_attribute_access_dunder PASSED [ 49%]
tests/engine/test_expression_parser.py::TestExpressionParserSecurityRejections::test_reject_attribute_access_arbitrary PASSED [ 49%]
tests/engine/test_expression_parser.py::TestExpressionParserSecurityRejections::test_reject_assignment_expression PASSED [ 49%]
tests/engine/test_expression_parser.py::TestExpressionParserSecurityRejections::test_reject_fstring PASSED [ 49%]
tests/engine/test_expression_parser.py::TestExpressionParserSecurityRejections::test_reject_arbitrary_function_call PASSED [ 49%]
tests/engine/test_expression_parser.py::TestExpressionParserSecurityRejections::test_reject_method_call_not_get PASSED [ 49%]
tests/engine/test_expression_parser.py::TestExpressionParserSecurityRejections::test_reject_builtin_access PASSED [ 49%]
tests/engine/test_expression_parser.py::TestExpressionParserSecurityRejections::test_reject_arbitrary_name PASSED [ 49%]
tests/engine/test_expression_parser.py::TestExpressionParserSecurityRejections::test_reject_row_get_too_few_args PASSED [ 49%]
tests/engine/test_expression_parser.py::TestExpressionParserSecurityRejections::test_reject_row_get_too_many_args PASSED [ 49%]
tests/engine/test_expression_parser.py::TestExpressionParserSecurityRejections::test_reject_row_get_with_kwargs PASSED [ 49%]
tests/engine/test_expression_parser.py::TestExpressionParserSecurityRejections::test_reject_starred_expression PASSED [ 49%]
tests/engine/test_expression_parser.py::TestExpressionParserSecurityRejections::test_reject_starred_expression_in_tuple PASSED [ 49%]
tests/engine/test_expression_parser.py::TestExpressionParserSecurityRejections::test_reject_dict_spread PASSED [ 49%]
tests/engine/test_expression_parser.py::TestExpressionParserSecurityRejections::test_reject_dict_spread_mixed PASSED [ 49%]
tests/engine/test_expression_parser.py::TestExpressionParserSyntaxErrors::test_invalid_syntax PASSED [ 49%]
tests/engine/test_expression_parser.py::TestExpressionParserSyntaxErrors::test_incomplete_expression PASSED [ 49%]
tests/engine/test_expression_parser.py::TestExpressionParserSyntaxErrors::test_mismatched_parens PASSED [ 49%]
tests/engine/test_expression_parser.py::TestExpressionParserEdgeCases::test_empty_string_comparison PASSED [ 49%]
tests/engine/test_expression_parser.py::TestExpressionParserEdgeCases::test_zero_comparison PASSED [ 49%]
tests/engine/test_expression_parser.py::TestExpressionParserEdgeCases::test_false_boolean_comparison PASSED [ 49%]
tests/engine/test_expression_parser.py::TestExpressionParserEdgeCases::test_nested_subscript PASSED [ 50%]
tests/engine/test_expression_parser.py::TestExpressionParserEdgeCases::test_expression_property PASSED [ 50%]
tests/engine/test_expression_parser.py::TestExpressionParserEdgeCases::test_repr PASSED [ 50%]
tests/engine/test_expression_parser.py::TestExpressionParserEdgeCases::test_dict_literal_in_expression PASSED [ 50%]
tests/engine/test_expression_parser.py::TestExpressionParserEdgeCases::test_negative_number_literal PASSED [ 50%]
tests/engine/test_expression_parser.py::TestExpressionParserEdgeCases::test_float_literal PASSED [ 50%]
tests/engine/test_expression_parser.py::TestExpressionParserEdgeCases::test_multiple_and_conditions PASSED [ 50%]
tests/engine/test_expression_parser.py::TestExpressionParserEdgeCases::test_multiple_or_conditions PASSED [ 50%]
tests/engine/test_expression_parser.py::TestExpressionParserRealWorldExamples::test_confidence_threshold_gate PASSED [ 50%]
tests/engine/test_expression_parser.py::TestExpressionParserRealWorldExamples::test_status_routing_gate PASSED [ 50%]
tests/engine/test_expression_parser.py::TestExpressionParserRealWorldExamples::test_multi_field_validation_gate PASSED [ 50%]
tests/engine/test_expression_parser.py::TestExpressionParserRealWorldExamples::test_amount_range_gate PASSED [ 50%]
tests/engine/test_expression_parser.py::TestExpressionParserRealWorldExamples::test_category_with_score_gate PASSED [ 50%]
tests/engine/test_expression_parser.py::TestExpressionParserFuzz::test_random_characters PASSED [ 50%]
tests/engine/test_expression_parser.py::TestExpressionParserFuzz::test_malicious_patterns PASSED [ 50%]
tests/engine/test_expression_parser.py::TestExpressionParserFuzz::test_expression_like_input PASSED [ 50%]
tests/engine/test_expression_parser.py::TestExpressionParserFuzz::test_deeply_nested_brackets PASSED [ 50%]
tests/engine/test_expression_parser.py::TestExpressionParserFuzz::test_unicode_and_control_characters PASSED [ 50%]
tests/engine/test_expression_parser.py::TestExpressionParserFuzz::test_valid_expression_with_garbage PASSED [ 50%]
tests/engine/test_expression_parser.py::TestExpressionParserFuzz::test_deterministic_fuzz_with_seed PASSED [ 50%]
tests/engine/test_expression_parser.py::TestExpressionParserFuzz::test_null_byte_injection PASSED [ 50%]
tests/engine/test_expression_parser.py::TestExpressionParserFuzz::test_very_long_expressions PASSED [ 50%]
tests/engine/test_expression_parser.py::TestExpressionParserFuzz::test_encoding_edge_cases PASSED [ 50%]
tests/engine/test_expression_parser.py::TestExpressionParserFuzz::test_incomplete_expressions PASSED [ 50%]
tests/engine/test_expression_parser.py::TestExpressionParserFuzz::test_operator_combinations PASSED [ 50%]
tests/engine/test_expression_parser.py::TestExpressionParserFuzz::test_mixed_quotes_and_brackets PASSED [ 50%]
tests/engine/test_expression_parser.py::TestIsBooleanExpression::test_comparison_is_boolean PASSED [ 50%]
tests/engine/test_expression_parser.py::TestIsBooleanExpression::test_boolean_operators_are_boolean PASSED [ 50%]
tests/engine/test_expression_parser.py::TestIsBooleanExpression::test_unary_not_is_boolean PASSED [ 50%]
tests/engine/test_expression_parser.py::TestIsBooleanExpression::test_boolean_literals_are_boolean PASSED [ 50%]
tests/engine/test_expression_parser.py::TestIsBooleanExpression::test_field_access_is_not_boolean PASSED [ 50%]
tests/engine/test_expression_parser.py::TestIsBooleanExpression::test_arithmetic_is_not_boolean PASSED [ 50%]
tests/engine/test_expression_parser.py::TestIsBooleanExpression::test_ternary_with_boolean_branches_is_boolean PASSED [ 50%]
tests/engine/test_expression_parser.py::TestIsBooleanExpression::test_ternary_with_non_boolean_branches_is_not_boolean PASSED [ 50%]
tests/engine/test_expression_parser.py::TestIsBooleanExpression::test_numeric_literal_is_not_boolean PASSED [ 51%]
tests/engine/test_expression_parser.py::TestIsBooleanExpression::test_string_literal_is_not_boolean PASSED [ 51%]
tests/engine/test_integration.py::TestEngineIntegration::test_can_import_all_components PASSED [ 51%]
tests/engine/test_integration.py::TestEngineIntegration::test_full_pipeline_with_audit PASSED [ 51%]
tests/engine/test_integration.py::TestEngineIntegration::test_audit_spine_intact PASSED [ 51%]
tests/engine/test_integration.py::TestEngineIntegration::test_audit_spine_with_routing PASSED [ 51%]
tests/engine/test_integration.py::TestNoSilentAuditLoss::test_missing_edge_raises_not_skips PASSED [ 51%]
tests/engine/test_integration.py::TestNoSilentAuditLoss::test_missing_edge_error_is_not_catchable_silently PASSED [ 51%]
tests/engine/test_integration.py::TestNoSilentAuditLoss::test_transform_exception_propagates PASSED [ 51%]
tests/engine/test_integration.py::TestNoSilentAuditLoss::test_sink_exception_propagates PASSED [ 51%]
tests/engine/test_integration.py::TestAuditTrailCompleteness::test_empty_source_still_records_run PASSED [ 51%]
tests/engine/test_integration.py::TestAuditTrailCompleteness::test_multiple_sinks_all_record_artifacts PASSED [ 51%]
tests/engine/test_integration.py::TestForkIntegration::test_full_pipeline_with_fork_writes_all_children_to_sink PASSED [ 51%]
tests/engine/test_integration.py::TestAggregationIntegrationDeleted::test_base_aggregation_deleted PASSED [ 51%]
tests/engine/test_integration.py::TestAggregationIntegrationDeleted::test_aggregation_protocol_deleted PASSED [ 51%]
tests/engine/test_integration.py::TestForkCoalescePipelineIntegration::test_fork_coalesce_writes_merged_to_sink PASSED [ 51%]
tests/engine/test_integration.py::TestForkCoalescePipelineIntegration::test_multiple_rows_coalesce_correctly PASSED [ 51%]
tests/engine/test_integration.py::TestComplexDAGIntegration::test_diamond_dag_fork_transform_coalesce PASSED [ 51%]
tests/engine/test_integration.py::TestComplexDAGIntegration::test_full_feature_pipeline_deleted PASSED [ 51%]
tests/engine/test_integration.py::TestComplexDAGIntegration::test_run_result_captures_all_metrics PASSED [ 51%]
tests/engine/test_integration.py::TestRetryIntegration::test_transient_failure_retries_and_succeeds PASSED [ 51%]
tests/engine/test_integration.py::TestRetryIntegration::test_permanent_failure_quarantines_after_max_retries PASSED [ 51%]
tests/engine/test_integration.py::TestExplainQuery::test_explain_traces_output_to_source PASSED [ 51%]
tests/engine/test_integration.py::TestExplainQuery::test_explain_for_aggregated_row PASSED [ 51%]
tests/engine/test_integration.py::TestExplainQuery::test_explain_for_coalesced_row PASSED [ 51%]
tests/engine/test_integration.py::TestErrorRecovery::test_partial_success_continues_processing PASSED [ 51%]
tests/engine/test_integration.py::TestErrorRecovery::test_quarantined_rows_have_audit_trail PASSED [ 51%]
tests/engine/test_node_id_assignment.py::TestNodeIdAssignment::test_assign_plugin_node_ids_validates_source PASSED [ 51%]
tests/engine/test_node_id_assignment.py::TestNodeIdAssignment::test_assign_plugin_node_ids_sets_source_id PASSED [ 51%]
tests/engine/test_node_id_assignment.py::TestNodeIdAssignment::test_assign_plugin_node_ids_sets_transform_ids PASSED [ 51%]
tests/engine/test_node_id_assignment.py::TestNodeIdAssignment::test_assign_plugin_node_ids_sets_sink_ids PASSED [ 51%]
tests/engine/test_node_id_assignment.py::TestNodeIdAssignment::test_assign_plugin_node_ids_raises_for_missing_transform PASSED [ 51%]
tests/engine/test_node_id_assignment.py::TestNodeIdAssignment::test_assign_plugin_node_ids_raises_for_missing_sink PASSED [ 51%]
tests/engine/test_node_id_assignment.py::TestNodeIdAssignment::test_assign_plugin_node_ids_all_plugins_together PASSED [ 52%]
tests/engine/test_orchestrator.py::TestOrchestrator::test_run_simple_pipeline PASSED [ 52%]
tests/engine/test_orchestrator.py::TestOrchestrator::test_run_with_gate_routing PASSED [ 52%]
tests/engine/test_orchestrator.py::TestOrchestratorAuditTrail::test_run_records_landscape_entries PASSED [ 52%]
tests/engine/test_orchestrator.py::TestOrchestratorErrorHandling::test_run_marks_failed_on_transform_exception PASSED [ 52%]
tests/engine/test_orchestrator.py::TestOrchestratorMultipleTransforms::test_run_multiple_transforms_in_sequence PASSED [ 52%]
tests/engine/test_orchestrator.py::TestOrchestratorEmptyPipeline::test_run_no_transforms PASSED [ 52%]
tests/engine/test_orchestrator.py::TestOrchestratorEmptyPipeline::test_run_empty_source PASSED [ 52%]
tests/engine/test_orchestrator.py::TestOrchestratorInvalidRouting::test_gate_routing_to_unknown_sink_raises_error PASSED [ 52%]
tests/engine/test_orchestrator.py::TestOrchestratorAcceptsGraph::test_orchestrator_uses_graph_node_ids PASSED [ 52%]
tests/engine/test_orchestrator.py::TestOrchestratorAcceptsGraph::test_orchestrator_run_accepts_graph PASSED [ 52%]
tests/engine/test_orchestrator.py::TestOrchestratorAcceptsGraph::test_orchestrator_run_requires_graph PASSED [ 52%]
tests/engine/test_orchestrator.py::TestOrchestratorOutputSinkRouting::test_completed_rows_go_to_output_sink PASSED [ 52%]
tests/engine/test_orchestrator.py::TestOrchestratorGateRouting::test_gate_routes_to_named_sink PASSED [ 52%]
tests/engine/test_orchestrator.py::TestLifecycleHooks::test_on_start_called_before_processing PASSED [ 52%]
tests/engine/test_orchestrator.py::TestLifecycleHooks::test_on_complete_called_after_all_rows PASSED [ 52%]
tests/engine/test_orchestrator.py::TestLifecycleHooks::test_on_complete_called_on_error PASSED [ 52%]
tests/engine/test_orchestrator.py::TestOrchestratorLandscapeExport::test_orchestrator_exports_landscape_when_configured PASSED [ 52%]
tests/engine/test_orchestrator.py::TestOrchestratorLandscapeExport::test_orchestrator_export_with_signing PASSED [ 52%]
tests/engine/test_orchestrator.py::TestOrchestratorLandscapeExport::test_orchestrator_export_requires_signing_key_when_sign_enabled PASSED [ 52%]
tests/engine/test_orchestrator.py::TestOrchestratorLandscapeExport::test_orchestrator_no_export_when_disabled PASSED [ 52%]
tests/engine/test_orchestrator.py::TestSourceLifecycleHooks::test_source_lifecycle_hooks_called PASSED [ 52%]
tests/engine/test_orchestrator.py::TestSinkLifecycleHooks::test_sink_lifecycle_hooks_called PASSED [ 52%]
tests/engine/test_orchestrator.py::TestSinkLifecycleHooks::test_sink_on_complete_called_even_on_error PASSED [ 52%]
tests/engine/test_orchestrator.py::TestOrchestratorCheckpointing::test_orchestrator_accepts_checkpoint_manager PASSED [ 52%]
tests/engine/test_orchestrator.py::TestOrchestratorCheckpointing::test_orchestrator_accepts_checkpoint_settings PASSED [ 52%]
tests/engine/test_orchestrator.py::TestOrchestratorCheckpointing::test_maybe_checkpoint_creates_on_every_row PASSED [ 52%]
tests/engine/test_orchestrator.py::TestOrchestratorCheckpointing::test_maybe_checkpoint_respects_interval PASSED [ 52%]
tests/engine/test_orchestrator.py::TestOrchestratorCheckpointing::test_checkpoint_deleted_on_successful_completion PASSED [ 52%]
tests/engine/test_orchestrator.py::TestOrchestratorCheckpointing::test_checkpoint_preserved_on_failure PASSED [ 52%]
tests/engine/test_orchestrator.py::TestOrchestratorCheckpointing::test_checkpoint_disabled_skips_checkpoint_creation PASSED [ 52%]
tests/engine/test_orchestrator.py::TestOrchestratorCheckpointing::test_no_checkpoint_manager_skips_checkpointing PASSED [ 52%]
tests/engine/test_orchestrator.py::TestOrchestratorConfigRecording::test_run_records_resolved_config PASSED [ 52%]
tests/engine/test_orchestrator.py::TestOrchestratorConfigRecording::test_run_with_empty_config_records_empty PASSED [ 52%]
tests/engine/test_orchestrator.py::TestNodeMetadataFromPlugin::test_node_metadata_records_plugin_version PASSED [ 53%]
tests/engine/test_orchestrator.py::TestNodeMetadataFromPlugin::test_node_metadata_records_determinism PASSED [ 53%]
tests/engine/test_orchestrator.py::TestRouteValidation::test_valid_routes_pass_validation PASSED [ 53%]
tests/engine/test_orchestrator.py::TestRouteValidation::test_invalid_route_destination_fails_at_init PASSED [ 53%]
tests/engine/test_orchestrator.py::TestRouteValidation::test_error_message_includes_route_label PASSED [ 53%]
tests/engine/test_orchestrator.py::TestRouteValidation::test_continue_routes_are_not_validated_as_sinks PASSED [ 53%]
tests/engine/test_orchestrator.py::TestOrchestratorForkExecution::test_orchestrator_handles_list_results_from_processor PASSED [ 53%]
tests/engine/test_orchestrator.py::TestOrchestratorSourceQuarantineValidation::test_invalid_source_quarantine_destination_fails_at_init PASSED [ 53%]
tests/engine/test_orchestrator.py::TestOrchestratorQuarantineMetrics::test_orchestrator_counts_quarantined_rows PASSED [ 53%]
tests/engine/test_orchestrator.py::TestOrchestratorRetry::test_orchestrator_creates_retry_manager_from_settings PASSED [ 53%]
tests/engine/test_orchestrator.py::TestOrchestratorRetry::test_orchestrator_retry_exhausted_marks_row_failed PASSED [ 53%]
tests/engine/test_orchestrator.py::TestCoalesceWiring::test_orchestrator_creates_coalesce_executor_when_config_present PASSED [ 53%]
tests/engine/test_orchestrator.py::TestCoalesceWiring::test_orchestrator_handles_coalesced_outcome PASSED [ 53%]
tests/engine/test_orchestrator.py::TestCoalesceWiring::test_orchestrator_calls_flush_pending_at_end PASSED [ 53%]
tests/engine/test_orchestrator.py::TestCoalesceWiring::test_orchestrator_flush_pending_routes_merged_tokens_to_sink PASSED [ 53%]
tests/engine/test_orchestrator.py::TestCoalesceWiring::test_orchestrator_flush_pending_handles_failures PASSED [ 53%]
tests/engine/test_orchestrator.py::TestCoalesceWiring::test_orchestrator_computes_coalesce_step_map FAILED [ 53%]
tests/engine/test_orchestrator.py::TestOrchestratorProgress::test_progress_callback_called_every_100_rows PASSED [ 53%]
tests/engine/test_orchestrator.py::TestOrchestratorProgress::test_progress_callback_not_called_when_none PASSED [ 53%]
tests/engine/test_orchestrator.py::TestOrchestratorProgress::test_progress_callback_fires_for_quarantined_rows PASSED [ 53%]
tests/engine/test_orchestrator.py::TestOrchestratorProgress::test_progress_callback_includes_routed_rows_in_success PASSED [ 53%]
tests/engine/test_orchestrator_cleanup.py::TestOrchestratorCleanup::test_transforms_closed_on_success PASSED [ 53%]
tests/engine/test_orchestrator_cleanup.py::TestOrchestratorCleanup::test_transforms_closed_on_failure PASSED [ 53%]
tests/engine/test_orchestrator_cleanup.py::TestOrchestratorCleanup::test_cleanup_handles_missing_close_method PASSED [ 53%]
tests/engine/test_orchestrator_cleanup.py::TestOrchestratorCleanup::test_cleanup_continues_if_one_close_fails PASSED [ 53%]
tests/engine/test_orchestrator_mutation_gaps.py::TestRunResultDefaults::test_rows_routed_defaults_to_zero PASSED [ 53%]
tests/engine/test_orchestrator_mutation_gaps.py::TestRunResultDefaults::test_rows_quarantined_defaults_to_zero PASSED [ 53%]
tests/engine/test_orchestrator_mutation_gaps.py::TestRunResultDefaults::test_rows_forked_defaults_to_zero PASSED [ 53%]
tests/engine/test_orchestrator_mutation_gaps.py::TestRunResultDefaults::test_rows_coalesced_defaults_to_zero PASSED [ 53%]
tests/engine/test_orchestrator_mutation_gaps.py::TestRunResultDefaults::test_rows_expanded_defaults_to_zero PASSED [ 53%]
tests/engine/test_orchestrator_mutation_gaps.py::TestRunResultDefaults::test_rows_buffered_defaults_to_zero PASSED [ 53%]
tests/engine/test_orchestrator_mutation_gaps.py::TestPipelineConfigDefaults::test_gates_defaults_to_empty_list PASSED [ 53%]
tests/engine/test_orchestrator_mutation_gaps.py::TestPipelineConfigDefaults::test_aggregation_settings_defaults_to_empty_dict PASSED [ 53%]
tests/engine/test_orchestrator_mutation_gaps.py::TestPipelineConfigDefaults::test_coalesce_settings_defaults_to_empty_list PASSED [ 54%]
tests/engine/test_orchestrator_mutation_gaps.py::TestRouteValidationEdgeCases::test_continue_destination_is_not_validated_as_sink PASSED [ 54%]
tests/engine/test_orchestrator_mutation_gaps.py::TestRouteValidationEdgeCases::test_fork_destination_is_not_validated_as_sink PASSED [ 54%]
tests/engine/test_orchestrator_mutation_gaps.py::TestRouteValidationEdgeCases::test_invalid_sink_raises_with_helpful_message PASSED [ 54%]
tests/engine/test_orchestrator_mutation_gaps.py::TestTransformErrorSinkValidation::test_transform_with_none_on_error_is_valid PASSED [ 54%]
tests/engine/test_orchestrator_mutation_gaps.py::TestTransformErrorSinkValidation::test_transform_with_discard_on_error_is_valid PASSED [ 54%]
tests/engine/test_orchestrator_mutation_gaps.py::TestTransformErrorSinkValidation::test_transform_with_invalid_on_error_raises PASSED [ 54%]
tests/engine/test_orchestrator_mutation_gaps.py::TestSourceQuarantineValidation::test_source_with_discard_quarantine_is_valid PASSED [ 54%]
tests/engine/test_orchestrator_mutation_gaps.py::TestSourceQuarantineValidation::test_source_with_invalid_quarantine_raises PASSED [ 54%]
tests/engine/test_orchestrator_mutation_gaps.py::TestNodeTypeMetadata::test_config_gate_has_deterministic_flag PASSED [ 54%]
tests/engine/test_orchestrator_mutation_gaps.py::TestNodeTypeMetadata::test_aggregation_defaults_to_deterministic PASSED [ 54%]
tests/engine/test_orchestrator_mutation_gaps.py::TestNodeTypeMetadata::test_coalesce_is_deterministic PASSED [ 54%]
tests/engine/test_orchestrator_mutation_gaps.py::TestCheckpointSequencing::test_sequence_number_increments_on_checkpoint PASSED [ 54%]
tests/engine/test_orchestrator_mutation_gaps.py::TestCheckpointSequencing::test_sequence_number_not_incremented_when_disabled PASSED [ 54%]
tests/engine/test_orchestrator_mutation_gaps.py::TestCheckpointSequencing::test_sequence_number_not_incremented_without_manager PASSED [ 54%]
tests/engine/test_orchestrator_phase_events.py::TestPhaseErrorEmission::test_process_failure_emits_single_phase_error PASSED [ 54%]
tests/engine/test_orchestrator_phase_events.py::TestPhaseErrorEmission::test_source_failure_emits_source_phase_error PASSED [ 54%]
tests/engine/test_orchestrator_recovery.py::TestOrchestratorResume::test_resume_method_exists PASSED [ 54%]
tests/engine/test_orchestrator_recovery.py::TestOrchestratorResume::test_resume_retries_failed_batches PASSED [ 54%]
tests/engine/test_orchestrator_resume.py::TestOrchestratorResumeRowProcessing::test_resume_processes_unprocessed_rows PASSED [ 54%]
tests/engine/test_orchestrator_resume.py::TestOrchestratorResumeRowProcessing::test_resume_writes_to_sink PASSED [ 54%]
tests/engine/test_orchestrator_resume.py::TestOrchestratorResumeRowProcessing::test_resume_requires_payload_store PASSED [ 54%]
tests/engine/test_orchestrator_resume.py::TestOrchestratorResumeRowProcessing::test_resume_returns_run_result_with_status PASSED [ 54%]
tests/engine/test_orchestrator_validation.py::TestTransformErrorSinkValidation::test_invalid_on_error_sink_fails_at_startup PASSED [ 54%]
tests/engine/test_orchestrator_validation.py::TestTransformErrorSinkValidation::test_error_message_includes_transform_name_and_sinks PASSED [ 54%]
tests/engine/test_orchestrator_validation.py::TestTransformErrorSinkValidation::test_on_error_discard_passes_validation PASSED [ 54%]
tests/engine/test_orchestrator_validation.py::TestTransformErrorSinkValidation::test_on_error_none_passes_validation PASSED [ 54%]
tests/engine/test_orchestrator_validation.py::TestTransformErrorSinkValidation::test_valid_on_error_sink_passes_validation PASSED [ 54%]
tests/engine/test_orchestrator_validation.py::TestTransformErrorSinkValidation::test_validation_occurs_before_row_processing PASSED [ 54%]
tests/engine/test_plugin_detection.py::TestPluginTypeDetection::test_transform_is_base_transform PASSED [ 54%]
tests/engine/test_plugin_detection.py::TestPluginTypeDetection::test_unknown_type_is_not_recognized PASSED [ 54%]
tests/engine/test_plugin_detection.py::TestPluginTypeDetection::test_duck_typed_transform_not_recognized PASSED [ 54%]
tests/engine/test_plugin_detection.py::TestPluginTypeDetection::test_duck_typed_gate_not_recognized PASSED [ 54%]
tests/engine/test_plugin_detection.py::TestPluginInheritanceHierarchy::test_transform_not_gate PASSED [ 54%]
tests/engine/test_processor.py::TestRowProcessor::test_process_through_transforms PASSED [ 55%]
tests/engine/test_processor.py::TestRowProcessor::test_process_single_transform PASSED [ 55%]
tests/engine/test_processor.py::TestRowProcessor::test_process_no_transforms PASSED [ 55%]
tests/engine/test_processor.py::TestRowProcessor::test_transform_error_without_on_error_raises PASSED [ 55%]
tests/engine/test_processor.py::TestRowProcessor::test_transform_error_with_discard_returns_quarantined PASSED [ 55%]
tests/engine/test_processor.py::TestRowProcessor::test_transform_error_with_sink_returns_routed PASSED [ 55%]
tests/engine/test_processor.py::TestRowProcessorGates::test_gate_continue_proceeds PASSED [ 55%]
tests/engine/test_processor.py::TestRowProcessorGates::test_gate_route_to_sink PASSED [ 55%]
tests/engine/test_processor.py::TestRowProcessorGates::test_gate_fork_returns_forked PASSED [ 55%]
tests/engine/test_processor.py::TestRowProcessorTokenIdentity::test_token_accessible_on_result PASSED [ 55%]
tests/engine/test_processor.py::TestRowProcessorTokenIdentity::test_step_counting_correct PASSED [ 55%]
tests/engine/test_processor.py::TestRowProcessorUnknownType::test_unknown_type_raises_type_error PASSED [ 55%]
tests/engine/test_processor.py::TestRowProcessorNestedForks::test_nested_forks_all_children_executed PASSED [ 55%]
tests/engine/test_processor.py::TestRowProcessorWorkQueue::test_work_queue_iteration_guard_prevents_infinite_loop PASSED [ 55%]
tests/engine/test_processor.py::TestRowProcessorWorkQueue::test_fork_children_are_executed_through_work_queue PASSED [ 55%]
tests/engine/test_processor.py::TestQuarantineIntegration::test_pipeline_continues_after_quarantine PASSED [ 55%]
tests/engine/test_processor.py::TestQuarantineIntegration::test_quarantine_records_audit_trail PASSED [ 55%]
tests/engine/test_processor.py::TestRowProcessorCoalesce::test_processor_accepts_coalesce_executor PASSED [ 55%]
tests/engine/test_processor.py::TestRowProcessorCoalesce::test_fork_then_coalesce_require_all PASSED [ 55%]
tests/engine/test_processor.py::TestRowProcessorCoalesce::test_coalesced_token_audit_trail_complete PASSED [ 55%]
tests/engine/test_processor.py::TestRowProcessorCoalesce::test_coalesce_best_effort_with_quarantined_child PASSED [ 55%]
tests/engine/test_processor.py::TestRowProcessorCoalesce::test_coalesce_quorum_merges_at_threshold PASSED [ 55%]
tests/engine/test_processor.py::TestRowProcessorCoalesce::test_nested_fork_coalesce PASSED [ 55%]
tests/engine/test_processor.py::TestRowProcessorRetry::test_processor_accepts_retry_manager PASSED [ 55%]
tests/engine/test_processor.py::TestRowProcessorRetry::test_retries_transient_transform_exception PASSED [ 55%]
tests/engine/test_processor.py::TestRowProcessorRetry::test_no_retry_when_retry_manager_is_none PASSED [ 55%]
tests/engine/test_processor.py::TestRowProcessorRetry::test_max_retries_exceeded_returns_failed_outcome PASSED [ 55%]
tests/engine/test_processor.py::TestRowProcessorRecovery::test_processor_accepts_restored_aggregation_state PASSED [ 55%]
tests/engine/test_processor.py::TestProcessorBatchTransforms::test_processor_buffers_rows_for_aggregation_node PASSED [ 55%]
tests/engine/test_processor.py::TestProcessorBatchTransforms::test_processor_batch_transform_without_aggregation_config PASSED [ 55%]
tests/engine/test_processor.py::TestProcessorBatchTransforms::test_processor_buffers_restored_on_recovery PASSED [ 55%]
tests/engine/test_processor.py::TestProcessorDeaggregation::test_processor_handles_expanding_transform PASSED [ 55%]
tests/engine/test_processor.py::TestProcessorDeaggregation::test_processor_rejects_multi_row_without_creates_tokens PASSED [ 55%]
tests/engine/test_processor.py::TestProcessorPassthroughMode::test_aggregation_passthrough_mode PASSED [ 56%]
tests/engine/test_processor.py::TestProcessorPassthroughMode::test_aggregation_passthrough_validates_row_count PASSED [ 56%]
tests/engine/test_processor.py::TestProcessorPassthroughMode::test_aggregation_passthrough_continues_to_next_transform PASSED [ 56%]
tests/engine/test_processor.py::TestProcessorTransformMode::test_aggregation_transform_mode PASSED [ 56%]
tests/engine/test_processor.py::TestProcessorTransformMode::test_aggregation_transform_mode_single_row_output PASSED [ 56%]
tests/engine/test_processor.py::TestProcessorTransformMode::test_aggregation_transform_mode_continues_to_next_transform PASSED [ 56%]
tests/engine/test_processor.py::TestCoalesceLinkage::test_processor_accepts_coalesce_mapping_params PASSED [ 56%]
tests/engine/test_processor_outcomes.py::TestProcessorRecordsOutcomes::test_completed_outcome_recorded_at_pipeline_end SKIPPED [ 56%]
tests/engine/test_processor_outcomes.py::TestProcessorRecordsOutcomes::test_completed_outcome_without_transforms SKIPPED [ 56%]
tests/engine/test_processor_outcomes.py::TestProcessorRecordsOutcomes::test_outcome_api_works_directly PASSED [ 56%]
tests/engine/test_processor_outcomes.py::TestAllOutcomeTypesRecorded::test_outcome_type_can_be_recorded[completed-kwargs0] PASSED [ 56%]
tests/engine/test_processor_outcomes.py::TestAllOutcomeTypesRecorded::test_outcome_type_can_be_recorded[routed-kwargs1] PASSED [ 56%]
tests/engine/test_processor_outcomes.py::TestAllOutcomeTypesRecorded::test_outcome_type_can_be_recorded[forked-kwargs2] PASSED [ 56%]
tests/engine/test_processor_outcomes.py::TestAllOutcomeTypesRecorded::test_outcome_type_can_be_recorded[failed-kwargs3] PASSED [ 56%]
tests/engine/test_processor_outcomes.py::TestAllOutcomeTypesRecorded::test_outcome_type_can_be_recorded[quarantined-kwargs4] PASSED [ 56%]
tests/engine/test_processor_outcomes.py::TestAllOutcomeTypesRecorded::test_outcome_type_can_be_recorded[coalesced-kwargs5] PASSED [ 56%]
tests/engine/test_processor_outcomes.py::TestAllOutcomeTypesRecorded::test_outcome_type_can_be_recorded[expanded-kwargs6] PASSED [ 56%]
tests/engine/test_processor_outcomes.py::TestAllOutcomeTypesRecorded::test_batch_outcome_type_can_be_recorded[consumed_in_batch] PASSED [ 56%]
tests/engine/test_processor_outcomes.py::TestAllOutcomeTypesRecorded::test_batch_outcome_type_can_be_recorded[buffered] PASSED [ 56%]
tests/engine/test_processor_outcomes.py::TestTerminalUniquenessConstraint::test_only_one_terminal_outcome_per_token PASSED [ 56%]
tests/engine/test_processor_outcomes.py::TestTerminalUniquenessConstraint::test_multiple_buffered_outcomes_allowed PASSED [ 56%]
tests/engine/test_processor_outcomes.py::TestExplainShowsRecordedOutcome::test_explain_shows_recorded_outcome PASSED [ 56%]
tests/engine/test_processor_outcomes.py::TestExplainShowsRecordedOutcome::test_explain_shows_outcome_context_fields PASSED [ 56%]
tests/engine/test_processor_outcomes.py::TestExplainShowsRecordedOutcome::test_explain_returns_none_outcome_when_not_recorded PASSED [ 56%]
tests/engine/test_retry.py::TestRetryManager::test_retry_on_retryable_error PASSED [ 56%]
tests/engine/test_retry.py::TestRetryManager::test_no_retry_on_non_retryable PASSED [ 56%]
tests/engine/test_retry.py::TestRetryManager::test_max_attempts_exceeded PASSED [ 56%]
tests/engine/test_retry.py::TestRetryManager::test_records_attempts PASSED [ 56%]
tests/engine/test_retry.py::TestRetryManager::test_from_policy_none_returns_no_retry PASSED [ 56%]
tests/engine/test_retry.py::TestRetryManager::test_from_policy_handles_malformed PASSED [ 56%]
tests/engine/test_retry.py::TestRetryConfig::test_from_settings_creates_config PASSED [ 56%]
tests/engine/test_retry.py::TestRetryConfig::test_default_values PASSED  [ 56%]
tests/engine/test_retry.py::TestRetryConfig::test_invalid_max_attempts_raises PASSED [ 56%]
tests/engine/test_retry.py::TestRetryConfig::test_no_retry_factory PASSED [ 56%]
tests/engine/test_retry.py::TestRetryConfig::test_from_policy_with_valid_values PASSED [ 57%]
tests/engine/test_retry.py::TestMaxRetriesExceeded::test_preserves_attempt_count PASSED [ 57%]
tests/engine/test_retry.py::TestMaxRetriesExceeded::test_message_format PASSED [ 57%]
tests/engine/test_retry_policy.py::TestRetryPolicy::test_retry_policy_importable PASSED [ 57%]
tests/engine/test_retry_policy.py::TestRetryPolicy::test_retry_config_from_policy_with_typed_dict PASSED [ 57%]
tests/engine/test_retry_policy.py::TestRetryPolicy::test_retry_policy_partial PASSED [ 57%]
tests/engine/test_routing_enums.py::TestRoutingKindUsage::test_routing_kind_continue PASSED [ 57%]
tests/engine/test_routing_enums.py::TestRoutingKindUsage::test_routing_kind_route PASSED [ 57%]
tests/engine/test_routing_enums.py::TestRoutingKindUsage::test_routing_kind_fork PASSED [ 57%]
tests/engine/test_routing_enums.py::TestRoutingKindUsage::test_routing_action_uses_enum PASSED [ 57%]
tests/engine/test_row_outcome.py::TestRowResultOutcome::test_outcome_is_enum PASSED [ 57%]
tests/engine/test_row_outcome.py::TestRowResultOutcome::test_all_outcomes_accepted PASSED [ 57%]
tests/engine/test_row_outcome.py::TestRowResultOutcome::test_outcome_equals_string_for_database_storage PASSED [ 57%]
tests/engine/test_row_outcome.py::TestRowResultOutcome::test_consumed_in_batch_outcome PASSED [ 57%]
tests/engine/test_run_status.py::TestRunStatus::test_status_values PASSED [ 57%]
tests/engine/test_run_status.py::TestRunStatus::test_run_result_uses_enum PASSED [ 57%]
tests/engine/test_spans.py::TestSpanFactory::test_create_run_span PASSED [ 57%]
tests/engine/test_spans.py::TestSpanFactory::test_create_row_span PASSED [ 57%]
tests/engine/test_spans.py::TestSpanFactory::test_create_transform_span PASSED [ 57%]
tests/engine/test_spans.py::TestSpanFactory::test_with_tracer PASSED     [ 57%]
tests/engine/test_spans.py::TestSpanFactory::test_noop_span_interface PASSED [ 57%]
tests/engine/test_spans.py::TestSpanFactoryEnabled::test_enabled_false_without_tracer PASSED [ 57%]
tests/engine/test_spans.py::TestSpanFactoryEnabled::test_enabled_true_with_tracer PASSED [ 57%]
tests/engine/test_spans.py::TestSourceSpan::test_source_span_noop PASSED [ 57%]
tests/engine/test_spans.py::TestSourceSpan::test_source_span_with_tracer PASSED [ 57%]
tests/engine/test_spans.py::TestGateSpan::test_gate_span_noop PASSED     [ 57%]
tests/engine/test_spans.py::TestGateSpan::test_gate_span_with_tracer PASSED [ 57%]
tests/engine/test_spans.py::TestAggregationSpan::test_aggregation_span_noop PASSED [ 57%]
tests/engine/test_spans.py::TestAggregationSpan::test_aggregation_span_with_tracer PASSED [ 57%]
tests/engine/test_spans.py::TestSinkSpan::test_sink_span_noop PASSED     [ 57%]
tests/engine/test_spans.py::TestSinkSpan::test_sink_span_with_tracer PASSED [ 57%]
tests/engine/test_spans.py::TestNestedSpans::test_nested_spans_noop PASSED [ 57%]
tests/engine/test_spans.py::TestNestedSpans::test_nested_spans_with_tracer PASSED [ 57%]
tests/engine/test_tokens.py::TestTokenManager::test_create_initial_token PASSED [ 58%]
tests/engine/test_tokens.py::TestTokenManager::test_fork_token PASSED    [ 58%]
tests/engine/test_tokens.py::TestTokenManager::test_update_row_data PASSED [ 58%]
tests/engine/test_tokens.py::TestTokenManagerCoalesce::test_coalesce_tokens PASSED [ 58%]
tests/engine/test_tokens.py::TestTokenManagerForkIsolation::test_fork_nested_data_isolation PASSED [ 58%]
tests/engine/test_tokens.py::TestTokenManagerForkIsolation::test_fork_with_custom_nested_data_isolation PASSED [ 58%]
tests/engine/test_tokens.py::TestTokenManagerEdgeCases::test_fork_with_custom_row_data PASSED [ 58%]
tests/engine/test_tokens.py::TestTokenManagerEdgeCases::test_update_preserves_branch_name PASSED [ 58%]
tests/engine/test_tokens.py::TestTokenManagerEdgeCases::test_multiple_rows_different_tokens PASSED [ 58%]
tests/engine/test_tokens.py::TestTokenManagerStepInPipeline::test_fork_stores_step_in_pipeline PASSED [ 58%]
tests/engine/test_tokens.py::TestTokenManagerStepInPipeline::test_coalesce_stores_step_in_pipeline PASSED [ 58%]
tests/engine/test_tokens.py::TestTokenManagerExpand::test_expand_token_creates_children PASSED [ 58%]
tests/engine/test_tokens.py::TestTokenManagerExpand::test_expand_token_inherits_branch_name PASSED [ 58%]
tests/engine/test_tokens.py::TestTokenManagerExpand::test_expand_token_stores_step_in_pipeline PASSED [ 58%]
tests/engine/test_transform_error_routing.py::TestTransformErrorRouting::test_success_result_returns_row_unchanged PASSED [ 58%]
tests/engine/test_transform_error_routing.py::TestTransformErrorRouting::test_error_result_with_on_error_routes_to_sink PASSED [ 58%]
tests/engine/test_transform_error_routing.py::TestTransformErrorRouting::test_error_result_with_discard_does_not_route PASSED [ 58%]
tests/engine/test_transform_error_routing.py::TestTransformErrorRouting::test_error_without_on_error_raises_runtime_error PASSED [ 58%]
tests/engine/test_transform_error_routing.py::TestTransformErrorRouting::test_error_event_recorded_for_sink_destination PASSED [ 58%]
tests/engine/test_transform_error_routing.py::TestTransformErrorRouting::test_error_event_recorded_for_discard PASSED [ 58%]
tests/engine/test_transform_error_routing.py::TestTransformErrorRouting::test_exception_in_transform_propagates PASSED [ 58%]
tests/engine/test_transform_error_routing.py::TestTransformErrorRouting::test_error_routing_preserves_original_row PASSED [ 58%]
tests/engine/test_transform_error_routing.py::TestTransformErrorRouting::test_error_metadata_includes_transform_error_details PASSED [ 58%]
tests/engine/test_triggers.py::TestTriggerEvaluator::test_count_trigger_not_reached PASSED [ 58%]
tests/engine/test_triggers.py::TestTriggerEvaluator::test_count_trigger_reached PASSED [ 58%]
tests/engine/test_triggers.py::TestTriggerEvaluator::test_count_trigger_exceeded PASSED [ 58%]
tests/engine/test_triggers.py::TestTriggerEvaluator::test_timeout_trigger_not_reached PASSED [ 58%]
tests/engine/test_triggers.py::TestTriggerEvaluator::test_timeout_trigger_reached PASSED [ 58%]
tests/engine/test_triggers.py::TestTriggerEvaluator::test_condition_trigger_not_met PASSED [ 58%]
tests/engine/test_triggers.py::TestTriggerEvaluator::test_condition_trigger_met PASSED [ 58%]
tests/engine/test_triggers.py::TestTriggerEvaluator::test_condition_trigger_with_age PASSED [ 58%]
tests/engine/test_triggers.py::TestTriggerEvaluator::test_combined_count_and_timeout_count_wins PASSED [ 58%]
tests/engine/test_triggers.py::TestTriggerEvaluator::test_combined_count_and_timeout_timeout_wins PASSED [ 58%]
tests/engine/test_triggers.py::TestTriggerEvaluator::test_combined_all_triggers_count_wins PASSED [ 58%]
tests/engine/test_triggers.py::TestTriggerEvaluator::test_combined_none_fire_yet PASSED [ 59%]
tests/engine/test_triggers.py::TestTriggerEvaluator::test_reset_clears_state PASSED [ 59%]
tests/engine/test_triggers.py::TestTriggerEvaluator::test_batch_count_property PASSED [ 59%]
tests/engine/test_triggers.py::TestTriggerEvaluator::test_batch_age_seconds_property PASSED [ 59%]
tests/examples/test_llm_examples.py::TestOpenRouterSentimentBasic::test_produces_correct_output PASSED [ 59%]
tests/examples/test_llm_examples.py::TestOpenRouterSentimentPooled::test_produces_correct_output PASSED [ 59%]
tests/examples/test_llm_examples.py::TestOpenRouterSentimentBatched::test_produces_correct_output PASSED [ 59%]
tests/examples/test_llm_examples.py::TestTemplateLookups::test_produces_correct_output PASSED [ 59%]
tests/examples/test_llm_examples.py::TestTemplateLookupsBatched::test_produces_correct_output PASSED [ 59%]
tests/integration/test_aggregation_recovery.py::TestAggregationRecoveryIntegration::test_full_recovery_cycle PASSED [ 59%]
tests/integration/test_aggregation_recovery.py::TestAggregationRecoveryIntegration::test_recovery_with_multiple_aggregations PASSED [ 59%]
tests/integration/test_aggregation_recovery.py::TestAggregationRecoveryIntegration::test_recovery_preserves_batch_member_order PASSED [ 59%]
tests/integration/test_aggregation_recovery.py::TestAggregationRecoveryIntegration::test_recovery_cannot_retry_non_failed_batch PASSED [ 59%]
tests/integration/test_audit_integration_fixes.py::TestIntegrationAuditFixes::test_full_plugin_discovery_flow PASSED [ 59%]
tests/integration/test_audit_integration_fixes.py::TestIntegrationAuditFixes::test_dag_uses_typed_edges PASSED [ 59%]
tests/integration/test_audit_integration_fixes.py::TestIntegrationAuditFixes::test_error_payloads_are_structured PASSED [ 59%]
tests/integration/test_audit_integration_fixes.py::TestIntegrationAuditFixes::test_plugin_context_accepts_real_recorder PASSED [ 59%]
tests/integration/test_audit_integration_fixes.py::TestIntegrationAuditFixes::test_edge_info_immutability PASSED [ 59%]
tests/integration/test_audit_integration_fixes.py::TestIntegrationAuditFixes::test_routing_mode_is_enum_throughout_dag PASSED [ 59%]
tests/integration/test_audit_integration_fixes.py::TestIntegrationAuditFixes::test_plugin_node_id_on_all_plugin_types PASSED [ 59%]
tests/integration/test_audit_integration_fixes.py::TestIntegrationAuditFixes::test_landscape_recorder_integration PASSED [ 59%]
tests/integration/test_checkpoint_recovery.py::TestCheckpointRecoveryIntegration::test_full_checkpoint_recovery_cycle PASSED [ 59%]
tests/integration/test_checkpoint_recovery.py::TestCheckpointRecoveryIntegration::test_checkpoint_sequence_ordering PASSED [ 59%]
tests/integration/test_checkpoint_recovery.py::TestCheckpointRecoveryIntegration::test_recovery_with_aggregation_state PASSED [ 59%]
tests/integration/test_checkpoint_recovery.py::TestCheckpointRecoveryIntegration::test_checkpoint_cleanup_after_completion PASSED [ 59%]
tests/integration/test_checkpoint_recovery.py::TestCheckpointRecoveryIntegration::test_recovery_respects_checkpoint_boundary PASSED [ 59%]
tests/integration/test_checkpoint_recovery.py::TestCheckpointRecoveryIntegration::test_multiple_runs_independent_checkpoints PASSED [ 59%]
tests/integration/test_checkpoint_recovery.py::TestCheckpointRecoveryIntegration::test_full_resume_processes_remaining_rows PASSED [ 59%]
tests/integration/test_cli_integration.py::TestCLIIntegration::test_full_workflow_csv_to_json PASSED [ 59%]
tests/integration/test_cli_integration.py::TestCLIIntegration::test_plugins_list_shows_all_types PASSED [ 59%]
tests/integration/test_cli_integration.py::TestCLIIntegration::test_dry_run_does_not_create_output PASSED [ 59%]
tests/integration/test_cli_integration.py::TestCLIIntegration::test_run_without_flags_exits_with_warning PASSED [ 59%]
tests/integration/test_cli_integration.py::TestSourceQuarantineRouting::test_invalid_rows_routed_to_quarantine_sink PASSED [ 59%]
tests/integration/test_cli_integration.py::TestSourceQuarantineRouting::test_discard_does_not_write_to_sink PASSED [ 60%]
tests/integration/test_cli_resume.py::test_resume_command_uses_new_graph_construction PASSED [ 60%]
tests/integration/test_cli_schema_validation.py::test_cli_run_detects_schema_incompatibility PASSED [ 60%]
tests/integration/test_cli_schema_validation.py::test_cli_validate_detects_schema_incompatibility PASSED [ 60%]
tests/integration/test_deaggregation.py::TestDeaggregationPipeline::test_explodes_orders_into_items PASSED [ 60%]
tests/integration/test_deaggregation.py::TestDeaggregationPipeline::test_preserves_item_order PASSED [ 60%]
tests/integration/test_deaggregation.py::TestDeaggregationAuditTrail::test_records_token_expansion PASSED [ 60%]
tests/integration/test_deaggregation.py::TestDeaggregationAuditTrail::test_records_parent_relationships PASSED [ 60%]
tests/integration/test_deaggregation.py::TestDeaggregationAuditTrail::test_expand_group_id_set PASSED [ 60%]
tests/integration/test_deaggregation.py::TestSourceSchemaValidation::test_invalid_row_quarantined_at_source PASSED [ 60%]
tests/integration/test_error_event_persistence.py::TestValidationErrorPersistence::test_validation_error_persisted_to_database PASSED [ 60%]
tests/integration/test_error_event_persistence.py::TestValidationErrorPersistence::test_validation_error_with_discard_still_recorded PASSED [ 60%]
tests/integration/test_error_event_persistence.py::TestTransformErrorPersistence::test_transform_error_persisted_to_database PASSED [ 60%]
tests/integration/test_error_event_persistence.py::TestTransformErrorPersistence::test_transform_error_with_discard_still_recorded PASSED [ 60%]
tests/integration/test_error_event_persistence.py::TestErrorEventExplainQuery::test_explain_includes_validation_errors PASSED [ 60%]
tests/integration/test_error_event_persistence.py::TestErrorEventExplainQuery::test_explain_includes_transform_errors PASSED [ 60%]
tests/integration/test_error_event_persistence.py::TestErrorEventExplainQuery::test_explain_returns_empty_lists_when_no_errors PASSED [ 60%]
tests/integration/test_error_event_persistence.py::TestErrorEventExplainQuery::test_explain_multiple_errors_for_same_token PASSED [ 60%]
tests/integration/test_keyvault_fingerprint.py::TestKeyVaultIntegration::test_retrieves_secret_from_real_keyvault SKIPPED [ 60%]
tests/integration/test_landscape_export.py::TestLandscapeExport::test_run_with_export_creates_audit_file PASSED [ 60%]
tests/integration/test_landscape_export.py::TestLandscapeExport::test_export_contains_all_record_types PASSED [ 60%]
tests/integration/test_landscape_export.py::TestLandscapeExport::test_export_run_record_has_required_fields PASSED [ 60%]
tests/integration/test_landscape_export.py::TestLandscapeExport::test_export_disabled_does_not_create_file PASSED [ 60%]
tests/integration/test_landscape_export.py::TestSignedExportDeterminism::test_signed_export_produces_identical_final_hash PASSED [ 60%]
tests/integration/test_landscape_export.py::TestSignedExportDeterminism::test_signed_export_all_records_have_signatures PASSED [ 60%]
tests/integration/test_landscape_export.py::TestSignedExportDeterminism::test_different_signing_keys_produce_different_hashes PASSED [ 60%]
tests/integration/test_llm_transforms.py::TestLLMTransformIntegration::test_template_rendering_api_call_response_parsing PASSED [ 60%]
tests/integration/test_llm_transforms.py::TestLLMTransformIntegration::test_audit_trail_records_template_hashes PASSED [ 60%]
tests/integration/test_llm_transforms.py::TestLLMTransformIntegration::test_api_error_recorded_in_audit_trail PASSED [ 60%]
tests/integration/test_llm_transforms.py::TestLLMTransformIntegration::test_rate_limit_error_is_retryable PASSED [ 60%]
tests/integration/test_llm_transforms.py::TestLLMTransformIntegration::test_system_prompt_included_when_configured PASSED [ 60%]
tests/integration/test_llm_transforms.py::TestOpenRouterLLMTransformIntegration::test_http_client_call_and_response_parsing PASSED [ 60%]
tests/integration/test_llm_transforms.py::TestOpenRouterLLMTransformIntegration::test_http_error_returns_transform_error PASSED [ 60%]
tests/integration/test_llm_transforms.py::TestOpenRouterLLMTransformIntegration::test_rate_limit_http_error_is_retryable PASSED [ 60%]
tests/integration/test_llm_transforms.py::TestAzureBatchLLMTransformIntegration::test_batch_submit_and_checkpoint_flow PASSED [ 61%]
tests/integration/test_llm_transforms.py::TestAzureBatchLLMTransformIntegration::test_batch_resume_and_completion_flow PASSED [ 61%]
tests/integration/test_llm_transforms.py::TestAzureBatchLLMTransformIntegration::test_batch_partial_template_failures PASSED [ 61%]
tests/integration/test_llm_transforms.py::TestAzureBatchLLMTransformIntegration::test_batch_api_error_per_row_handled PASSED [ 61%]
tests/integration/test_llm_transforms.py::TestAuditedLLMClientIntegration::test_successful_call_recorded_with_all_fields PASSED [ 61%]
tests/integration/test_llm_transforms.py::TestAuditedLLMClientIntegration::test_multiple_calls_indexed_correctly PASSED [ 61%]
tests/integration/test_llm_transforms.py::TestAuditedLLMClientIntegration::test_error_call_recorded_with_error_details PASSED [ 61%]
tests/integration/test_llm_transforms.py::TestOpenRouterPooledExecution::test_pool_size_1_uses_sequential_processing PASSED [ 61%]
tests/integration/test_llm_transforms.py::TestOpenRouterPooledExecution::test_pool_size_greater_than_1_creates_executor PASSED [ 61%]
tests/integration/test_llm_transforms.py::TestPooledExecutionIntegration::test_batch_with_simulated_capacity_errors PASSED [ 61%]
tests/integration/test_llm_transforms.py::TestPooledExecutionIntegration::test_batch_capacity_retry_timeout PASSED [ 61%]
tests/integration/test_llm_transforms.py::TestPooledExecutionIntegration::test_batch_mixed_results PASSED [ 61%]
tests/integration/test_multi_query_integration.py::TestMultiQueryIntegration::test_full_assessment_matrix PASSED [ 61%]
tests/integration/test_retry_integration.py::TestRetryAuditTrail::test_each_retry_attempt_recorded_as_separate_node_state PASSED [ 61%]
tests/integration/test_retry_integration.py::TestRetryAuditTrail::test_max_retries_exceeded_all_attempts_recorded PASSED [ 61%]
tests/integration/test_retry_integration.py::TestRetryAuditTrail::test_single_attempt_no_retry_records_single_node_state PASSED [ 61%]
tests/integration/test_schema_validation_end_to_end.py::test_compatible_pipeline_passes_validation PASSED [ 61%]
tests/integration/test_schema_validation_end_to_end.py::test_transform_chain_incompatibility_detected PASSED [ 61%]
tests/integration/test_schema_validation_end_to_end.py::test_aggregation_output_incompatibility_detected PASSED [ 61%]
tests/integration/test_schema_validation_end_to_end.py::test_dynamic_schemas_skip_validation PASSED [ 61%]
tests/integration/test_schema_validation_end_to_end.py::test_aggregation_incoming_edge_uses_input_schema PASSED [ 61%]
tests/integration/test_schema_validation_end_to_end.py::test_aggregation_outgoing_edge_uses_output_schema PASSED [ 61%]
tests/integration/test_schema_validation_end_to_end.py::test_two_phase_validation_separates_self_and_compatibility_errors PASSED [ 61%]
tests/integration/test_schema_validation_integration.py::test_schema_validation_end_to_end PASSED [ 61%]
tests/integration/test_schema_validation_integration.py::test_static_schema_validation SKIPPED [ 61%]
tests/integration/test_schema_validation_regression.py::test_schema_validation_actually_works PASSED [ 61%]
tests/integration/test_schema_validation_regression.py::test_compatible_schemas_still_pass PASSED [ 61%]
tests/integration/test_schema_validation_regression.py::test_from_plugin_instances_exists PASSED [ 61%]
tests/integration/test_source_payload_storage.py::test_source_row_payloads_are_stored_during_run PASSED [ 61%]
tests/performance/test_baseline_schema_validation.py::test_plugin_instantiation_performance PASSED [ 61%]
tests/performance/test_baseline_schema_validation.py::test_graph_construction_performance PASSED [ 61%]
tests/performance/test_baseline_schema_validation.py::test_end_to_end_validation_performance FAILED [ 61%]
tests/plugins/azure/test_auth.py::TestAzureAuthConfigValid::test_connection_string_auth PASSED [ 61%]
tests/plugins/azure/test_auth.py::TestAzureAuthConfigValid::test_sas_token_auth PASSED [ 61%]
tests/plugins/azure/test_auth.py::TestAzureAuthConfigValid::test_sas_token_with_question_mark PASSED [ 62%]
tests/plugins/azure/test_auth.py::TestAzureAuthConfigValid::test_managed_identity_auth PASSED [ 62%]
tests/plugins/azure/test_auth.py::TestAzureAuthConfigValid::test_service_principal_auth PASSED [ 62%]
tests/plugins/azure/test_auth.py::TestAzureAuthConfigInvalid::test_no_auth_method_raises PASSED [ 62%]
tests/plugins/azure/test_auth.py::TestAzureAuthConfigInvalid::test_empty_connection_string_raises PASSED [ 62%]
tests/plugins/azure/test_auth.py::TestAzureAuthConfigInvalid::test_whitespace_connection_string_raises PASSED [ 62%]
tests/plugins/azure/test_auth.py::TestAzureAuthConfigInvalid::test_multiple_auth_methods_raises PASSED [ 62%]
tests/plugins/azure/test_auth.py::TestAzureAuthConfigInvalid::test_sas_token_without_account_url_raises PASSED [ 62%]
tests/plugins/azure/test_auth.py::TestAzureAuthConfigInvalid::test_managed_identity_without_account_url_raises PASSED [ 62%]
tests/plugins/azure/test_auth.py::TestAzureAuthConfigInvalid::test_partial_service_principal_missing_tenant_id_raises PASSED [ 62%]
tests/plugins/azure/test_auth.py::TestAzureAuthConfigInvalid::test_partial_service_principal_missing_client_secret_raises PASSED [ 62%]
tests/plugins/azure/test_auth.py::TestAzureAuthConfigInvalid::test_partial_service_principal_missing_account_url_raises PASSED [ 62%]
tests/plugins/azure/test_auth.py::TestAzureAuthConfigInvalid::test_extra_fields_forbidden PASSED [ 62%]
tests/plugins/azure/test_auth.py::TestAzureAuthConfigAuthMethodProperty::test_connection_string_returns_correct_method PASSED [ 62%]
tests/plugins/azure/test_auth.py::TestAzureAuthConfigAuthMethodProperty::test_sas_token_returns_correct_method PASSED [ 62%]
tests/plugins/azure/test_auth.py::TestAzureAuthConfigAuthMethodProperty::test_managed_identity_returns_correct_method PASSED [ 62%]
tests/plugins/azure/test_auth.py::TestAzureAuthConfigAuthMethodProperty::test_service_principal_returns_correct_method PASSED [ 62%]
tests/plugins/azure/test_auth.py::TestAzureAuthConfigCreateClient::test_connection_string_creates_client PASSED [ 62%]
tests/plugins/azure/test_auth.py::TestAzureAuthConfigCreateClient::test_sas_token_creates_client_with_url PASSED [ 62%]
tests/plugins/azure/test_auth.py::TestAzureAuthConfigCreateClient::test_sas_token_with_question_mark_creates_client PASSED [ 62%]
tests/plugins/azure/test_auth.py::TestAzureAuthConfigCreateClient::test_sas_token_strips_trailing_slash_from_url PASSED [ 62%]
tests/plugins/azure/test_auth.py::TestAzureAuthConfigCreateClient::test_managed_identity_creates_client_with_credential PASSED [ 62%]
tests/plugins/azure/test_auth.py::TestAzureAuthConfigCreateClient::test_service_principal_creates_client_with_credential PASSED [ 62%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkProtocol::test_implements_protocol PASSED [ 62%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkProtocol::test_has_required_attributes PASSED [ 62%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkConfigValidation::test_no_auth_method_raises_error PASSED [ 62%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkConfigValidation::test_empty_connection_string_raises_error PASSED [ 62%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkConfigValidation::test_missing_container_raises_error PASSED [ 62%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkConfigValidation::test_empty_container_raises_error PASSED [ 62%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkConfigValidation::test_missing_blob_path_raises_error PASSED [ 62%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkConfigValidation::test_empty_blob_path_raises_error PASSED [ 62%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkConfigValidation::test_missing_schema_raises_error PASSED [ 62%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkConfigValidation::test_unknown_field_raises_error PASSED [ 62%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkWriteCSV::test_write_csv_to_blob PASSED [ 63%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkWriteCSV::test_csv_with_custom_delimiter PASSED [ 63%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkWriteCSV::test_csv_without_header PASSED [ 63%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkWriteJSON::test_write_json_to_blob PASSED [ 63%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkWriteJSONL::test_write_jsonl_to_blob PASSED [ 63%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkPathTemplating::test_blob_path_with_run_id_template PASSED [ 63%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkPathTemplating::test_blob_path_with_timestamp_template PASSED [ 63%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkOverwriteBehavior::test_overwrite_true_succeeds_when_blob_exists PASSED [ 63%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkOverwriteBehavior::test_overwrite_false_raises_if_blob_exists PASSED [ 63%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkOverwriteBehavior::test_overwrite_false_succeeds_if_blob_not_exists PASSED [ 63%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkArtifactDescriptor::test_returns_artifact_descriptor_with_hash PASSED [ 63%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkArtifactDescriptor::test_artifact_descriptor_contains_rendered_path PASSED [ 63%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkEmptyRows::test_empty_rows_returns_empty_descriptor PASSED [ 63%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkErrors::test_upload_error_propagates_with_context PASSED [ 63%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkErrors::test_connection_error_propagates PASSED [ 63%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkLifecycle::test_close_is_idempotent PASSED [ 63%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkLifecycle::test_close_clears_client PASSED [ 63%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkLifecycle::test_flush_is_noop PASSED [ 63%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkImportError::test_import_error_gives_helpful_message PASSED [ 63%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkAuthMethods::test_auth_connection_string PASSED [ 63%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkAuthMethods::test_auth_managed_identity PASSED [ 63%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkAuthMethods::test_auth_service_principal PASSED [ 63%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkAuthMethods::test_auth_mutual_exclusivity_conn_string_and_managed_identity PASSED [ 63%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkAuthMethods::test_auth_mutual_exclusivity_conn_string_and_service_principal PASSED [ 63%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkAuthMethods::test_auth_mutual_exclusivity_managed_identity_and_service_principal PASSED [ 63%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkAuthMethods::test_auth_managed_identity_missing_account_url PASSED [ 63%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkAuthMethods::test_auth_service_principal_missing_tenant_id PASSED [ 63%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkAuthMethods::test_auth_service_principal_missing_client_id PASSED [ 63%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkAuthMethods::test_auth_service_principal_missing_client_secret PASSED [ 63%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkAuthMethods::test_auth_service_principal_missing_account_url PASSED [ 63%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkAuthClientCreation::test_managed_identity_uses_default_credential PASSED [ 63%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkAuthClientCreation::test_service_principal_uses_client_secret_credential PASSED [ 63%]
tests/plugins/azure/test_blob_sink.py::TestAzureBlobSinkAuthClientCreation::test_connection_string_uses_from_connection_string PASSED [ 63%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceProtocol::test_implements_protocol PASSED [ 63%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceProtocol::test_has_required_attributes PASSED [ 64%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceConfigValidation::test_no_auth_method_raises_error PASSED [ 64%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceConfigValidation::test_empty_connection_string_raises_error PASSED [ 64%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceConfigValidation::test_missing_container_raises_error PASSED [ 64%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceConfigValidation::test_empty_container_raises_error PASSED [ 64%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceConfigValidation::test_missing_blob_path_raises_error PASSED [ 64%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceConfigValidation::test_empty_blob_path_raises_error PASSED [ 64%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceConfigValidation::test_missing_schema_raises_error PASSED [ 64%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceConfigValidation::test_missing_on_validation_failure_raises_error PASSED [ 64%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceConfigValidation::test_unknown_field_raises_error PASSED [ 64%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceCSV::test_load_csv_from_blob PASSED [ 64%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceCSV::test_csv_with_custom_delimiter PASSED [ 64%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceCSV::test_csv_without_header PASSED [ 64%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceCSV::test_csv_with_encoding PASSED [ 64%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceJSON::test_load_json_from_blob PASSED [ 64%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceJSON::test_load_json_with_data_key PASSED [ 64%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceJSON::test_json_not_array_raises_error PASSED [ 64%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceJSON::test_json_invalid_raises_error PASSED [ 64%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceJSONL::test_load_jsonl_from_blob PASSED [ 64%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceJSONL::test_jsonl_skips_empty_lines PASSED [ 64%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceJSONL::test_jsonl_malformed_line_quarantined_not_crash PASSED [ 64%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceJSONL::test_jsonl_malformed_line_with_discard_mode PASSED [ 64%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceValidation::test_validation_failure_quarantines_row PASSED [ 64%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceValidation::test_discard_mode_does_not_yield_invalid_rows PASSED [ 64%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceErrors::test_blob_not_found_raises PASSED [ 64%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceErrors::test_connection_error_raises PASSED [ 64%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceErrors::test_encoding_error_raises PASSED [ 64%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceLifecycle::test_close_is_idempotent PASSED [ 64%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceLifecycle::test_close_clears_client PASSED [ 64%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceImportError::test_import_error_gives_helpful_message PASSED [ 64%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceAuthMethods::test_auth_connection_string PASSED [ 64%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceAuthMethods::test_auth_managed_identity PASSED [ 64%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceAuthMethods::test_auth_service_principal PASSED [ 64%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceAuthMethods::test_auth_mutual_exclusivity_conn_string_and_managed_identity PASSED [ 65%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceAuthMethods::test_auth_mutual_exclusivity_conn_string_and_service_principal PASSED [ 65%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceAuthMethods::test_auth_mutual_exclusivity_managed_identity_and_service_principal PASSED [ 65%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceAuthMethods::test_auth_managed_identity_missing_account_url PASSED [ 65%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceAuthMethods::test_auth_service_principal_missing_tenant_id PASSED [ 65%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceAuthMethods::test_auth_service_principal_missing_client_id PASSED [ 65%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceAuthMethods::test_auth_service_principal_missing_client_secret PASSED [ 65%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceAuthMethods::test_auth_service_principal_missing_account_url PASSED [ 65%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceAuthClientCreation::test_managed_identity_uses_default_credential PASSED [ 65%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceAuthClientCreation::test_service_principal_uses_client_secret_credential PASSED [ 65%]
tests/plugins/azure/test_blob_source.py::TestAzureBlobSourceAuthClientCreation::test_connection_string_uses_from_connection_string PASSED [ 65%]
tests/plugins/clients/test_audited_client_base.py::TestCallIndexThreadSafety::test_concurrent_call_index_no_duplicates PASSED [ 65%]
tests/plugins/clients/test_audited_client_base.py::TestCallIndexThreadSafety::test_concurrent_call_index_repeated[0] PASSED [ 65%]
tests/plugins/clients/test_audited_client_base.py::TestCallIndexThreadSafety::test_concurrent_call_index_repeated[1] PASSED [ 65%]
tests/plugins/clients/test_audited_client_base.py::TestCallIndexThreadSafety::test_concurrent_call_index_repeated[2] PASSED [ 65%]
tests/plugins/clients/test_audited_client_base.py::TestCallIndexThreadSafety::test_concurrent_call_index_repeated[3] PASSED [ 65%]
tests/plugins/clients/test_audited_client_base.py::TestCallIndexThreadSafety::test_concurrent_call_index_repeated[4] PASSED [ 65%]
tests/plugins/clients/test_audited_client_base.py::TestCallIndexThreadSafety::test_concurrent_call_index_repeated[5] PASSED [ 65%]
tests/plugins/clients/test_audited_client_base.py::TestCallIndexThreadSafety::test_concurrent_call_index_repeated[6] PASSED [ 65%]
tests/plugins/clients/test_audited_client_base.py::TestCallIndexThreadSafety::test_concurrent_call_index_repeated[7] PASSED [ 65%]
tests/plugins/clients/test_audited_client_base.py::TestCallIndexThreadSafety::test_concurrent_call_index_repeated[8] PASSED [ 65%]
tests/plugins/clients/test_audited_client_base.py::TestCallIndexThreadSafety::test_concurrent_call_index_repeated[9] PASSED [ 65%]
tests/plugins/clients/test_audited_http_client.py::TestAuditedHTTPClient::test_successful_post_records_to_audit_trail PASSED [ 65%]
tests/plugins/clients/test_audited_http_client.py::TestAuditedHTTPClient::test_call_index_increments PASSED [ 65%]
tests/plugins/clients/test_audited_http_client.py::TestAuditedHTTPClient::test_failed_call_records_error PASSED [ 65%]
tests/plugins/clients/test_audited_http_client.py::TestAuditedHTTPClient::test_auth_headers_filtered_from_recorded_request PASSED [ 65%]
tests/plugins/clients/test_audited_http_client.py::TestAuditedHTTPClient::test_base_url_prepended PASSED [ 65%]
tests/plugins/clients/test_audited_http_client.py::TestAuditedHTTPClient::test_response_body_size_recorded PASSED [ 65%]
tests/plugins/clients/test_audited_http_client.py::TestAuditedHTTPClient::test_request_headers_merged PASSED [ 65%]
tests/plugins/clients/test_audited_http_client.py::TestAuditedHTTPClient::test_timeout_passed_to_client PASSED [ 65%]
tests/plugins/clients/test_audited_http_client.py::TestAuditedHTTPClient::test_response_headers_recorded PASSED [ 65%]
tests/plugins/clients/test_audited_http_client.py::TestAuditedHTTPClient::test_no_base_url_uses_full_url PASSED [ 65%]
tests/plugins/clients/test_audited_http_client.py::TestAuditedHTTPClient::test_none_json_body PASSED [ 65%]
tests/plugins/clients/test_audited_http_client.py::TestAuditedHTTPClient::test_sensitive_response_headers_filtered PASSED [ 65%]
tests/plugins/clients/test_audited_http_client.py::TestAuditedHTTPClient::test_per_request_timeout_overrides_default PASSED [ 66%]
tests/plugins/clients/test_audited_http_client.py::TestAuditedHTTPClient::test_none_timeout_uses_default PASSED [ 66%]
tests/plugins/clients/test_audited_http_client.py::TestAuditedHTTPClient::test_non_json_response_body_recorded_as_text PASSED [ 66%]
tests/plugins/clients/test_audited_http_client.py::TestAuditedHTTPClient::test_json_response_body_recorded_as_dict PASSED [ 66%]
tests/plugins/clients/test_audited_http_client.py::TestAuditedHTTPClient::test_4xx_response_recorded_as_error PASSED [ 66%]
tests/plugins/clients/test_audited_http_client.py::TestAuditedHTTPClient::test_5xx_response_recorded_as_error PASSED [ 66%]
tests/plugins/clients/test_audited_http_client.py::TestAuditedHTTPClient::test_2xx_responses_recorded_as_success PASSED [ 66%]
tests/plugins/clients/test_audited_http_client.py::TestAuditedHTTPClient::test_3xx_responses_recorded_as_success PASSED [ 66%]
tests/plugins/clients/test_audited_llm_client.py::TestLLMResponse::test_response_creation PASSED [ 66%]
tests/plugins/clients/test_audited_llm_client.py::TestLLMResponse::test_total_tokens_property PASSED [ 66%]
tests/plugins/clients/test_audited_llm_client.py::TestLLMResponse::test_total_tokens_with_missing_fields PASSED [ 66%]
tests/plugins/clients/test_audited_llm_client.py::TestLLMResponse::test_default_values PASSED [ 66%]
tests/plugins/clients/test_audited_llm_client.py::TestLLMClientErrors::test_llm_client_error_default_not_retryable PASSED [ 66%]
tests/plugins/clients/test_audited_llm_client.py::TestLLMClientErrors::test_llm_client_error_retryable_flag PASSED [ 66%]
tests/plugins/clients/test_audited_llm_client.py::TestLLMClientErrors::test_rate_limit_error_always_retryable PASSED [ 66%]
tests/plugins/clients/test_audited_llm_client.py::TestAuditedLLMClient::test_successful_call_records_to_audit_trail PASSED [ 66%]
tests/plugins/clients/test_audited_llm_client.py::TestAuditedLLMClient::test_call_index_increments PASSED [ 66%]
tests/plugins/clients/test_audited_llm_client.py::TestAuditedLLMClient::test_failed_call_records_error PASSED [ 66%]
tests/plugins/clients/test_audited_llm_client.py::TestAuditedLLMClient::test_rate_limit_error_marked_retryable PASSED [ 66%]
tests/plugins/clients/test_audited_llm_client.py::TestAuditedLLMClient::test_rate_limit_detected_by_keyword PASSED [ 66%]
tests/plugins/clients/test_audited_llm_client.py::TestAuditedLLMClient::test_temperature_and_max_tokens_recorded PASSED [ 66%]
tests/plugins/clients/test_audited_llm_client.py::TestAuditedLLMClient::test_provider_recorded_in_request PASSED [ 66%]
tests/plugins/clients/test_audited_llm_client.py::TestAuditedLLMClient::test_extra_kwargs_passed_to_client PASSED [ 66%]
tests/plugins/clients/test_audited_llm_client.py::TestAuditedLLMClient::test_response_without_model_dump PASSED [ 66%]
tests/plugins/clients/test_audited_llm_client.py::TestAuditedLLMClient::test_empty_content_handled PASSED [ 66%]
tests/plugins/clients/test_replayer.py::TestReplayedCall::test_creation_with_required_fields PASSED [ 66%]
tests/plugins/clients/test_replayer.py::TestReplayedCall::test_creation_with_error_data PASSED [ 66%]
tests/plugins/clients/test_replayer.py::TestReplayMissError::test_error_has_request_hash PASSED [ 66%]
tests/plugins/clients/test_replayer.py::TestReplayMissError::test_error_has_request_data PASSED [ 66%]
tests/plugins/clients/test_replayer.py::TestCallReplayer::test_replay_returns_recorded_response PASSED [ 66%]
tests/plugins/clients/test_replayer.py::TestCallReplayer::test_replay_miss_raises_error PASSED [ 66%]
tests/plugins/clients/test_replayer.py::TestCallReplayer::test_replay_caches_results PASSED [ 66%]
tests/plugins/clients/test_replayer.py::TestCallReplayer::test_replay_handles_error_calls PASSED [ 66%]
tests/plugins/clients/test_replayer.py::TestCallReplayer::test_replayed_call_includes_latency PASSED [ 67%]
tests/plugins/clients/test_replayer.py::TestCallReplayer::test_source_run_id_property PASSED [ 67%]
tests/plugins/clients/test_replayer.py::TestCallReplayer::test_clear_cache PASSED [ 67%]
tests/plugins/clients/test_replayer.py::TestCallReplayer::test_replay_with_none_response_data PASSED [ 67%]
tests/plugins/clients/test_replayer.py::TestCallReplayer::test_replay_http_call_type PASSED [ 67%]
tests/plugins/clients/test_replayer.py::TestCallReplayer::test_different_call_types_same_hash_are_cached_separately PASSED [ 67%]
tests/plugins/clients/test_verifier.py::TestVerificationResult::test_creation_with_match PASSED [ 67%]
tests/plugins/clients/test_verifier.py::TestVerificationResult::test_creation_with_differences PASSED [ 67%]
tests/plugins/clients/test_verifier.py::TestVerificationResult::test_creation_with_missing_recording PASSED [ 67%]
tests/plugins/clients/test_verifier.py::TestVerificationResult::test_has_differences_true_when_mismatch PASSED [ 67%]
tests/plugins/clients/test_verifier.py::TestVerificationResult::test_has_differences_false_when_match PASSED [ 67%]
tests/plugins/clients/test_verifier.py::TestVerificationResult::test_has_differences_false_when_recording_missing PASSED [ 67%]
tests/plugins/clients/test_verifier.py::TestVerificationReport::test_default_values PASSED [ 67%]
tests/plugins/clients/test_verifier.py::TestVerificationReport::test_success_rate_no_calls PASSED [ 67%]
tests/plugins/clients/test_verifier.py::TestVerificationReport::test_success_rate_all_match PASSED [ 67%]
tests/plugins/clients/test_verifier.py::TestVerificationReport::test_success_rate_partial_match PASSED [ 67%]
tests/plugins/clients/test_verifier.py::TestVerificationReport::test_success_rate_no_matches PASSED [ 67%]
tests/plugins/clients/test_verifier.py::TestCallVerifier::test_verify_matching_response PASSED [ 67%]
tests/plugins/clients/test_verifier.py::TestCallVerifier::test_verify_different_response PASSED [ 67%]
tests/plugins/clients/test_verifier.py::TestCallVerifier::test_verify_missing_recording PASSED [ 67%]
tests/plugins/clients/test_verifier.py::TestCallVerifier::test_verify_with_ignore_paths PASSED [ 67%]
tests/plugins/clients/test_verifier.py::TestCallVerifier::test_verification_report_tracks_stats PASSED [ 67%]
tests/plugins/clients/test_verifier.py::TestCallVerifier::test_success_rate_calculation PASSED [ 67%]
tests/plugins/clients/test_verifier.py::TestCallVerifier::test_reset_report PASSED [ 67%]
tests/plugins/clients/test_verifier.py::TestCallVerifier::test_source_run_id_property PASSED [ 67%]
tests/plugins/clients/test_verifier.py::TestCallVerifier::test_verify_http_call_type PASSED [ 67%]
tests/plugins/clients/test_verifier.py::TestCallVerifier::test_verify_with_none_recorded_response PASSED [ 67%]
tests/plugins/clients/test_verifier.py::TestCallVerifier::test_verify_order_independent_comparison PASSED [ 67%]
tests/plugins/clients/test_verifier.py::TestCallVerifier::test_verify_nested_differences PASSED [ 67%]
tests/plugins/clients/test_verifier.py::TestCallVerifier::test_multiple_ignore_paths PASSED [ 67%]
tests/plugins/llm/test_aimd_throttle.py::TestAIMDThrottleInit::test_default_config_values PASSED [ 67%]
tests/plugins/llm/test_aimd_throttle.py::TestAIMDThrottleInit::test_custom_config PASSED [ 67%]
tests/plugins/llm/test_aimd_throttle.py::TestAIMDThrottleBackoff::test_first_capacity_error_sets_initial_delay PASSED [ 67%]
tests/plugins/llm/test_aimd_throttle.py::TestAIMDThrottleBackoff::test_subsequent_errors_multiply_delay PASSED [ 67%]
tests/plugins/llm/test_aimd_throttle.py::TestAIMDThrottleBackoff::test_delay_capped_at_max PASSED [ 68%]
tests/plugins/llm/test_aimd_throttle.py::TestAIMDThrottleRecovery::test_success_subtracts_recovery_step PASSED [ 68%]
tests/plugins/llm/test_aimd_throttle.py::TestAIMDThrottleRecovery::test_delay_floored_at_min PASSED [ 68%]
tests/plugins/llm/test_aimd_throttle.py::TestAIMDThrottleRecovery::test_success_at_zero_stays_zero PASSED [ 68%]
tests/plugins/llm/test_aimd_throttle.py::TestAIMDThrottleStats::test_stats_track_capacity_retries PASSED [ 68%]
tests/plugins/llm/test_aimd_throttle.py::TestAIMDThrottleStats::test_stats_track_peak_delay PASSED [ 68%]
tests/plugins/llm/test_aimd_throttle.py::TestAIMDThrottleStats::test_stats_track_total_throttle_time PASSED [ 68%]
tests/plugins/llm/test_aimd_throttle.py::TestAIMDThrottleStats::test_stats_reset PASSED [ 68%]
tests/plugins/llm/test_azure.py::TestAzureOpenAIConfig::test_config_requires_deployment_name PASSED [ 68%]
tests/plugins/llm/test_azure.py::TestAzureOpenAIConfig::test_config_requires_endpoint PASSED [ 68%]
tests/plugins/llm/test_azure.py::TestAzureOpenAIConfig::test_config_requires_api_key PASSED [ 68%]
tests/plugins/llm/test_azure.py::TestAzureOpenAIConfig::test_config_requires_template PASSED [ 68%]
tests/plugins/llm/test_azure.py::TestAzureOpenAIConfig::test_config_requires_schema PASSED [ 68%]
tests/plugins/llm/test_azure.py::TestAzureOpenAIConfig::test_valid_config PASSED [ 68%]
tests/plugins/llm/test_azure.py::TestAzureOpenAIConfig::test_default_api_version PASSED [ 68%]
tests/plugins/llm/test_azure.py::TestAzureOpenAIConfig::test_custom_api_version PASSED [ 68%]
tests/plugins/llm/test_azure.py::TestAzureOpenAIConfig::test_config_inherits_llm_config_defaults PASSED [ 68%]
tests/plugins/llm/test_azure.py::TestAzureLLMTransformInit::test_transform_name PASSED [ 68%]
tests/plugins/llm/test_azure.py::TestAzureLLMTransformInit::test_transform_stores_azure_config PASSED [ 68%]
tests/plugins/llm/test_azure.py::TestAzureLLMTransformInit::test_model_set_to_deployment_name PASSED [ 68%]
tests/plugins/llm/test_azure.py::TestAzureLLMTransformInit::test_azure_config_property PASSED [ 68%]
tests/plugins/llm/test_azure.py::TestAzureLLMTransformInit::test_deployment_name_property PASSED [ 68%]
tests/plugins/llm/test_azure.py::TestAzureLLMTransformInit::test_determinism_is_non_deterministic PASSED [ 68%]
tests/plugins/llm/test_azure.py::TestAzureLLMTransformInit::test_config_validation_failure_deployment_name PASSED [ 68%]
tests/plugins/llm/test_azure.py::TestAzureLLMTransformProcess::test_successful_llm_call_returns_enriched_row PASSED [ 68%]
tests/plugins/llm/test_azure.py::TestAzureLLMTransformProcess::test_model_passed_to_azure_client_is_deployment_name PASSED [ 68%]
tests/plugins/llm/test_azure.py::TestAzureLLMTransformProcess::test_template_rendering_error_returns_transform_error PASSED [ 68%]
tests/plugins/llm/test_azure.py::TestAzureLLMTransformProcess::test_llm_client_error_returns_transform_error PASSED [ 68%]
tests/plugins/llm/test_azure.py::TestAzureLLMTransformProcess::test_rate_limit_error_is_retryable PASSED [ 68%]
tests/plugins/llm/test_azure.py::TestAzureLLMTransformProcess::test_missing_landscape_raises_runtime_error PASSED [ 68%]
tests/plugins/llm/test_azure.py::TestAzureLLMTransformProcess::test_missing_state_id_raises_runtime_error PASSED [ 68%]
tests/plugins/llm/test_azure.py::TestAzureLLMTransformProcess::test_system_prompt_included_in_messages PASSED [ 68%]
tests/plugins/llm/test_azure.py::TestAzureLLMTransformProcess::test_temperature_and_max_tokens_passed_to_client PASSED [ 68%]
tests/plugins/llm/test_azure.py::TestAzureLLMTransformProcess::test_custom_response_field PASSED [ 69%]
tests/plugins/llm/test_azure.py::TestAzureLLMTransformProcess::test_close_is_noop PASSED [ 69%]
tests/plugins/llm/test_azure.py::TestAzureLLMTransformProcess::test_azure_client_created_with_correct_credentials PASSED [ 69%]
tests/plugins/llm/test_azure.py::TestAzureLLMTransformIntegration::test_azure_config_with_default_api_version PASSED [ 69%]
tests/plugins/llm/test_azure.py::TestAzureLLMTransformIntegration::test_complex_template_with_multiple_variables PASSED [ 69%]
tests/plugins/llm/test_azure.py::TestAzureLLMTransformIntegration::test_calls_are_recorded_to_landscape PASSED [ 69%]
tests/plugins/llm/test_azure.py::TestAzureLLMTransformPooledExecution::test_pool_size_1_does_not_create_executor PASSED [ 69%]
tests/plugins/llm/test_azure.py::TestAzureLLMTransformPooledExecution::test_pool_size_greater_than_1_creates_executor PASSED [ 69%]
tests/plugins/llm/test_azure.py::TestAzureLLMTransformPooledExecution::test_on_start_captures_recorder PASSED [ 69%]
tests/plugins/llm/test_azure.py::TestAzureLLMTransformPooledExecution::test_close_shuts_down_executor PASSED [ 69%]
tests/plugins/llm/test_azure.py::TestAzureLLMTransformPooledExecution::test_process_single_with_state_raises_capacity_error_on_rate_limit PASSED [ 69%]
tests/plugins/llm/test_azure.py::TestAzureLLMTransformPooledExecution::test_process_single_with_state_returns_error_on_llm_client_error PASSED [ 69%]
tests/plugins/llm/test_azure.py::TestAzureLLMTransformPooledExecution::test_process_single_with_state_requires_recorder PASSED [ 69%]
tests/plugins/llm/test_azure.py::TestAzureBatchProcessing::test_is_batch_aware_is_true PASSED [ 69%]
tests/plugins/llm/test_azure.py::TestAzureBatchProcessing::test_process_accepts_list_of_rows PASSED [ 69%]
tests/plugins/llm/test_azure.py::TestAzureBatchProcessing::test_batch_with_partial_failures PASSED [ 69%]
tests/plugins/llm/test_azure.py::TestAzureBatchProcessing::test_batch_with_all_failures_returns_error PASSED [ 69%]
tests/plugins/llm/test_azure.py::TestAzureBatchProcessing::test_empty_batch_returns_success PASSED [ 69%]
tests/plugins/llm/test_azure.py::TestAzureBatchProcessing::test_batch_requires_landscape PASSED [ 69%]
tests/plugins/llm/test_azure.py::TestAzureBatchProcessing::test_batch_requires_state_id PASSED [ 69%]
tests/plugins/llm/test_azure_batch.py::TestBatchPendingError::test_basic_initialization PASSED [ 69%]
tests/plugins/llm/test_azure_batch.py::TestBatchPendingError::test_custom_check_after_seconds PASSED [ 69%]
tests/plugins/llm/test_azure_batch.py::TestBatchPendingError::test_error_message_format PASSED [ 69%]
tests/plugins/llm/test_azure_batch.py::TestAzureBatchConfig::test_config_requires_deployment_name PASSED [ 69%]
tests/plugins/llm/test_azure_batch.py::TestAzureBatchConfig::test_config_requires_endpoint PASSED [ 69%]
tests/plugins/llm/test_azure_batch.py::TestAzureBatchConfig::test_config_requires_api_key PASSED [ 69%]
tests/plugins/llm/test_azure_batch.py::TestAzureBatchConfig::test_config_requires_template PASSED [ 69%]
tests/plugins/llm/test_azure_batch.py::TestAzureBatchConfig::test_config_requires_schema PASSED [ 69%]
tests/plugins/llm/test_azure_batch.py::TestAzureBatchConfig::test_valid_minimal_config PASSED [ 69%]
tests/plugins/llm/test_azure_batch.py::TestAzureBatchConfig::test_default_values PASSED [ 69%]
tests/plugins/llm/test_azure_batch.py::TestAzureBatchConfig::test_custom_values PASSED [ 69%]
tests/plugins/llm/test_azure_batch.py::TestAzureBatchConfig::test_temperature_bounds PASSED [ 69%]
tests/plugins/llm/test_azure_batch.py::TestAzureBatchLLMTransformInit::test_transform_name PASSED [ 69%]
tests/plugins/llm/test_azure_batch.py::TestAzureBatchLLMTransformInit::test_is_batch_aware PASSED [ 69%]
tests/plugins/llm/test_azure_batch.py::TestAzureBatchLLMTransformInit::test_determinism_is_non_deterministic PASSED [ 70%]
tests/plugins/llm/test_azure_batch.py::TestAzureBatchLLMTransformInit::test_stores_config_values PASSED [ 70%]
tests/plugins/llm/test_azure_batch.py::TestAzureBatchLLMTransformInit::test_azure_config_property PASSED [ 70%]
tests/plugins/llm/test_azure_batch.py::TestAzureBatchLLMTransformInit::test_deployment_name_property PASSED [ 70%]
tests/plugins/llm/test_azure_batch.py::TestAzureBatchLLMTransformEmptyBatch::test_empty_batch_returns_success_with_metadata PASSED [ 70%]
tests/plugins/llm/test_azure_batch.py::TestAzureBatchLLMTransformSubmit::test_fresh_batch_submits_and_raises_pending PASSED [ 70%]
tests/plugins/llm/test_azure_batch.py::TestAzureBatchLLMTransformSubmit::test_checkpoint_saved_after_submit PASSED [ 70%]
tests/plugins/llm/test_azure_batch.py::TestAzureBatchLLMTransformSubmit::test_system_prompt_included_in_batch_requests PASSED [ 70%]
tests/plugins/llm/test_azure_batch.py::TestAzureBatchLLMTransformSubmit::test_max_tokens_included_when_set PASSED [ 70%]
tests/plugins/llm/test_azure_batch.py::TestAzureBatchLLMTransformTemplateErrors::test_all_templates_fail_returns_error PASSED [ 70%]
tests/plugins/llm/test_azure_batch.py::TestAzureBatchLLMTransformTemplateErrors::test_partial_template_failures_continue PASSED [ 70%]
tests/plugins/llm/test_azure_batch.py::TestAzureBatchLLMTransformResume::test_resume_with_checkpoint_checks_status PASSED [ 70%]
tests/plugins/llm/test_azure_batch.py::TestAzureBatchLLMTransformResume::test_completed_batch_downloads_results PASSED [ 70%]
tests/plugins/llm/test_azure_batch.py::TestAzureBatchLLMTransformResume::test_failed_batch_returns_error PASSED [ 70%]
tests/plugins/llm/test_azure_batch.py::TestAzureBatchLLMTransformResume::test_cancelled_batch_returns_error PASSED [ 70%]
tests/plugins/llm/test_azure_batch.py::TestAzureBatchLLMTransformResume::test_expired_batch_returns_error PASSED [ 70%]
tests/plugins/llm/test_azure_batch.py::TestAzureBatchLLMTransformResume::test_checkpoint_cleared_on_completion PASSED [ 70%]
tests/plugins/llm/test_azure_batch.py::TestAzureBatchLLMTransformTimeout::test_batch_timeout_returns_error PASSED [ 70%]
tests/plugins/llm/test_azure_batch.py::TestAzureBatchLLMTransformSingleRow::test_single_row_input_raises_pending PASSED [ 70%]
tests/plugins/llm/test_azure_batch.py::TestAzureBatchLLMTransformResultAssembly::test_results_assembled_in_original_order PASSED [ 70%]
tests/plugins/llm/test_azure_batch.py::TestAzureBatchLLMTransformResultAssembly::test_api_error_per_row_handled PASSED [ 70%]
tests/plugins/llm/test_azure_batch.py::TestAzureBatchLLMTransformClose::test_close_clears_client PASSED [ 70%]
tests/plugins/llm/test_azure_batch.py::TestAzureBatchLLMTransformClose::test_close_is_safe_when_no_client PASSED [ 70%]
tests/plugins/llm/test_azure_multi_query.py::TestAzureMultiQueryLLMTransformInit::test_transform_has_correct_name PASSED [ 70%]
tests/plugins/llm/test_azure_multi_query.py::TestAzureMultiQueryLLMTransformInit::test_transform_is_non_deterministic PASSED [ 70%]
tests/plugins/llm/test_azure_multi_query.py::TestAzureMultiQueryLLMTransformInit::test_transform_is_batch_aware PASSED [ 70%]
tests/plugins/llm/test_azure_multi_query.py::TestAzureMultiQueryLLMTransformInit::test_transform_expands_queries_on_init PASSED [ 70%]
tests/plugins/llm/test_azure_multi_query.py::TestAzureMultiQueryLLMTransformInit::test_transform_requires_case_studies PASSED [ 70%]
tests/plugins/llm/test_azure_multi_query.py::TestAzureMultiQueryLLMTransformInit::test_transform_requires_criteria PASSED [ 70%]
tests/plugins/llm/test_azure_multi_query.py::TestSingleQueryProcessing::test_process_single_query_renders_template PASSED [ 70%]
tests/plugins/llm/test_azure_multi_query.py::TestSingleQueryProcessing::test_process_single_query_parses_json_response PASSED [ 70%]
tests/plugins/llm/test_azure_multi_query.py::TestSingleQueryProcessing::test_process_single_query_handles_invalid_json PASSED [ 70%]
tests/plugins/llm/test_azure_multi_query.py::TestSingleQueryProcessing::test_process_single_query_raises_capacity_error_on_rate_limit PASSED [ 70%]
tests/plugins/llm/test_azure_multi_query.py::TestSingleQueryProcessing::test_process_single_query_handles_template_error PASSED [ 70%]
tests/plugins/llm/test_azure_multi_query.py::TestSingleQueryProcessing::test_get_llm_client_requires_recorder PASSED [ 71%]
tests/plugins/llm/test_azure_multi_query.py::TestRowProcessing::test_process_row_executes_all_queries PASSED [ 71%]
tests/plugins/llm/test_azure_multi_query.py::TestRowProcessing::test_process_row_merges_all_results PASSED [ 71%]
tests/plugins/llm/test_azure_multi_query.py::TestRowProcessing::test_process_row_fails_if_any_query_fails PASSED [ 71%]
tests/plugins/llm/test_azure_multi_query.py::TestBatchProcessing::test_process_batch_handles_list_input PASSED [ 71%]
tests/plugins/llm/test_azure_multi_query.py::TestBatchProcessing::test_process_batch_preserves_row_independence PASSED [ 71%]
tests/plugins/llm/test_azure_multi_query.py::TestBatchProcessing::test_process_batch_empty_list_returns_empty_result PASSED [ 71%]
tests/plugins/llm/test_azure_multi_query.py::TestBatchProcessing::test_process_batch_uses_per_row_state_ids PASSED [ 71%]
tests/plugins/llm/test_azure_multi_query.py::TestBatchProcessing::test_process_batch_cleans_up_per_row_clients PASSED [ 71%]
tests/plugins/llm/test_base.py::TestLLMConfig::test_config_requires_template PASSED [ 71%]
tests/plugins/llm/test_base.py::TestLLMConfig::test_config_requires_model PASSED [ 71%]
tests/plugins/llm/test_base.py::TestLLMConfig::test_config_requires_schema PASSED [ 71%]
tests/plugins/llm/test_base.py::TestLLMConfig::test_valid_config PASSED  [ 71%]
tests/plugins/llm/test_base.py::TestLLMConfig::test_invalid_template_syntax_rejected PASSED [ 71%]
tests/plugins/llm/test_base.py::TestLLMConfig::test_empty_template_rejected PASSED [ 71%]
tests/plugins/llm/test_base.py::TestLLMConfig::test_config_default_values PASSED [ 71%]
tests/plugins/llm/test_base.py::TestLLMConfig::test_config_custom_values PASSED [ 71%]
tests/plugins/llm/test_base.py::TestLLMConfig::test_temperature_bounds PASSED [ 71%]
tests/plugins/llm/test_base.py::TestLLMConfig::test_max_tokens_must_be_positive PASSED [ 71%]
tests/plugins/llm/test_base.py::TestLLMConfig::test_llm_config_accepts_lookup_fields PASSED [ 71%]
tests/plugins/llm/test_base.py::TestBaseLLMTransformInit::test_requires_name_attribute PASSED [ 71%]
tests/plugins/llm/test_base.py::TestBaseLLMTransformInit::test_concrete_subclass_works PASSED [ 71%]
tests/plugins/llm/test_base.py::TestBaseLLMTransformInit::test_determinism_is_non_deterministic PASSED [ 71%]
tests/plugins/llm/test_base.py::TestBaseLLMTransformInit::test_on_error_set_from_config PASSED [ 71%]
tests/plugins/llm/test_base.py::TestBaseLLMTransformProcess::test_template_rendering_error_returns_transform_error PASSED [ 71%]
tests/plugins/llm/test_base.py::TestBaseLLMTransformProcess::test_llm_client_error_returns_transform_error PASSED [ 71%]
tests/plugins/llm/test_base.py::TestBaseLLMTransformProcess::test_rate_limit_error_is_retryable PASSED [ 71%]
tests/plugins/llm/test_base.py::TestBaseLLMTransformProcess::test_successful_transform_returns_enriched_row PASSED [ 71%]
tests/plugins/llm/test_base.py::TestBaseLLMTransformProcess::test_custom_response_field PASSED [ 71%]
tests/plugins/llm/test_base.py::TestBaseLLMTransformProcess::test_system_prompt_included_in_messages PASSED [ 71%]
tests/plugins/llm/test_base.py::TestBaseLLMTransformProcess::test_no_system_prompt_single_message PASSED [ 71%]
tests/plugins/llm/test_base.py::TestBaseLLMTransformProcess::test_temperature_and_max_tokens_passed_to_client PASSED [ 71%]
tests/plugins/llm/test_base.py::TestBaseLLMTransformProcess::test_retryable_llm_error_propagates_flag PASSED [ 71%]
tests/plugins/llm/test_base.py::TestBaseLLMTransformProcess::test_close_is_noop PASSED [ 72%]
tests/plugins/llm/test_base.py::TestBaseLLMTransformSchemaHandling::test_schema_created_with_no_coercion PASSED [ 72%]
tests/plugins/llm/test_base.py::TestBaseLLMTransformSchemaHandling::test_dynamic_schema_accepts_any_fields PASSED [ 72%]
tests/plugins/llm/test_batch_errors.py::TestBatchPendingErrorConstruction::test_minimal_construction PASSED [ 72%]
tests/plugins/llm/test_batch_errors.py::TestBatchPendingErrorConstruction::test_full_construction PASSED [ 72%]
tests/plugins/llm/test_batch_errors.py::TestBatchPendingErrorConstruction::test_custom_check_after_seconds PASSED [ 72%]
tests/plugins/llm/test_batch_errors.py::TestBatchPendingErrorConstruction::test_checkpoint_can_be_any_dict PASSED [ 72%]
tests/plugins/llm/test_batch_errors.py::TestBatchPendingErrorMessage::test_message_format PASSED [ 72%]
tests/plugins/llm/test_batch_errors.py::TestBatchPendingErrorMessage::test_message_includes_status PASSED [ 72%]
tests/plugins/llm/test_batch_errors.py::TestBatchPendingErrorMessage::test_message_with_different_statuses PASSED [ 72%]
tests/plugins/llm/test_batch_errors.py::TestBatchPendingErrorInheritance::test_inherits_from_exception PASSED [ 72%]
tests/plugins/llm/test_batch_errors.py::TestBatchPendingErrorInheritance::test_catchable_as_exception PASSED [ 72%]
tests/plugins/llm/test_batch_errors.py::TestBatchPendingErrorInheritance::test_catchable_as_batch_pending_error PASSED [ 72%]
tests/plugins/llm/test_batch_errors.py::TestBatchPendingErrorUsagePatterns::test_submit_phase_pattern PASSED [ 72%]
tests/plugins/llm/test_batch_errors.py::TestBatchPendingErrorUsagePatterns::test_check_phase_pattern_still_pending PASSED [ 72%]
tests/plugins/llm/test_batch_errors.py::TestBatchPendingErrorUsagePatterns::test_node_id_for_checkpoint_keying PASSED [ 72%]
tests/plugins/llm/test_capacity_errors.py::TestCapacityErrorClassification::test_429_is_capacity_error PASSED [ 72%]
tests/plugins/llm/test_capacity_errors.py::TestCapacityErrorClassification::test_503_is_capacity_error PASSED [ 72%]
tests/plugins/llm/test_capacity_errors.py::TestCapacityErrorClassification::test_529_is_capacity_error PASSED [ 72%]
tests/plugins/llm/test_capacity_errors.py::TestCapacityErrorClassification::test_500_is_not_capacity_error PASSED [ 72%]
tests/plugins/llm/test_capacity_errors.py::TestCapacityErrorClassification::test_400_is_not_capacity_error PASSED [ 72%]
tests/plugins/llm/test_capacity_errors.py::TestCapacityErrorClassification::test_401_is_not_capacity_error PASSED [ 72%]
tests/plugins/llm/test_capacity_errors.py::TestCapacityErrorClassification::test_200_is_not_capacity_error PASSED [ 72%]
tests/plugins/llm/test_capacity_errors.py::TestCapacityErrorException::test_capacity_error_stores_status_code PASSED [ 72%]
tests/plugins/llm/test_capacity_errors.py::TestCapacityErrorException::test_capacity_error_retryable_flag PASSED [ 72%]
tests/plugins/llm/test_multi_query.py::TestQuerySpec::test_query_spec_creation PASSED [ 72%]
tests/plugins/llm/test_multi_query.py::TestQuerySpec::test_query_spec_build_template_context PASSED [ 72%]
tests/plugins/llm/test_multi_query.py::TestQuerySpec::test_build_template_context_raises_on_missing_field PASSED [ 72%]
tests/plugins/llm/test_multi_query.py::TestQuerySpec::test_build_template_context_empty_input_fields PASSED [ 72%]
tests/plugins/llm/test_multi_query.py::TestCaseStudyConfig::test_case_study_requires_name PASSED [ 72%]
tests/plugins/llm/test_multi_query.py::TestCaseStudyConfig::test_case_study_requires_input_fields PASSED [ 72%]
tests/plugins/llm/test_multi_query.py::TestCaseStudyConfig::test_valid_case_study PASSED [ 72%]
tests/plugins/llm/test_multi_query.py::TestCaseStudyConfig::test_case_study_rejects_empty_input_fields PASSED [ 72%]
tests/plugins/llm/test_multi_query.py::TestCaseStudyConfig::test_case_study_with_context_and_description PASSED [ 72%]
tests/plugins/llm/test_multi_query.py::TestCaseStudyConfig::test_case_study_to_template_data PASSED [ 73%]
tests/plugins/llm/test_multi_query.py::TestCriterionConfig::test_criterion_requires_name PASSED [ 73%]
tests/plugins/llm/test_multi_query.py::TestCriterionConfig::test_valid_criterion_minimal PASSED [ 73%]
tests/plugins/llm/test_multi_query.py::TestCriterionConfig::test_valid_criterion_full PASSED [ 73%]
tests/plugins/llm/test_multi_query.py::TestCriterionConfig::test_criterion_to_template_data PASSED [ 73%]
tests/plugins/llm/test_multi_query.py::TestMultiQueryConfig::test_config_requires_case_studies PASSED [ 73%]
tests/plugins/llm/test_multi_query.py::TestMultiQueryConfig::test_config_requires_criteria PASSED [ 73%]
tests/plugins/llm/test_multi_query.py::TestMultiQueryConfig::test_config_requires_output_mapping PASSED [ 73%]
tests/plugins/llm/test_multi_query.py::TestMultiQueryConfig::test_valid_config PASSED [ 73%]
tests/plugins/llm/test_multi_query.py::TestMultiQueryConfig::test_config_rejects_empty_output_mapping PASSED [ 73%]
tests/plugins/llm/test_multi_query.py::TestMultiQueryConfig::test_expand_queries_creates_cross_product PASSED [ 73%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterConfig::test_config_requires_api_key PASSED [ 73%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterConfig::test_config_requires_model PASSED [ 73%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterConfig::test_config_requires_template PASSED [ 73%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterConfig::test_config_requires_schema PASSED [ 73%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterConfig::test_valid_config PASSED [ 73%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterConfig::test_config_default_values PASSED [ 73%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterConfig::test_config_custom_base_url PASSED [ 73%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterConfig::test_config_custom_timeout PASSED [ 73%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterConfig::test_config_invalid_timeout_rejected PASSED [ 73%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterLLMTransformInit::test_transform_stores_config_values PASSED [ 73%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterLLMTransformInit::test_determinism_is_non_deterministic PASSED [ 73%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterLLMTransformProcess::test_successful_api_call_returns_enriched_row PASSED [ 73%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterLLMTransformProcess::test_template_rendering_error_returns_transform_error PASSED [ 73%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterLLMTransformProcess::test_http_error_returns_transform_error PASSED [ 73%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterLLMTransformProcess::test_rate_limit_429_is_retryable PASSED [ 73%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterLLMTransformProcess::test_service_unavailable_503_is_retryable PASSED [ 73%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterLLMTransformProcess::test_overloaded_529_is_retryable PASSED [ 73%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterLLMTransformProcess::test_request_error_not_retryable PASSED [ 73%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterLLMTransformProcess::test_missing_landscape_raises_runtime_error PASSED [ 73%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterLLMTransformProcess::test_system_prompt_included_in_request PASSED [ 73%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterLLMTransformProcess::test_no_system_prompt_single_message PASSED [ 73%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterLLMTransformProcess::test_custom_response_field PASSED [ 73%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterLLMTransformProcess::test_model_from_response_used_when_available PASSED [ 74%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterLLMTransformProcess::test_raise_for_status_called PASSED [ 74%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterLLMTransformProcess::test_close_is_noop PASSED [ 74%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterLLMTransformIntegration::test_complex_template_with_multiple_variables PASSED [ 74%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterLLMTransformIntegration::test_empty_usage_handled_gracefully PASSED [ 74%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterLLMTransformIntegration::test_connection_error_returns_transform_error PASSED [ 74%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterLLMTransformIntegration::test_timeout_passed_to_http_client PASSED [ 74%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterLLMTransformIntegration::test_empty_choices_returns_error PASSED [ 74%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterLLMTransformIntegration::test_missing_choices_key_returns_error PASSED [ 74%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterLLMTransformIntegration::test_malformed_choice_structure_returns_error PASSED [ 74%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterLLMTransformIntegration::test_invalid_json_response_returns_error PASSED [ 74%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterTemplateFeatures::test_lookup_data_accessible_in_template PASSED [ 74%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterTemplateFeatures::test_two_dimensional_lookup_row_plus_lookup PASSED [ 74%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterTemplateFeatures::test_lookup_hash_included_in_output PASSED [ 74%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterTemplateFeatures::test_template_source_included_in_output PASSED [ 74%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterTemplateFeatures::test_all_audit_fields_present_with_lookup PASSED [ 74%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterTemplateFeatures::test_no_lookup_has_none_hash_in_output PASSED [ 74%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterTemplateFeatures::test_lookup_iteration_in_template PASSED [ 74%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterTemplateFeatures::test_template_error_includes_source_in_error_details PASSED [ 74%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterBatchProcessing::test_is_batch_aware_is_true PASSED [ 74%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterBatchProcessing::test_process_accepts_list_of_rows PASSED [ 74%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterBatchProcessing::test_batch_with_partial_failures PASSED [ 74%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterBatchProcessing::test_empty_batch_returns_success PASSED [ 74%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterBatchProcessing::test_batch_missing_landscape_raises_error PASSED [ 74%]
tests/plugins/llm/test_openrouter.py::TestOpenRouterBatchProcessing::test_batch_all_rows_fail_returns_error PASSED [ 74%]
tests/plugins/llm/test_pool_config.py::TestPoolConfigDefaults::test_default_pool_size_is_sequential PASSED [ 74%]
tests/plugins/llm/test_pool_config.py::TestPoolConfigDefaults::test_pool_size_1_is_sequential_mode PASSED [ 74%]
tests/plugins/llm/test_pool_config.py::TestPoolConfigExplicit::test_pool_size_greater_than_1_creates_config PASSED [ 74%]
tests/plugins/llm/test_pool_config.py::TestPoolConfigExplicit::test_custom_aimd_settings PASSED [ 74%]
tests/plugins/llm/test_pool_config.py::TestPoolConfigValidation::test_pool_size_must_be_positive PASSED [ 74%]
tests/plugins/llm/test_pool_config.py::TestPoolConfigValidation::test_backoff_multiplier_must_be_greater_than_1 PASSED [ 74%]
tests/plugins/llm/test_pool_config.py::TestPoolConfigValidation::test_max_capacity_retry_seconds_must_be_positive PASSED [ 74%]
tests/plugins/llm/test_pool_config.py::TestPoolConfigToThrottleConfig::test_to_throttle_config_creates_throttle_config PASSED [ 74%]
tests/plugins/llm/test_pool_config.py::TestPoolConfigToThrottleConfig::test_to_throttle_config_excludes_non_aimd_fields PASSED [ 74%]
tests/plugins/llm/test_pooled_executor.py::TestPooledExecutorInit::test_creates_with_config PASSED [ 75%]
tests/plugins/llm/test_pooled_executor.py::TestPooledExecutorInit::test_creates_throttle_from_config PASSED [ 75%]
tests/plugins/llm/test_pooled_executor.py::TestPooledExecutorShutdown::test_shutdown_completes_pending PASSED [ 75%]
tests/plugins/llm/test_pooled_executor.py::TestRowContext::test_row_context_creation PASSED [ 75%]
tests/plugins/llm/test_pooled_executor.py::TestRowContext::test_row_context_immutable_reference PASSED [ 75%]
tests/plugins/llm/test_pooled_executor.py::TestPooledExecutorBatch::test_execute_batch_returns_results_in_order PASSED [ 75%]
tests/plugins/llm/test_pooled_executor.py::TestPooledExecutorBatch::test_execute_batch_passes_state_id_per_row PASSED [ 75%]
tests/plugins/llm/test_pooled_executor.py::TestPooledExecutorBatch::test_execute_batch_respects_pool_size PASSED [ 75%]
tests/plugins/llm/test_pooled_executor.py::TestPooledExecutorStats::test_get_stats_returns_pool_config PASSED [ 75%]
tests/plugins/llm/test_pooled_executor.py::TestPooledExecutorStats::test_get_stats_includes_throttle_stats PASSED [ 75%]
tests/plugins/llm/test_pooled_executor.py::TestPooledExecutorCapacityHandling::test_capacity_error_triggers_throttle_and_retries PASSED [ 75%]
tests/plugins/llm/test_pooled_executor.py::TestPooledExecutorCapacityHandling::test_capacity_retry_respects_max_timeout PASSED [ 75%]
tests/plugins/llm/test_pooled_executor.py::TestPooledExecutorCapacityHandling::test_normal_error_not_retried PASSED [ 75%]
tests/plugins/llm/test_pooled_executor.py::TestPooledExecutorCapacityHandling::test_capacity_retry_releases_semaphore_during_backoff PASSED [ 75%]
tests/plugins/llm/test_pooled_executor.py::TestPooledExecutorCapacityHandling::test_no_deadlock_when_batch_exceeds_pool_with_capacity_errors PASSED [ 75%]
tests/plugins/llm/test_reorder_buffer.py::TestReorderBufferBasic::test_empty_buffer_has_no_ready_results PASSED [ 75%]
tests/plugins/llm/test_reorder_buffer.py::TestReorderBufferBasic::test_single_result_emitted_immediately PASSED [ 75%]
tests/plugins/llm/test_reorder_buffer.py::TestReorderBufferOrdering::test_out_of_order_completion_reordered PASSED [ 75%]
tests/plugins/llm/test_reorder_buffer.py::TestReorderBufferOrdering::test_in_order_completion_immediate PASSED [ 75%]
tests/plugins/llm/test_reorder_buffer.py::TestReorderBufferTiming::test_entry_has_submit_timestamp PASSED [ 75%]
tests/plugins/llm/test_reorder_buffer.py::TestReorderBufferTiming::test_entry_has_complete_timestamp PASSED [ 75%]
tests/plugins/llm/test_reorder_buffer.py::TestReorderBufferTiming::test_entry_tracks_buffer_wait_time PASSED [ 75%]
tests/plugins/llm/test_reorder_buffer.py::TestReorderBufferProperties::test_output_order_matches_submission_order PASSED [ 75%]
tests/plugins/llm/test_reorder_buffer.py::TestReorderBufferProperties::test_all_submitted_items_eventually_emitted PASSED [ 75%]
tests/plugins/llm/test_templates.py::TestPromptTemplate::test_simple_variable_substitution PASSED [ 75%]
tests/plugins/llm/test_templates.py::TestPromptTemplate::test_template_with_loop PASSED [ 75%]
tests/plugins/llm/test_templates.py::TestPromptTemplate::test_template_with_default_filter PASSED [ 75%]
tests/plugins/llm/test_templates.py::TestPromptTemplate::test_template_hash_is_stable PASSED [ 75%]
tests/plugins/llm/test_templates.py::TestPromptTemplate::test_different_templates_have_different_hashes PASSED [ 75%]
tests/plugins/llm/test_templates.py::TestPromptTemplate::test_render_returns_metadata PASSED [ 75%]
tests/plugins/llm/test_templates.py::TestPromptTemplate::test_undefined_variable_raises_error PASSED [ 75%]
tests/plugins/llm/test_templates.py::TestPromptTemplate::test_sandboxed_prevents_dangerous_operations PASSED [ 75%]
tests/plugins/llm/test_templates.py::TestPromptTemplate::test_rendered_prompt_includes_source_metadata PASSED [ 75%]
tests/plugins/llm/test_templates.py::TestPromptTemplate::test_lookup_simple_access PASSED [ 76%]
tests/plugins/llm/test_templates.py::TestPromptTemplate::test_lookup_two_dimensional PASSED [ 76%]
tests/plugins/llm/test_templates.py::TestPromptTemplate::test_lookup_missing_key_raises_error PASSED [ 76%]
tests/plugins/llm/test_templates.py::TestPromptTemplate::test_lookup_iteration PASSED [ 76%]
tests/plugins/llm/test_templates.py::TestPromptTemplate::test_lookup_hash_is_stable PASSED [ 76%]
tests/plugins/llm/test_templates.py::TestPromptTemplate::test_no_lookup_has_none_hash PASSED [ 76%]
tests/plugins/llm/test_templates.py::TestPromptTemplate::test_empty_lookup_has_hash PASSED [ 76%]
tests/plugins/sinks/test_csv_sink.py::TestCSVSink::test_implements_protocol PASSED [ 76%]
tests/plugins/sinks/test_csv_sink.py::TestCSVSink::test_has_required_attributes PASSED [ 76%]
tests/plugins/sinks/test_csv_sink.py::TestCSVSink::test_write_creates_file PASSED [ 76%]
tests/plugins/sinks/test_csv_sink.py::TestCSVSink::test_write_multiple_rows PASSED [ 76%]
tests/plugins/sinks/test_csv_sink.py::TestCSVSink::test_custom_delimiter PASSED [ 76%]
tests/plugins/sinks/test_csv_sink.py::TestCSVSink::test_close_is_idempotent PASSED [ 76%]
tests/plugins/sinks/test_csv_sink.py::TestCSVSink::test_flush_before_close PASSED [ 76%]
tests/plugins/sinks/test_csv_sink.py::TestCSVSink::test_batch_write_returns_artifact_descriptor PASSED [ 76%]
tests/plugins/sinks/test_csv_sink.py::TestCSVSink::test_batch_write_content_hash_is_sha256 PASSED [ 76%]
tests/plugins/sinks/test_csv_sink.py::TestCSVSink::test_batch_write_multiple_rows PASSED [ 76%]
tests/plugins/sinks/test_csv_sink.py::TestCSVSink::test_batch_write_empty_list PASSED [ 76%]
tests/plugins/sinks/test_csv_sink.py::TestCSVSink::test_has_plugin_version PASSED [ 76%]
tests/plugins/sinks/test_csv_sink.py::TestCSVSink::test_has_determinism PASSED [ 76%]
tests/plugins/sinks/test_csv_sink.py::TestCSVSink::test_cumulative_hash_after_multiple_writes PASSED [ 76%]
tests/plugins/sinks/test_csv_sink.py::TestCSVSink::test_explicit_schema_creates_all_headers_including_optional PASSED [ 76%]
tests/plugins/sinks/test_csv_sink.py::TestCSVSink::test_dynamic_schema_still_infers_from_row PASSED [ 76%]
tests/plugins/sinks/test_csv_sink_append.py::TestCSVSinkAppendMode::test_append_mode_adds_to_existing_file PASSED [ 76%]
tests/plugins/sinks/test_csv_sink_append.py::TestCSVSinkAppendMode::test_append_mode_reads_headers_from_existing_file PASSED [ 76%]
tests/plugins/sinks/test_csv_sink_append.py::TestCSVSinkAppendMode::test_append_mode_creates_file_if_not_exists PASSED [ 76%]
tests/plugins/sinks/test_csv_sink_append.py::TestCSVSinkAppendMode::test_default_mode_is_write PASSED [ 76%]
tests/plugins/sinks/test_csv_sink_append.py::TestCSVSinkAppendMode::test_append_mode_with_empty_existing_file PASSED [ 76%]
tests/plugins/sinks/test_csv_sink_append.py::TestCSVSinkAppendMode::test_append_mode_multiple_appends PASSED [ 76%]
tests/plugins/sinks/test_database_sink.py::TestDatabaseSink::test_implements_protocol PASSED [ 76%]
tests/plugins/sinks/test_database_sink.py::TestDatabaseSink::test_has_required_attributes PASSED [ 76%]
tests/plugins/sinks/test_database_sink.py::TestDatabaseSink::test_write_creates_table PASSED [ 76%]
tests/plugins/sinks/test_database_sink.py::TestDatabaseSink::test_batch_insert PASSED [ 76%]
tests/plugins/sinks/test_database_sink.py::TestDatabaseSink::test_close_is_idempotent PASSED [ 76%]
tests/plugins/sinks/test_database_sink.py::TestDatabaseSink::test_memory_database PASSED [ 77%]
tests/plugins/sinks/test_database_sink.py::TestDatabaseSink::test_batch_write_returns_artifact_descriptor PASSED [ 77%]
tests/plugins/sinks/test_database_sink.py::TestDatabaseSink::test_batch_write_content_hash_is_payload_hash PASSED [ 77%]
tests/plugins/sinks/test_database_sink.py::TestDatabaseSink::test_batch_write_metadata_has_row_count PASSED [ 77%]
tests/plugins/sinks/test_database_sink.py::TestDatabaseSink::test_batch_write_empty_list PASSED [ 77%]
tests/plugins/sinks/test_database_sink.py::TestDatabaseSink::test_has_plugin_version PASSED [ 77%]
tests/plugins/sinks/test_database_sink.py::TestDatabaseSink::test_has_determinism PASSED [ 77%]
tests/plugins/sinks/test_database_sink.py::TestDatabaseSink::test_explicit_schema_creates_all_columns_including_optional PASSED [ 77%]
tests/plugins/sinks/test_database_sink.py::TestDatabaseSink::test_explicit_schema_maps_types_correctly PASSED [ 77%]
tests/plugins/sinks/test_database_sink.py::TestDatabaseSink::test_dynamic_schema_still_infers_from_row PASSED [ 77%]
tests/plugins/sinks/test_database_sink.py::TestDatabaseSinkIfExistsReplace::test_if_exists_replace_drops_existing_table PASSED [ 77%]
tests/plugins/sinks/test_database_sink.py::TestDatabaseSinkIfExistsReplace::test_if_exists_replace_subsequent_writes_append PASSED [ 77%]
tests/plugins/sinks/test_database_sink.py::TestDatabaseSinkIfExistsReplace::test_if_exists_append_accumulates PASSED [ 77%]
tests/plugins/sinks/test_database_sink.py::TestDatabaseSinkIfExistsReplace::test_if_exists_replace_works_when_table_does_not_exist PASSED [ 77%]
tests/plugins/sinks/test_database_sink.py::TestDatabaseSinkSecretHandling::test_url_with_password_honors_dev_mode_override PASSED [ 77%]
tests/plugins/sinks/test_database_sink.py::TestDatabaseSinkSecretHandling::test_url_with_password_fails_without_key_in_production_mode PASSED [ 77%]
tests/plugins/sinks/test_database_sink.py::TestDatabaseSinkSecretHandling::test_url_without_password_works_without_key PASSED [ 77%]
tests/plugins/sinks/test_json_sink.py::TestJSONSink::test_implements_protocol PASSED [ 77%]
tests/plugins/sinks/test_json_sink.py::TestJSONSink::test_has_required_attributes PASSED [ 77%]
tests/plugins/sinks/test_json_sink.py::TestJSONSink::test_write_json_array PASSED [ 77%]
tests/plugins/sinks/test_json_sink.py::TestJSONSink::test_write_jsonl PASSED [ 77%]
tests/plugins/sinks/test_json_sink.py::TestJSONSink::test_auto_detect_format_from_extension PASSED [ 77%]
tests/plugins/sinks/test_json_sink.py::TestJSONSink::test_json_extension_defaults_to_array PASSED [ 77%]
tests/plugins/sinks/test_json_sink.py::TestJSONSink::test_close_is_idempotent PASSED [ 77%]
tests/plugins/sinks/test_json_sink.py::TestJSONSink::test_pretty_print_option PASSED [ 77%]
tests/plugins/sinks/test_json_sink.py::TestJSONSink::test_batch_write_returns_artifact_descriptor PASSED [ 77%]
tests/plugins/sinks/test_json_sink.py::TestJSONSink::test_batch_write_content_hash_is_sha256 PASSED [ 77%]
tests/plugins/sinks/test_json_sink.py::TestJSONSink::test_batch_write_jsonl_content_hash PASSED [ 77%]
tests/plugins/sinks/test_json_sink.py::TestJSONSink::test_batch_write_empty_list PASSED [ 77%]
tests/plugins/sinks/test_json_sink.py::TestJSONSink::test_has_plugin_version PASSED [ 77%]
tests/plugins/sinks/test_json_sink.py::TestJSONSink::test_has_determinism PASSED [ 77%]
tests/plugins/sinks/test_json_sink.py::TestJSONSink::test_cumulative_hash_after_multiple_writes PASSED [ 77%]
tests/plugins/sources/test_csv_source.py::TestCSVSource::test_implements_protocol PASSED [ 77%]
tests/plugins/sources/test_csv_source.py::TestCSVSource::test_has_required_attributes PASSED [ 78%]
tests/plugins/sources/test_csv_source.py::TestCSVSource::test_load_yields_rows PASSED [ 78%]
tests/plugins/sources/test_csv_source.py::TestCSVSource::test_load_with_delimiter PASSED [ 78%]
tests/plugins/sources/test_csv_source.py::TestCSVSource::test_load_with_encoding PASSED [ 78%]
tests/plugins/sources/test_csv_source.py::TestCSVSource::test_close_is_idempotent PASSED [ 78%]
tests/plugins/sources/test_csv_source.py::TestCSVSource::test_file_not_found_raises PASSED [ 78%]
tests/plugins/sources/test_csv_source.py::TestCSVSourceConfigValidation::test_missing_path_raises_error PASSED [ 78%]
tests/plugins/sources/test_csv_source.py::TestCSVSourceConfigValidation::test_empty_path_raises_error PASSED [ 78%]
tests/plugins/sources/test_csv_source.py::TestCSVSourceConfigValidation::test_unknown_field_raises_error PASSED [ 78%]
tests/plugins/sources/test_csv_source.py::TestCSVSourceConfigValidation::test_missing_schema_raises_error PASSED [ 78%]
tests/plugins/sources/test_csv_source.py::TestCSVSourceConfigValidation::test_missing_on_validation_failure_raises_error PASSED [ 78%]
tests/plugins/sources/test_csv_source.py::TestCSVSourceQuarantineYielding::test_invalid_row_yields_quarantined_source_row PASSED [ 78%]
tests/plugins/sources/test_csv_source.py::TestCSVSourceQuarantineYielding::test_discard_mode_does_not_yield_invalid_rows PASSED [ 78%]
tests/plugins/sources/test_csv_source.py::TestCSVSourceQuarantineYielding::test_malformed_csv_row_quarantined_not_crash PASSED [ 78%]
tests/plugins/sources/test_csv_source.py::TestCSVSourceQuarantineYielding::test_malformed_csv_row_with_discard_mode PASSED [ 78%]
tests/plugins/sources/test_csv_source.py::TestCSVSourceQuarantineYielding::test_csv_error_handling_defensive PASSED [ 78%]
tests/plugins/sources/test_csv_source.py::TestCSVSourceQuarantineYielding::test_skip_rows_line_numbers_are_accurate PASSED [ 78%]
tests/plugins/sources/test_csv_source.py::TestCSVSourceQuarantineYielding::test_empty_rows_are_skipped PASSED [ 78%]
tests/plugins/sources/test_json_source.py::TestJSONSource::test_implements_protocol PASSED [ 78%]
tests/plugins/sources/test_json_source.py::TestJSONSource::test_has_required_attributes PASSED [ 78%]
tests/plugins/sources/test_json_source.py::TestJSONSource::test_load_json_array PASSED [ 78%]
tests/plugins/sources/test_json_source.py::TestJSONSource::test_load_jsonl PASSED [ 78%]
tests/plugins/sources/test_json_source.py::TestJSONSource::test_auto_detect_jsonl_by_extension PASSED [ 78%]
tests/plugins/sources/test_json_source.py::TestJSONSource::test_json_object_with_data_key PASSED [ 78%]
tests/plugins/sources/test_json_source.py::TestJSONSource::test_empty_lines_ignored_in_jsonl PASSED [ 78%]
tests/plugins/sources/test_json_source.py::TestJSONSource::test_file_not_found_raises PASSED [ 78%]
tests/plugins/sources/test_json_source.py::TestJSONSource::test_non_array_json_raises PASSED [ 78%]
tests/plugins/sources/test_json_source.py::TestJSONSource::test_close_is_idempotent PASSED [ 78%]
tests/plugins/sources/test_json_source.py::TestJSONSourceConfigValidation::test_missing_path_raises_error PASSED [ 78%]
tests/plugins/sources/test_json_source.py::TestJSONSourceConfigValidation::test_empty_path_raises_error PASSED [ 78%]
tests/plugins/sources/test_json_source.py::TestJSONSourceConfigValidation::test_unknown_field_raises_error PASSED [ 78%]
tests/plugins/sources/test_json_source.py::TestJSONSourceConfigValidation::test_missing_schema_raises_error PASSED [ 78%]
tests/plugins/sources/test_json_source.py::TestJSONSourceConfigValidation::test_missing_on_validation_failure_raises_error PASSED [ 78%]
tests/plugins/sources/test_json_source.py::TestJSONSourceQuarantineYielding::test_invalid_row_yields_quarantined_source_row PASSED [ 78%]
tests/plugins/sources/test_json_source.py::TestJSONSourceQuarantineYielding::test_discard_mode_does_not_yield_invalid_rows PASSED [ 79%]
tests/plugins/sources/test_json_source.py::TestJSONSourceQuarantineYielding::test_jsonl_invalid_row_yields_quarantined PASSED [ 79%]
tests/plugins/sources/test_json_source.py::TestJSONSourceParseErrors::test_jsonl_malformed_line_quarantined_not_crash PASSED [ 79%]
tests/plugins/sources/test_json_source.py::TestJSONSourceParseErrors::test_jsonl_malformed_line_with_discard_mode PASSED [ 79%]
tests/plugins/sources/test_json_source.py::TestJSONSourceParseErrors::test_jsonl_quarantined_row_contains_raw_line_data PASSED [ 79%]
tests/plugins/sources/test_json_source.py::TestJSONSourceParseErrors::test_json_array_malformed_file_quarantined_not_crash PASSED [ 79%]
tests/plugins/sources/test_json_source.py::TestJSONSourceParseErrors::test_json_array_malformed_file_with_discard_mode PASSED [ 79%]
tests/plugins/sources/test_null_source.py::TestNullSource::test_null_source_yields_nothing PASSED [ 79%]
tests/plugins/sources/test_null_source.py::TestNullSource::test_null_source_has_name PASSED [ 79%]
tests/plugins/sources/test_null_source.py::TestNullSource::test_null_source_satisfies_protocol PASSED [ 79%]
tests/plugins/sources/test_null_source.py::TestNullSource::test_null_source_has_output_schema PASSED [ 79%]
tests/plugins/sources/test_null_source.py::TestNullSource::test_null_source_close_is_idempotent PASSED [ 79%]
tests/plugins/sources/test_null_source.py::TestNullSource::test_null_source_has_determinism PASSED [ 79%]
tests/plugins/sources/test_null_source.py::TestNullSource::test_null_source_has_plugin_version PASSED [ 79%]
tests/plugins/test_base.py::TestBaseTransform::test_base_transform_creates_tokens_default_false PASSED [ 79%]
tests/plugins/test_base.py::TestBaseTransform::test_base_transform_creates_tokens_settable PASSED [ 79%]
tests/plugins/test_base.py::TestBaseTransform::test_base_transform_abstract PASSED [ 79%]
tests/plugins/test_base.py::TestBaseTransform::test_subclass_implementation PASSED [ 79%]
tests/plugins/test_base.py::TestBaseTransform::test_lifecycle_hooks_exist PASSED [ 79%]
tests/plugins/test_base.py::TestBaseAggregationDeleted::test_base_aggregation_deleted PASSED [ 79%]
tests/plugins/test_base.py::TestBaseSink::test_base_sink_implementation PASSED [ 79%]
tests/plugins/test_base.py::TestBaseSink::test_base_sink_batch_write_signature PASSED [ 79%]
tests/plugins/test_base.py::TestBaseSink::test_base_sink_batch_implementation PASSED [ 79%]
tests/plugins/test_base.py::TestBaseSink::test_base_sink_has_io_write_determinism PASSED [ 79%]
tests/plugins/test_base.py::TestBaseSource::test_base_source_implementation PASSED [ 79%]
tests/plugins/test_base.py::TestBaseSource::test_base_source_has_metadata_attributes PASSED [ 79%]
tests/plugins/test_base.py::TestBaseSource::test_subclass_can_override_metadata PASSED [ 79%]
tests/plugins/test_base.py::TestNoValidationEnforcement::test_plugins_instantiate_without_validation_call PASSED [ 79%]
tests/plugins/test_config_base.py::TestPluginConfig::test_rejects_extra_fields PASSED [ 79%]
tests/plugins/test_config_base.py::TestPluginConfig::test_from_dict_wraps_validation_error PASSED [ 79%]
tests/plugins/test_config_base.py::TestPluginConfig::test_from_dict_success PASSED [ 79%]
tests/plugins/test_config_base.py::TestPluginConfig::test_from_dict_with_defaults PASSED [ 79%]
tests/plugins/test_config_base.py::TestPluginConfig::test_from_dict_rejects_extra_fields PASSED [ 79%]
tests/plugins/test_config_base.py::TestPathConfig::test_rejects_empty_path PASSED [ 80%]
tests/plugins/test_config_base.py::TestPathConfig::test_rejects_whitespace_only_path PASSED [ 80%]
tests/plugins/test_config_base.py::TestPathConfig::test_accepts_valid_path PASSED [ 80%]
tests/plugins/test_config_base.py::TestPathConfig::test_resolved_path_absolute PASSED [ 80%]
tests/plugins/test_config_base.py::TestPathConfig::test_resolved_path_absolute_ignores_base_dir PASSED [ 80%]
tests/plugins/test_config_base.py::TestPathConfig::test_resolved_path_relative_without_base PASSED [ 80%]
tests/plugins/test_config_base.py::TestPathConfig::test_resolved_path_relative_with_base PASSED [ 80%]
tests/plugins/test_config_base.py::TestPathConfig::test_path_config_with_additional_fields PASSED [ 80%]
tests/plugins/test_config_base.py::TestPathConfig::test_path_config_rejects_extra_fields PASSED [ 80%]
tests/plugins/test_config_base.py::TestPluginConfigInheritance::test_deep_inheritance PASSED [ 80%]
tests/plugins/test_config_base.py::TestPluginConfigInheritance::test_from_dict_returns_correct_subclass_type PASSED [ 80%]
tests/plugins/test_config_base.py::TestPluginConfigWithSchema::test_plugin_config_accepts_schema PASSED [ 80%]
tests/plugins/test_config_base.py::TestPluginConfigWithSchema::test_plugin_config_schema_optional_by_default PASSED [ 80%]
tests/plugins/test_config_base.py::TestPluginConfigWithSchema::test_data_plugin_config_requires_schema PASSED [ 80%]
tests/plugins/test_config_base.py::TestPluginConfigWithSchema::test_data_plugin_config_with_explicit_schema PASSED [ 80%]
tests/plugins/test_config_base.py::TestSourceDataConfig::test_on_validation_failure_required PASSED [ 80%]
tests/plugins/test_config_base.py::TestSourceDataConfig::test_on_validation_failure_accepts_sink_name PASSED [ 80%]
tests/plugins/test_config_base.py::TestSourceDataConfig::test_on_validation_failure_accepts_discard PASSED [ 80%]
tests/plugins/test_config_base.py::TestSourceDataConfig::test_on_validation_failure_rejects_empty_string PASSED [ 80%]
tests/plugins/test_config_base.py::TestSourceDataConfig::test_source_config_inherits_path_and_schema PASSED [ 80%]
tests/plugins/test_config_base.py::TestTransformDataConfig::test_on_error_is_optional PASSED [ 80%]
tests/plugins/test_config_base.py::TestTransformDataConfig::test_on_error_accepts_sink_name PASSED [ 80%]
tests/plugins/test_config_base.py::TestTransformDataConfig::test_on_error_accepts_discard PASSED [ 80%]
tests/plugins/test_config_base.py::TestTransformDataConfig::test_on_error_rejects_empty_string PASSED [ 80%]
tests/plugins/test_config_base.py::TestTransformDataConfig::test_transform_config_inherits_schema_requirement PASSED [ 80%]
tests/plugins/test_context.py::TestPluginContext::test_minimal_context PASSED [ 80%]
tests/plugins/test_context.py::TestPluginContext::test_optional_integrations_default_none PASSED [ 80%]
tests/plugins/test_context.py::TestPluginContext::test_start_span_without_tracer PASSED [ 80%]
tests/plugins/test_context.py::TestPluginContext::test_get_config_value PASSED [ 80%]
tests/plugins/test_context.py::TestCheckpointAPI::test_checkpoint_methods_exist PASSED [ 80%]
tests/plugins/test_context.py::TestCheckpointAPI::test_get_checkpoint_returns_none_when_empty PASSED [ 80%]
tests/plugins/test_context.py::TestCheckpointAPI::test_update_checkpoint_stores_data PASSED [ 80%]
tests/plugins/test_context.py::TestCheckpointAPI::test_update_checkpoint_merges_data PASSED [ 80%]
tests/plugins/test_context.py::TestCheckpointAPI::test_clear_checkpoint_removes_all_data PASSED [ 80%]
tests/plugins/test_context.py::TestCheckpointAPI::test_checkpoint_typical_batch_workflow PASSED [ 81%]
tests/plugins/test_context.py::TestValidationErrorRecording::test_record_validation_error_exists PASSED [ 81%]
tests/plugins/test_context.py::TestValidationErrorRecording::test_record_validation_error_returns_quarantine_token PASSED [ 81%]
tests/plugins/test_context.py::TestValidationErrorRecording::test_record_validation_error_without_landscape_logs_warning PASSED [ 81%]
tests/plugins/test_context.py::TestValidationErrorRecording::test_record_validation_error_uses_id_field_as_row_id PASSED [ 81%]
tests/plugins/test_context.py::TestValidationErrorRecording::test_record_validation_error_generates_row_id_from_hash PASSED [ 81%]
tests/plugins/test_context.py::TestValidationErrorRecording::test_record_validation_error_with_landscape PASSED [ 81%]
tests/plugins/test_context.py::TestValidationErrorDestination::test_validation_error_token_has_destination PASSED [ 81%]
tests/plugins/test_context.py::TestValidationErrorDestination::test_validation_error_token_defaults_to_discard PASSED [ 81%]
tests/plugins/test_context.py::TestValidationErrorDestination::test_record_validation_error_requires_destination PASSED [ 81%]
tests/plugins/test_context.py::TestValidationErrorDestination::test_record_validation_error_with_discard_destination PASSED [ 81%]
tests/plugins/test_context.py::TestRouteToSink::test_route_to_sink_exists PASSED [ 81%]
tests/plugins/test_context.py::TestRouteToSink::test_route_to_sink_logs_action PASSED [ 81%]
tests/plugins/test_context.py::TestRouteToSink::test_route_to_sink_accepts_none_metadata PASSED [ 81%]
tests/plugins/test_context.py::TestTransformErrorRecording::test_transform_error_token_exists PASSED [ 81%]
tests/plugins/test_context.py::TestTransformErrorRecording::test_transform_error_token_defaults_to_discard PASSED [ 81%]
tests/plugins/test_context.py::TestTransformErrorRecording::test_record_transform_error_without_landscape PASSED [ 81%]
tests/plugins/test_context.py::TestTransformErrorRecording::test_record_transform_error_without_landscape_logs_warning PASSED [ 81%]
tests/plugins/test_context.py::TestTransformErrorRecording::test_record_transform_error_with_landscape PASSED [ 81%]
tests/plugins/test_context_types.py::TestPluginContextTypes::test_landscape_type_matches_recorder PASSED [ 81%]
tests/plugins/test_context_types.py::TestPluginContextTypes::test_context_landscape_annotation_references_real_recorder PASSED [ 81%]
tests/plugins/test_context_types.py::TestPluginContextTypes::test_no_stub_protocol_in_context_module PASSED [ 81%]
tests/plugins/test_discovery.py::TestDiscoverPlugins::test_discovers_csv_source PASSED [ 81%]
tests/plugins/test_discovery.py::TestDiscoverPlugins::test_discovers_passthrough_transform PASSED [ 81%]
tests/plugins/test_discovery.py::TestDiscoverPlugins::test_discovers_csv_sink PASSED [ 81%]
tests/plugins/test_discovery.py::TestDiscoverPlugins::test_excludes_non_plugin_files PASSED [ 81%]
tests/plugins/test_discovery.py::TestDiscoverPlugins::test_skips_abstract_classes PASSED [ 81%]
tests/plugins/test_discovery.py::TestDiscoverAllPlugins::test_discover_all_sources PASSED [ 81%]
tests/plugins/test_discovery.py::TestDiscoverAllPlugins::test_discover_all_transforms PASSED [ 81%]
tests/plugins/test_discovery.py::TestDiscoverAllPlugins::test_discover_all_sinks PASSED [ 81%]
tests/plugins/test_discovery.py::TestDiscoverAllPlugins::test_no_duplicate_names_within_type PASSED [ 81%]
tests/plugins/test_discovery.py::TestDiscoverAllPlugins::test_discovery_finds_expected_plugin_counts PASSED [ 81%]
tests/plugins/test_discovery.py::TestGetPluginDescription::test_extracts_first_line_of_docstring PASSED [ 81%]
tests/plugins/test_discovery.py::TestGetPluginDescription::test_handles_missing_docstring PASSED [ 81%]
tests/plugins/test_discovery.py::TestGetPluginDescription::test_strips_whitespace PASSED [ 82%]
tests/plugins/test_discovery.py::TestDuplicatePluginDetection::test_duplicate_names_raise_value_error PASSED [ 82%]
tests/plugins/test_discovery.py::TestDuplicatePluginDetection::test_discover_all_raises_on_duplicate_names PASSED [ 82%]
tests/plugins/test_discovery.py::TestCreateDynamicHookimpl::test_creates_hookimpl_with_correct_method PASSED [ 82%]
tests/plugins/test_discovery.py::TestCreateDynamicHookimpl::test_hookimpl_returns_plugin_list PASSED [ 82%]
tests/plugins/test_discovery.py::TestCreateDynamicHookimpl::test_hookimpl_integrates_with_pluggy PASSED [ 82%]
tests/plugins/test_enums.py::TestNodeType::test_all_node_types_defined PASSED [ 82%]
tests/plugins/test_enums.py::TestNodeType::test_node_type_is_string_enum PASSED [ 82%]
tests/plugins/test_enums.py::TestRoutingKind::test_all_routing_kinds_defined PASSED [ 82%]
tests/plugins/test_enums.py::TestRoutingMode::test_routing_modes_defined PASSED [ 82%]
tests/plugins/test_enums.py::TestDeterminism::test_determinism_levels_defined PASSED [ 82%]
tests/plugins/test_hookimpl_registration.py::TestBuiltinPluginDiscovery::test_builtin_sources_discoverable PASSED [ 82%]
tests/plugins/test_hookimpl_registration.py::TestBuiltinPluginDiscovery::test_builtin_transforms_discoverable PASSED [ 82%]
tests/plugins/test_hookimpl_registration.py::TestBuiltinPluginDiscovery::test_builtin_sinks_discoverable PASSED [ 82%]
tests/plugins/test_hookimpl_registration.py::TestBuiltinPluginDiscovery::test_plugins_retrievable_by_name PASSED [ 82%]
tests/plugins/test_hookimpl_registration.py::TestBuiltinPluginDiscovery::test_register_builtin_plugins_idempotent PASSED [ 82%]
tests/plugins/test_hookspecs.py::TestHookspecs::test_hookspec_marker_exists PASSED [ 82%]
tests/plugins/test_hookspecs.py::TestHookspecs::test_hookimpl_marker_exists PASSED [ 82%]
tests/plugins/test_hookspecs.py::TestHookspecs::test_source_hooks_defined PASSED [ 82%]
tests/plugins/test_hookspecs.py::TestHookspecs::test_transform_hooks_defined PASSED [ 82%]
tests/plugins/test_hookspecs.py::TestHookspecs::test_sink_hooks_defined PASSED [ 82%]
tests/plugins/test_integration.py::TestPluginSystemIntegration::test_full_plugin_workflow PASSED [ 82%]
tests/plugins/test_integration.py::TestPluginSystemIntegration::test_schema_validation_in_pipeline PASSED [ 82%]
tests/plugins/test_integration.py::TestPluginSystemIntegration::test_aggregation_workflow_deleted PASSED [ 82%]
tests/plugins/test_manager.py::TestPluginManager::test_create_manager PASSED [ 82%]
tests/plugins/test_manager.py::TestPluginManager::test_register_plugin PASSED [ 82%]
tests/plugins/test_manager.py::TestPluginManager::test_get_plugin_by_name PASSED [ 82%]
tests/plugins/test_manager.py::TestPluginSpec::test_spec_from_transform PASSED [ 82%]
tests/plugins/test_manager.py::TestPluginSpec::test_schema_defaults PASSED [ 82%]
tests/plugins/test_manager.py::TestDuplicateNameValidation::test_duplicate_transform_raises PASSED [ 82%]
tests/plugins/test_manager.py::TestDuplicateNameValidation::test_same_name_different_types_ok PASSED [ 82%]
tests/plugins/test_manager.py::TestPluginSpecSchemaHashes::test_from_plugin_captures_input_schema_hash PASSED [ 82%]
tests/plugins/test_manager.py::TestPluginSpecSchemaHashes::test_schema_hash_stable PASSED [ 82%]
tests/plugins/test_manager.py::TestMissingPluginRaises::test_get_source_by_name_raises_on_unknown_plugin PASSED [ 83%]
tests/plugins/test_manager.py::TestMissingPluginRaises::test_get_transform_by_name_raises_on_unknown_plugin PASSED [ 83%]
tests/plugins/test_manager.py::TestMissingPluginRaises::test_get_sink_by_name_raises_on_unknown_plugin PASSED [ 83%]
tests/plugins/test_manager.py::TestDiscoveryBasedRegistration::test_register_builtin_discovers_csv_source PASSED [ 83%]
tests/plugins/test_manager.py::TestDiscoveryBasedRegistration::test_register_builtin_discovers_all_transforms PASSED [ 83%]
tests/plugins/test_manager.py::TestDiscoveryBasedRegistration::test_register_builtin_discovers_all_sinks PASSED [ 83%]
tests/plugins/test_manager.py::TestManagerValidation::test_manager_validates_before_instantiation PASSED [ 83%]
tests/plugins/test_manager.py::TestManagerValidation::test_manager_creates_plugin_with_valid_config PASSED [ 83%]
tests/plugins/test_manager_validation.py::TestPluginSpecValidation::test_valid_plugin_succeeds PASSED [ 83%]
tests/plugins/test_manager_validation.py::TestPluginSpecValidation::test_schemas_default_to_none PASSED [ 83%]
tests/plugins/test_node_id_protocol.py::TestNodeIdProtocol::test_source_protocol_has_node_id PASSED [ 83%]
tests/plugins/test_node_id_protocol.py::TestNodeIdProtocol::test_base_source_has_node_id PASSED [ 83%]
tests/plugins/test_node_id_protocol.py::TestNodeIdProtocol::test_transform_protocol_has_node_id PASSED [ 83%]
tests/plugins/test_node_id_protocol.py::TestNodeIdProtocol::test_base_transform_has_node_id PASSED [ 83%]
tests/plugins/test_node_id_protocol.py::TestNodeIdProtocol::test_gate_protocol_has_node_id PASSED [ 83%]
tests/plugins/test_node_id_protocol.py::TestNodeIdProtocol::test_base_gate_has_node_id PASSED [ 83%]
tests/plugins/test_node_id_protocol.py::TestNodeIdProtocol::test_aggregation_protocol_deleted PASSED [ 83%]
tests/plugins/test_node_id_protocol.py::TestNodeIdProtocol::test_base_aggregation_deleted PASSED [ 83%]
tests/plugins/test_node_id_protocol.py::TestNodeIdProtocol::test_coalesce_protocol_has_node_id PASSED [ 83%]
tests/plugins/test_node_id_protocol.py::TestNodeIdProtocol::test_sink_protocol_has_node_id PASSED [ 83%]
tests/plugins/test_node_id_protocol.py::TestNodeIdProtocol::test_base_sink_has_node_id PASSED [ 83%]
tests/plugins/test_protocol_lifecycle.py::TestTransformProtocolLifecycle::test_protocol_has_close_method PASSED [ 83%]
tests/plugins/test_protocol_lifecycle.py::TestTransformProtocolLifecycle::test_transform_with_close_satisfies_protocol PASSED [ 83%]
tests/plugins/test_protocol_lifecycle.py::TestGateProtocolLifecycle::test_protocol_has_close_method PASSED [ 83%]
tests/plugins/test_protocol_lifecycle.py::TestGateProtocolLifecycle::test_gate_with_close_satisfies_protocol PASSED [ 83%]
tests/plugins/test_protocols.py::TestSourceProtocol::test_source_protocol_definition PASSED [ 83%]
tests/plugins/test_protocols.py::TestSourceProtocol::test_source_implementation PASSED [ 83%]
tests/plugins/test_protocols.py::TestSourceProtocol::test_source_has_lifecycle_hooks PASSED [ 83%]
tests/plugins/test_protocols.py::TestSourceProtocol::test_source_has_determinism_attribute PASSED [ 83%]
tests/plugins/test_protocols.py::TestSourceProtocol::test_source_has_version_attribute PASSED [ 83%]
tests/plugins/test_protocols.py::TestSourceProtocol::test_source_implementation_with_metadata PASSED [ 83%]
tests/plugins/test_protocols.py::TestTransformProtocol::test_transform_implementation PASSED [ 83%]
tests/plugins/test_protocols.py::TestTransformBatchSupport::test_transform_process_single_row PASSED [ 83%]
tests/plugins/test_protocols.py::TestTransformBatchSupport::test_transform_process_batch_rows PASSED [ 83%]
tests/plugins/test_protocols.py::TestTransformBatchSupport::test_transform_is_batch_aware_default_false PASSED [ 84%]
tests/plugins/test_protocols.py::TestTransformBatchSupport::test_transform_is_batch_aware_can_be_set_true PASSED [ 84%]
tests/plugins/test_protocols.py::TestAggregationProtocolDeleted::test_aggregation_protocol_deleted PASSED [ 84%]
tests/plugins/test_protocols.py::TestAggregationProtocolDeleted::test_base_aggregation_deleted PASSED [ 84%]
tests/plugins/test_protocols.py::TestCoalesceProtocol::test_coalesce_policy_types PASSED [ 84%]
tests/plugins/test_protocols.py::TestCoalesceProtocol::test_quorum_requires_threshold PASSED [ 84%]
tests/plugins/test_protocols.py::TestCoalesceProtocol::test_coalesce_merge_behavior PASSED [ 84%]
tests/plugins/test_protocols.py::TestSinkProtocol::test_sink_batch_write_signature PASSED [ 84%]
tests/plugins/test_protocols.py::TestSinkProtocol::test_batch_sink_implementation PASSED [ 84%]
tests/plugins/test_protocols.py::TestSinkProtocol::test_sink_implementation PASSED [ 84%]
tests/plugins/test_protocols.py::TestSinkProtocol::test_sink_has_idempotency_support PASSED [ 84%]
tests/plugins/test_protocols.py::TestProtocolMetadata::test_transform_has_determinism_attribute PASSED [ 84%]
tests/plugins/test_protocols.py::TestProtocolMetadata::test_transform_has_version_attribute PASSED [ 84%]
tests/plugins/test_protocols.py::TestProtocolMetadata::test_deterministic_transform PASSED [ 84%]
tests/plugins/test_protocols.py::TestProtocolMetadata::test_nondeterministic_transform PASSED [ 84%]
tests/plugins/test_results.py::TestRowOutcome::test_all_terminal_states_exist PASSED [ 84%]
tests/plugins/test_results.py::TestRowOutcome::test_outcome_is_enum PASSED [ 84%]
tests/plugins/test_results.py::TestRoutingAction::test_continue_action PASSED [ 84%]
tests/plugins/test_results.py::TestRoutingAction::test_route PASSED      [ 84%]
tests/plugins/test_results.py::TestRoutingAction::test_fork_to_paths PASSED [ 84%]
tests/plugins/test_results.py::TestRoutingAction::test_immutable PASSED  [ 84%]
tests/plugins/test_results.py::TestRoutingAction::test_reason_is_immutable PASSED [ 84%]
tests/plugins/test_results.py::TestTransformResult::test_success_result PASSED [ 84%]
tests/plugins/test_results.py::TestTransformResult::test_error_result PASSED [ 84%]
tests/plugins/test_results.py::TestTransformResult::test_has_audit_fields PASSED [ 84%]
tests/plugins/test_results.py::TestGateResult::test_gate_result_with_continue PASSED [ 84%]
tests/plugins/test_results.py::TestGateResult::test_gate_result_with_route PASSED [ 84%]
tests/plugins/test_results.py::TestGateResult::test_has_audit_fields PASSED [ 84%]
tests/plugins/test_results.py::TestAcceptResultDeleted::test_accept_result_deleted_from_plugins_results PASSED [ 84%]
tests/plugins/test_results.py::TestAcceptResultDeleted::test_accept_result_not_exported_from_plugins PASSED [ 84%]
tests/plugins/test_results.py::TestRoutingActionEnums::test_continue_uses_routing_kind_enum PASSED [ 84%]
tests/plugins/test_results.py::TestRoutingActionEnums::test_route_uses_enums PASSED [ 84%]
tests/plugins/test_results.py::TestRoutingActionEnums::test_fork_to_paths_uses_enums PASSED [ 84%]
tests/plugins/test_results.py::TestFreezeDictDefensiveCopy::test_original_dict_mutation_not_visible PASSED [ 85%]
tests/plugins/test_results.py::TestFreezeDictDefensiveCopy::test_nested_dict_mutation_not_visible PASSED [ 85%]
tests/plugins/test_results.py::TestSourceRow::test_quarantined_factory PASSED [ 85%]
tests/plugins/test_results.py::TestSourceRow::test_quarantined_preserves_original_row PASSED [ 85%]
tests/plugins/test_results.py::TestSourceRow::test_is_dataclass PASSED   [ 85%]
tests/plugins/test_results.py::TestSourceRow::test_importable_from_contracts PASSED [ 85%]
tests/plugins/test_results.py::TestPluginsPublicAPI::test_results_importable PASSED [ 85%]
tests/plugins/test_results.py::TestPluginsPublicAPI::test_context_importable PASSED [ 85%]
tests/plugins/test_results.py::TestPluginsPublicAPI::test_schemas_importable PASSED [ 85%]
tests/plugins/test_results.py::TestPluginsPublicAPI::test_protocols_importable PASSED [ 85%]
tests/plugins/test_results.py::TestPluginsPublicAPI::test_aggregation_protocol_not_exported PASSED [ 85%]
tests/plugins/test_results.py::TestPluginsPublicAPI::test_base_classes_importable PASSED [ 85%]
tests/plugins/test_results.py::TestPluginsPublicAPI::test_base_aggregation_not_exported PASSED [ 85%]
tests/plugins/test_results.py::TestPluginsPublicAPI::test_manager_importable PASSED [ 85%]
tests/plugins/test_results.py::TestPluginsPublicAPI::test_hookspecs_importable PASSED [ 85%]
tests/plugins/test_schema_factory.py::TestCreateSchemaFromConfig::test_factory_exists PASSED [ 85%]
tests/plugins/test_schema_factory.py::TestCreateSchemaFromConfig::test_dynamic_schema_accepts_anything PASSED [ 85%]
tests/plugins/test_schema_factory.py::TestCreateSchemaFromConfig::test_strict_schema_rejects_extra_fields PASSED [ 85%]
tests/plugins/test_schema_factory.py::TestCreateSchemaFromConfig::test_strict_schema_requires_all_fields PASSED [ 85%]
tests/plugins/test_schema_factory.py::TestCreateSchemaFromConfig::test_free_schema_allows_extra_fields PASSED [ 85%]
tests/plugins/test_schema_factory.py::TestCreateSchemaFromConfig::test_free_schema_requires_specified_fields PASSED [ 85%]
tests/plugins/test_schema_factory.py::TestCreateSchemaFromConfig::test_optional_field_can_be_missing PASSED [ 85%]
tests/plugins/test_schema_factory.py::TestCreateSchemaFromConfig::test_type_coercion_int_to_float PASSED [ 85%]
tests/plugins/test_schema_factory.py::TestCreateSchemaFromConfig::test_type_coercion_string_to_int PASSED [ 85%]
tests/plugins/test_schema_factory.py::TestCreateSchemaFromConfig::test_type_coercion_string_to_float PASSED [ 85%]
tests/plugins/test_schema_factory.py::TestCreateSchemaFromConfig::test_type_coercion_string_to_bool PASSED [ 85%]
tests/plugins/test_schema_factory.py::TestCreateSchemaFromConfig::test_any_type_accepts_anything PASSED [ 85%]
tests/plugins/test_schema_factory.py::TestCreateSchemaFromConfig::test_invalid_type_not_coercible PASSED [ 85%]
tests/plugins/test_schema_factory.py::TestCoercionControl::test_coercion_enabled_by_default PASSED [ 85%]
tests/plugins/test_schema_factory.py::TestCoercionControl::test_coercion_disabled_rejects_string_to_int PASSED [ 85%]
tests/plugins/test_schema_factory.py::TestCoercionControl::test_coercion_disabled_rejects_string_to_float PASSED [ 85%]
tests/plugins/test_schema_factory.py::TestCoercionControl::test_coercion_disabled_still_accepts_correct_types PASSED [ 85%]
tests/plugins/test_schema_factory.py::TestCoercionControl::test_coercion_disabled_allows_int_to_float PASSED [ 85%]
tests/plugins/test_schema_factory.py::TestCoercionControl::test_dynamic_schema_with_coercion_disabled PASSED [ 85%]
tests/plugins/test_schema_factory.py::TestNonFiniteFloatRejection::test_nan_string_rejected_in_float_field PASSED [ 86%]
tests/plugins/test_schema_factory.py::TestNonFiniteFloatRejection::test_infinity_string_rejected_in_float_field PASSED [ 86%]
tests/plugins/test_schema_factory.py::TestNonFiniteFloatRejection::test_negative_infinity_rejected_in_float_field PASSED [ 86%]
tests/plugins/test_schema_factory.py::TestNonFiniteFloatRejection::test_actual_nan_float_rejected PASSED [ 86%]
tests/plugins/test_schema_factory.py::TestNonFiniteFloatRejection::test_actual_infinity_float_rejected PASSED [ 86%]
tests/plugins/test_schema_factory.py::TestNonFiniteFloatRejection::test_optional_float_still_rejects_nan PASSED [ 86%]
tests/plugins/test_schema_factory.py::TestNonFiniteFloatRejection::test_finite_floats_still_accepted PASSED [ 86%]
tests/plugins/test_schema_factory.py::TestSchemaPluginSchemaCompliance::test_schema_is_plugin_schema_subclass PASSED [ 86%]
tests/plugins/test_schema_factory.py::TestSchemaPluginSchemaCompliance::test_to_row_returns_all_fields PASSED [ 86%]
tests/plugins/test_schemas.py::TestPluginSchema::test_schema_validates_fields PASSED [ 86%]
tests/plugins/test_schemas.py::TestPluginSchema::test_schema_to_dict PASSED [ 86%]
tests/plugins/test_schemas.py::TestPluginSchema::test_schema_from_row PASSED [ 86%]
tests/plugins/test_schemas.py::TestPluginSchema::test_schema_extra_fields_ignored PASSED [ 86%]
tests/plugins/test_schemas.py::TestSchemaValidation::test_validate_row_against_schema PASSED [ 86%]
tests/plugins/test_schemas.py::TestSchemaValidation::test_validate_missing_field PASSED [ 86%]
tests/plugins/test_schemas.py::TestSchemaCompatibility::test_compatible_schemas PASSED [ 86%]
tests/plugins/test_schemas.py::TestSchemaCompatibility::test_incompatible_schemas_missing_field PASSED [ 86%]
tests/plugins/test_schemas.py::TestSchemaCompatibility::test_incompatible_schemas_type_mismatch PASSED [ 86%]
tests/plugins/test_schemas.py::TestSchemaCompatibility::test_optional_fields_not_required PASSED [ 86%]
tests/plugins/test_schemas.py::TestSchemaCompatibility::test_optional_union_compatible PASSED [ 86%]
tests/plugins/test_schemas.py::TestSchemaCompatibility::test_int_to_optional_float_coercion PASSED [ 86%]
tests/plugins/test_schemas.py::TestSchemaCompatibility::test_union_to_optional_float_coercion PASSED [ 86%]
tests/plugins/test_schemas.py::TestSchemaCompatibility::test_any_accepts_all_types PASSED [ 86%]
tests/plugins/test_schemas.py::TestSchemaCompatibility::test_error_message_includes_full_type_names PASSED [ 86%]
tests/plugins/test_utils.py::TestGetNestedField::test_get_nested_field_exists PASSED [ 86%]
tests/plugins/test_utils.py::TestGetNestedField::test_simple_field_access PASSED [ 86%]
tests/plugins/test_utils.py::TestGetNestedField::test_nested_field_access PASSED [ 86%]
tests/plugins/test_utils.py::TestGetNestedField::test_missing_field_returns_sentinel PASSED [ 86%]
tests/plugins/test_utils.py::TestGetNestedField::test_missing_nested_field_returns_sentinel PASSED [ 86%]
tests/plugins/test_utils.py::TestGetNestedField::test_missing_intermediate_returns_sentinel PASSED [ 86%]
tests/plugins/test_utils.py::TestGetNestedField::test_custom_default PASSED [ 86%]
tests/plugins/test_utils.py::TestGetNestedField::test_none_value_not_missing PASSED [ 86%]
tests/plugins/test_utils.py::TestGetNestedField::test_non_dict_intermediate_returns_sentinel PASSED [ 86%]
tests/plugins/test_validation.py::test_validator_accepts_valid_source_config PASSED [ 87%]
tests/plugins/test_validation.py::test_validator_rejects_missing_required_field PASSED [ 87%]
tests/plugins/test_validation.py::test_validator_rejects_invalid_field_type PASSED [ 87%]
tests/plugins/test_validation.py::test_validator_accepts_null_source_with_empty_config PASSED [ 87%]
tests/plugins/test_validation.py::test_validator_accepts_null_source_with_arbitrary_config PASSED [ 87%]
tests/plugins/test_validation.py::test_validator_accepts_valid_transform_config PASSED [ 87%]
tests/plugins/test_validation.py::test_validator_accepts_valid_sink_config PASSED [ 87%]
tests/plugins/test_validation.py::test_validator_rejects_unknown_gate_type PASSED [ 87%]
tests/plugins/test_validation.py::test_validator_rejects_invalid_transform_config PASSED [ 87%]
tests/plugins/test_validation.py::test_validator_rejects_invalid_sink_config PASSED [ 87%]
tests/plugins/test_validation.py::test_validator_rejects_unknown_transform_type PASSED [ 87%]
tests/plugins/test_validation.py::test_validator_rejects_unknown_sink_type PASSED [ 87%]
tests/plugins/test_validation.py::test_validator_rejects_unknown_source_type PASSED [ 87%]
tests/plugins/test_validation.py::test_validator_accepts_database_sink_config PASSED [ 87%]
tests/plugins/test_validation.py::test_validator_accepts_azure_blob_source_config PASSED [ 87%]
tests/plugins/test_validation.py::test_validator_accepts_azure_blob_sink_config PASSED [ 87%]
tests/plugins/test_validation.py::test_validator_validates_schema_config PASSED [ 87%]
tests/plugins/test_validation.py::test_validator_rejects_invalid_schema_mode PASSED [ 87%]
tests/plugins/test_validation.py::test_validator_rejects_schema_missing_fields PASSED [ 87%]
tests/plugins/test_validation.py::test_validator_rejects_schema_empty_fields PASSED [ 87%]
tests/plugins/test_validation.py::test_validator_rejects_schema_invalid_field_type PASSED [ 87%]
tests/plugins/test_validation.py::test_validator_rejects_malformed_field_spec PASSED [ 87%]
tests/plugins/test_validation_integration.py::test_plugin_manager_has_validator PASSED [ 87%]
tests/plugins/test_validation_integration.py::test_manager_validates_source_config_before_creation PASSED [ 87%]
tests/plugins/test_validation_integration.py::test_valid_config_creates_working_plugin PASSED [ 87%]
tests/plugins/test_validation_integration.py::test_validator_handles_all_builtin_sources PASSED [ 87%]
tests/plugins/test_validation_integration.py::test_validator_provides_field_level_errors PASSED [ 87%]
tests/plugins/transforms/azure/test_content_safety.py::TestAzureContentSafetyConfig::test_config_requires_endpoint PASSED [ 87%]
tests/plugins/transforms/azure/test_content_safety.py::TestAzureContentSafetyConfig::test_config_requires_api_key PASSED [ 87%]
tests/plugins/transforms/azure/test_content_safety.py::TestAzureContentSafetyConfig::test_config_requires_fields PASSED [ 87%]
tests/plugins/transforms/azure/test_content_safety.py::TestAzureContentSafetyConfig::test_config_requires_all_thresholds PASSED [ 87%]
tests/plugins/transforms/azure/test_content_safety.py::TestAzureContentSafetyConfig::test_config_validates_threshold_range PASSED [ 87%]
tests/plugins/transforms/azure/test_content_safety.py::TestAzureContentSafetyConfig::test_config_validates_threshold_range_negative PASSED [ 87%]
tests/plugins/transforms/azure/test_content_safety.py::TestAzureContentSafetyConfig::test_valid_config PASSED [ 87%]
tests/plugins/transforms/azure/test_content_safety.py::TestAzureContentSafetyConfig::test_valid_config_with_single_field PASSED [ 88%]
tests/plugins/transforms/azure/test_content_safety.py::TestAzureContentSafetyConfig::test_valid_config_with_all_fields PASSED [ 88%]
tests/plugins/transforms/azure/test_content_safety.py::TestAzureContentSafetyConfig::test_config_requires_schema PASSED [ 88%]
tests/plugins/transforms/azure/test_content_safety.py::TestAzureContentSafetyConfig::test_config_boundary_threshold_zero PASSED [ 88%]
tests/plugins/transforms/azure/test_content_safety.py::TestAzureContentSafetyConfig::test_config_boundary_threshold_six PASSED [ 88%]
tests/plugins/transforms/azure/test_content_safety.py::TestAzureContentSafetyTransform::test_transform_has_required_attributes PASSED [ 88%]
tests/plugins/transforms/azure/test_content_safety.py::TestAzureContentSafetyTransform::test_content_below_threshold_passes PASSED [ 88%]
tests/plugins/transforms/azure/test_content_safety.py::TestAzureContentSafetyTransform::test_content_exceeding_threshold_returns_error PASSED [ 88%]
tests/plugins/transforms/azure/test_content_safety.py::TestAzureContentSafetyTransform::test_api_error_returns_retryable_error PASSED [ 88%]
tests/plugins/transforms/azure/test_content_safety.py::TestAzureContentSafetyTransform::test_network_error_returns_retryable_error PASSED [ 88%]
tests/plugins/transforms/azure/test_content_safety.py::TestAzureContentSafetyTransform::test_skips_missing_configured_field PASSED [ 88%]
tests/plugins/transforms/azure/test_content_safety.py::TestAzureContentSafetyTransform::test_malformed_api_response_returns_error PASSED [ 88%]
tests/plugins/transforms/azure/test_content_safety.py::TestAzureContentSafetyTransform::test_malformed_category_item_returns_error PASSED [ 88%]
tests/plugins/transforms/azure/test_content_safety.py::TestAzureContentSafetyTransform::test_missing_categories_treated_as_safe PASSED [ 88%]
tests/plugins/transforms/azure/test_content_safety.py::TestAzureContentSafetyTransform::test_threshold_zero_with_severity_zero_passes PASSED [ 88%]
tests/plugins/transforms/azure/test_content_safety.py::TestAzureContentSafetyTransform::test_threshold_zero_blocks_severity_one PASSED [ 88%]
tests/plugins/transforms/azure/test_content_safety.py::TestAzureContentSafetyTransform::test_close_is_noop PASSED [ 88%]
tests/plugins/transforms/azure/test_content_safety.py::TestAzureContentSafetyTransform::test_api_called_with_correct_endpoint_and_headers PASSED [ 88%]
tests/plugins/transforms/azure/test_content_safety.py::TestContentSafetyPoolConfig::test_pool_size_default_is_one PASSED [ 88%]
tests/plugins/transforms/azure/test_content_safety.py::TestContentSafetyPoolConfig::test_pool_size_configurable PASSED [ 88%]
tests/plugins/transforms/azure/test_content_safety.py::TestContentSafetyPoolConfig::test_pool_config_property_returns_none_when_sequential PASSED [ 88%]
tests/plugins/transforms/azure/test_content_safety.py::TestContentSafetyPoolConfig::test_pool_config_property_returns_config_when_pooled PASSED [ 88%]
tests/plugins/transforms/azure/test_content_safety.py::TestContentSafetyPooledExecution::test_batch_aware_is_true_when_pooled PASSED [ 88%]
tests/plugins/transforms/azure/test_content_safety.py::TestContentSafetyPooledExecution::test_batch_aware_is_false_when_sequential PASSED [ 88%]
tests/plugins/transforms/azure/test_content_safety.py::TestContentSafetyPooledExecution::test_pooled_execution_processes_batch_concurrently PASSED [ 88%]
tests/plugins/transforms/azure/test_content_safety.py::TestContentSafetyPooledExecution::test_pooled_execution_handles_threshold_violations PASSED [ 88%]
tests/plugins/transforms/azure/test_content_safety.py::TestContentSafetyPooledExecution::test_pooled_rate_limit_triggers_capacity_error PASSED [ 88%]
tests/plugins/transforms/azure/test_prompt_shield.py::TestAzurePromptShieldConfig::test_config_requires_endpoint PASSED [ 88%]
tests/plugins/transforms/azure/test_prompt_shield.py::TestAzurePromptShieldConfig::test_config_requires_api_key PASSED [ 88%]
tests/plugins/transforms/azure/test_prompt_shield.py::TestAzurePromptShieldConfig::test_config_requires_fields PASSED [ 88%]
tests/plugins/transforms/azure/test_prompt_shield.py::TestAzurePromptShieldConfig::test_config_requires_schema PASSED [ 88%]
tests/plugins/transforms/azure/test_prompt_shield.py::TestAzurePromptShieldConfig::test_valid_config PASSED [ 88%]
tests/plugins/transforms/azure/test_prompt_shield.py::TestAzurePromptShieldConfig::test_valid_config_with_single_field PASSED [ 88%]
tests/plugins/transforms/azure/test_prompt_shield.py::TestAzurePromptShieldConfig::test_valid_config_with_all_fields PASSED [ 89%]
tests/plugins/transforms/azure/test_prompt_shield.py::TestAzurePromptShieldTransform::test_transform_has_required_attributes PASSED [ 89%]
tests/plugins/transforms/azure/test_prompt_shield.py::TestAzurePromptShieldTransform::test_clean_content_passes PASSED [ 89%]
tests/plugins/transforms/azure/test_prompt_shield.py::TestAzurePromptShieldTransform::test_user_prompt_attack_returns_error PASSED [ 89%]
tests/plugins/transforms/azure/test_prompt_shield.py::TestAzurePromptShieldTransform::test_document_attack_returns_error PASSED [ 89%]
tests/plugins/transforms/azure/test_prompt_shield.py::TestAzurePromptShieldTransform::test_both_attacks_detected PASSED [ 89%]
tests/plugins/transforms/azure/test_prompt_shield.py::TestAzurePromptShieldTransform::test_api_error_returns_retryable_error PASSED [ 89%]
tests/plugins/transforms/azure/test_prompt_shield.py::TestAzurePromptShieldTransform::test_network_error_returns_retryable_error PASSED [ 89%]
tests/plugins/transforms/azure/test_prompt_shield.py::TestAzurePromptShieldTransform::test_skips_missing_configured_field PASSED [ 89%]
tests/plugins/transforms/azure/test_prompt_shield.py::TestAzurePromptShieldTransform::test_skips_non_string_fields PASSED [ 89%]
tests/plugins/transforms/azure/test_prompt_shield.py::TestAzurePromptShieldTransform::test_malformed_api_response_returns_error PASSED [ 89%]
tests/plugins/transforms/azure/test_prompt_shield.py::TestAzurePromptShieldTransform::test_partial_api_response_returns_error PASSED [ 89%]
tests/plugins/transforms/azure/test_prompt_shield.py::TestAzurePromptShieldTransform::test_http_error_non_rate_limit_not_retryable PASSED [ 89%]
tests/plugins/transforms/azure/test_prompt_shield.py::TestAzurePromptShieldTransform::test_all_fields_mode_scans_all_string_fields PASSED [ 89%]
tests/plugins/transforms/azure/test_prompt_shield.py::TestAzurePromptShieldTransform::test_multiple_documents_analysis PASSED [ 89%]
tests/plugins/transforms/azure/test_prompt_shield.py::TestAzurePromptShieldTransform::test_api_called_with_correct_endpoint_and_headers PASSED [ 89%]
tests/plugins/transforms/azure/test_prompt_shield.py::TestAzurePromptShieldTransform::test_close_is_noop PASSED [ 89%]
tests/plugins/transforms/azure/test_prompt_shield.py::TestPromptShieldPoolConfig::test_pool_size_default_is_one PASSED [ 89%]
tests/plugins/transforms/azure/test_prompt_shield.py::TestPromptShieldPoolConfig::test_pool_size_configurable PASSED [ 89%]
tests/plugins/transforms/azure/test_prompt_shield.py::TestPromptShieldPoolConfig::test_pool_config_property_returns_none_when_sequential PASSED [ 89%]
tests/plugins/transforms/azure/test_prompt_shield.py::TestPromptShieldPoolConfig::test_pool_config_property_returns_config_when_pooled PASSED [ 89%]
tests/plugins/transforms/azure/test_prompt_shield.py::TestPromptShieldPooledExecution::test_batch_aware_is_true_when_pooled PASSED [ 89%]
tests/plugins/transforms/azure/test_prompt_shield.py::TestPromptShieldPooledExecution::test_batch_aware_is_false_when_sequential PASSED [ 89%]
tests/plugins/transforms/azure/test_prompt_shield.py::TestPromptShieldPooledExecution::test_pooled_execution_processes_batch_concurrently PASSED [ 89%]
tests/plugins/transforms/azure/test_prompt_shield.py::TestPromptShieldPooledExecution::test_pooled_execution_handles_mixed_results PASSED [ 89%]
tests/plugins/transforms/azure/test_prompt_shield.py::TestPromptShieldPooledExecution::test_on_start_captures_recorder PASSED [ 89%]
tests/plugins/transforms/azure/test_prompt_shield.py::TestPromptShieldPooledExecution::test_close_shuts_down_executor PASSED [ 89%]
tests/plugins/transforms/azure/test_prompt_shield.py::TestPromptShieldPooledExecution::test_sequential_mode_has_no_executor PASSED [ 89%]
tests/plugins/transforms/azure/test_prompt_shield.py::TestPromptShieldPooledExecution::test_audit_trail_records_api_calls PASSED [ 89%]
tests/plugins/transforms/azure/test_prompt_shield.py::TestPromptShieldPooledExecution::test_all_rows_failed_returns_error PASSED [ 89%]
tests/plugins/transforms/test_batch_stats.py::TestBatchStatsHappyPath::test_implements_protocol PASSED [ 89%]
tests/plugins/transforms/test_batch_stats.py::TestBatchStatsHappyPath::test_has_required_attributes PASSED [ 89%]
tests/plugins/transforms/test_batch_stats.py::TestBatchStatsHappyPath::test_computes_count_sum_mean PASSED [ 89%]
tests/plugins/transforms/test_batch_stats.py::TestBatchStatsHappyPath::test_includes_group_by_field PASSED [ 89%]
tests/plugins/transforms/test_batch_stats.py::TestBatchStatsHappyPath::test_empty_batch_returns_zeros PASSED [ 90%]
tests/plugins/transforms/test_batch_stats.py::TestBatchStatsHappyPath::test_skips_non_numeric_values PASSED [ 90%]
tests/plugins/transforms/test_batch_stats.py::TestBatchStatsOutputSchema::test_output_schema_is_dynamic PASSED [ 90%]
tests/plugins/transforms/test_field_mapper.py::TestFieldMapper::test_implements_protocol PASSED [ 90%]
tests/plugins/transforms/test_field_mapper.py::TestFieldMapper::test_has_required_attributes PASSED [ 90%]
tests/plugins/transforms/test_field_mapper.py::TestFieldMapper::test_rename_single_field PASSED [ 90%]
tests/plugins/transforms/test_field_mapper.py::TestFieldMapper::test_rename_multiple_fields PASSED [ 90%]
tests/plugins/transforms/test_field_mapper.py::TestFieldMapper::test_select_fields_only PASSED [ 90%]
tests/plugins/transforms/test_field_mapper.py::TestFieldMapper::test_missing_field_error PASSED [ 90%]
tests/plugins/transforms/test_field_mapper.py::TestFieldMapper::test_missing_field_skip_non_strict PASSED [ 90%]
tests/plugins/transforms/test_field_mapper.py::TestFieldMapper::test_default_is_non_strict PASSED [ 90%]
tests/plugins/transforms/test_field_mapper.py::TestFieldMapper::test_nested_field_access PASSED [ 90%]
tests/plugins/transforms/test_field_mapper.py::TestFieldMapper::test_empty_mapping_passthrough PASSED [ 90%]
tests/plugins/transforms/test_field_mapper.py::TestFieldMapper::test_requires_schema_config PASSED [ 90%]
tests/plugins/transforms/test_field_mapper.py::TestFieldMapper::test_validate_input_rejects_wrong_type PASSED [ 90%]
tests/plugins/transforms/test_field_mapper.py::TestFieldMapper::test_validate_input_disabled_passes_wrong_type PASSED [ 90%]
tests/plugins/transforms/test_field_mapper.py::TestFieldMapper::test_validate_input_skipped_for_dynamic_schema PASSED [ 90%]
tests/plugins/transforms/test_field_mapper.py::TestFieldMapperOutputSchema::test_select_only_uses_dynamic_output_schema PASSED [ 90%]
tests/plugins/transforms/test_json_explode.py::TestJSONExplodeHappyPath::test_explodes_array_into_multiple_rows PASSED [ 90%]
tests/plugins/transforms/test_json_explode.py::TestJSONExplodeHappyPath::test_creates_tokens_is_true PASSED [ 90%]
tests/plugins/transforms/test_json_explode.py::TestJSONExplodeHappyPath::test_empty_array_returns_single_row PASSED [ 90%]
tests/plugins/transforms/test_json_explode.py::TestJSONExplodeHappyPath::test_custom_output_field_name PASSED [ 90%]
tests/plugins/transforms/test_json_explode.py::TestJSONExplodeHappyPath::test_include_index_false PASSED [ 90%]
tests/plugins/transforms/test_json_explode.py::TestJSONExplodeHappyPath::test_preserves_all_non_array_fields PASSED [ 90%]
tests/plugins/transforms/test_json_explode.py::TestJSONExplodeTypeViolations::test_missing_field_crashes PASSED [ 90%]
tests/plugins/transforms/test_json_explode.py::TestJSONExplodeTypeViolations::test_none_value_crashes PASSED [ 90%]
tests/plugins/transforms/test_json_explode.py::TestJSONExplodeTypeViolations::test_string_value_crashes_with_type_error PASSED [ 90%]
tests/plugins/transforms/test_json_explode.py::TestJSONExplodeTypeViolations::test_dict_value_crashes_with_type_error PASSED [ 90%]
tests/plugins/transforms/test_json_explode.py::TestJSONExplodeTypeViolations::test_tuple_value_crashes_with_type_error PASSED [ 90%]
tests/plugins/transforms/test_json_explode.py::TestJSONExplodeTypeViolations::test_non_iterable_value_crashes PASSED [ 90%]
tests/plugins/transforms/test_json_explode.py::TestJSONExplodeConfiguration::test_no_on_error_attribute PASSED [ 90%]
tests/plugins/transforms/test_json_explode.py::TestJSONExplodeConfiguration::test_array_field_is_required PASSED [ 90%]
tests/plugins/transforms/test_json_explode.py::TestJSONExplodeConfiguration::test_schema_is_required PASSED [ 90%]
tests/plugins/transforms/test_json_explode.py::TestJSONExplodeConfiguration::test_implements_transform_protocol PASSED [ 90%]
tests/plugins/transforms/test_json_explode.py::TestJSONExplodeConfiguration::test_has_name_attribute PASSED [ 91%]
tests/plugins/transforms/test_json_explode.py::TestJSONExplodeOutputSchema::test_output_schema_is_dynamic PASSED [ 91%]
tests/plugins/transforms/test_keyword_filter.py::TestKeywordFilterConfig::test_config_requires_fields PASSED [ 91%]
tests/plugins/transforms/test_keyword_filter.py::TestKeywordFilterConfig::test_config_requires_blocked_patterns PASSED [ 91%]
tests/plugins/transforms/test_keyword_filter.py::TestKeywordFilterConfig::test_config_accepts_single_field PASSED [ 91%]
tests/plugins/transforms/test_keyword_filter.py::TestKeywordFilterConfig::test_config_accepts_field_list PASSED [ 91%]
tests/plugins/transforms/test_keyword_filter.py::TestKeywordFilterConfig::test_config_accepts_all_keyword PASSED [ 91%]
tests/plugins/transforms/test_keyword_filter.py::TestKeywordFilterConfig::test_config_validates_patterns_not_empty PASSED [ 91%]
tests/plugins/transforms/test_keyword_filter.py::TestKeywordFilterInstantiation::test_transform_has_required_attributes PASSED [ 91%]
tests/plugins/transforms/test_keyword_filter.py::TestKeywordFilterInstantiation::test_transform_compiles_patterns_at_init PASSED [ 91%]
tests/plugins/transforms/test_keyword_filter.py::TestKeywordFilterInstantiation::test_transform_rejects_invalid_regex PASSED [ 91%]
tests/plugins/transforms/test_keyword_filter.py::TestKeywordFilterProcessing::test_row_without_matches_passes_through PASSED [ 91%]
tests/plugins/transforms/test_keyword_filter.py::TestKeywordFilterProcessing::test_row_with_match_returns_error PASSED [ 91%]
tests/plugins/transforms/test_keyword_filter.py::TestKeywordFilterProcessing::test_error_includes_context_snippet PASSED [ 91%]
tests/plugins/transforms/test_keyword_filter.py::TestKeywordFilterProcessing::test_scans_multiple_fields PASSED [ 91%]
tests/plugins/transforms/test_keyword_filter.py::TestKeywordFilterProcessing::test_all_keyword_scans_string_fields PASSED [ 91%]
tests/plugins/transforms/test_keyword_filter.py::TestKeywordFilterProcessing::test_skips_non_string_fields_when_all PASSED [ 91%]
tests/plugins/transforms/test_keyword_filter.py::TestKeywordFilterProcessing::test_case_sensitive_by_default PASSED [ 91%]
tests/plugins/transforms/test_keyword_filter.py::TestKeywordFilterProcessing::test_case_insensitive_with_flag PASSED [ 91%]
tests/plugins/transforms/test_keyword_filter.py::TestKeywordFilterProcessing::test_skips_missing_configured_field PASSED [ 91%]
tests/plugins/transforms/test_keyword_filter.py::TestKeywordFilterProcessing::test_detects_pattern_in_present_field_when_other_missing PASSED [ 91%]
tests/plugins/transforms/test_passthrough.py::TestPassThrough::test_implements_protocol PASSED [ 91%]
tests/plugins/transforms/test_passthrough.py::TestPassThrough::test_has_required_attributes PASSED [ 91%]
tests/plugins/transforms/test_passthrough.py::TestPassThrough::test_instance_has_schemas PASSED [ 91%]
tests/plugins/transforms/test_passthrough.py::TestPassThrough::test_process_returns_unchanged_row PASSED [ 91%]
tests/plugins/transforms/test_passthrough.py::TestPassThrough::test_process_with_nested_data PASSED [ 91%]
tests/plugins/transforms/test_passthrough.py::TestPassThrough::test_process_with_empty_row PASSED [ 91%]
tests/plugins/transforms/test_passthrough.py::TestPassThrough::test_close_is_idempotent PASSED [ 91%]
tests/plugins/transforms/test_passthrough.py::TestPassThrough::test_requires_schema_config PASSED [ 91%]
tests/plugins/transforms/test_passthrough.py::TestPassThrough::test_validate_input_rejects_wrong_type PASSED [ 91%]
tests/plugins/transforms/test_passthrough.py::TestPassThrough::test_validate_input_disabled_passes_wrong_type PASSED [ 91%]
tests/plugins/transforms/test_passthrough.py::TestPassThrough::test_validate_input_skipped_for_dynamic_schema PASSED [ 91%]
tests/plugins/transforms/test_passthrough.py::TestPassThrough::test_passthrough_validates_schema_compatibility PASSED [ 91%]
tests/property/canonical/test_hash_determinism.py::TestCanonicalJsonDeterminism::test_canonical_json_is_deterministic PASSED [ 92%]
tests/property/canonical/test_hash_determinism.py::TestCanonicalJsonDeterminism::test_canonical_json_returns_string PASSED [ 92%]
tests/property/canonical/test_hash_determinism.py::TestCanonicalJsonDeterminism::test_canonical_json_is_valid_json PASSED [ 92%]
tests/property/canonical/test_hash_determinism.py::TestCanonicalJsonDeterminism::test_canonical_json_sorts_keys_deterministically PASSED [ 92%]
tests/property/canonical/test_hash_determinism.py::TestStableHashDeterminism::test_stable_hash_is_deterministic PASSED [ 92%]
tests/property/canonical/test_hash_determinism.py::TestStableHashDeterminism::test_stable_hash_returns_hex_string PASSED [ 92%]
tests/property/canonical/test_hash_determinism.py::TestStableHashDeterminism::test_different_data_different_hash PASSED [ 92%]
tests/property/canonical/test_hash_determinism.py::TestStableHashDeterminism::test_hash_version_parameter_works PASSED [ 92%]
tests/property/canonical/test_hash_determinism.py::TestPandasNumpyNormalization::test_numpy_int64_deterministic PASSED [ 92%]
tests/property/canonical/test_hash_determinism.py::TestPandasNumpyNormalization::test_numpy_int64_same_as_python_int PASSED [ 92%]
tests/property/canonical/test_hash_determinism.py::TestPandasNumpyNormalization::test_numpy_float64_deterministic PASSED [ 92%]
tests/property/canonical/test_hash_determinism.py::TestPandasNumpyNormalization::test_numpy_bool_same_as_python_bool PASSED [ 92%]
tests/property/canonical/test_hash_determinism.py::TestPandasNumpyNormalization::test_pandas_timestamp_deterministic PASSED [ 92%]
tests/property/canonical/test_hash_determinism.py::TestPandasNumpyNormalization::test_pandas_nat_deterministic PASSED [ 92%]
tests/property/canonical/test_hash_determinism.py::TestPandasNumpyNormalization::test_pandas_na_deterministic PASSED [ 92%]
tests/property/canonical/test_hash_determinism.py::TestSpecialTypes::test_bytes_deterministic PASSED [ 92%]
tests/property/canonical/test_hash_determinism.py::TestSpecialTypes::test_decimal_deterministic PASSED [ 92%]
tests/property/canonical/test_hash_determinism.py::TestSpecialTypes::test_datetime_utc_deterministic PASSED [ 92%]
tests/property/canonical/test_hash_determinism.py::TestSpecialTypes::test_naive_datetime_treated_as_utc PASSED [ 92%]
tests/property/canonical/test_hash_determinism.py::TestStructuralProperties::test_canonical_json_no_whitespace PASSED [ 92%]
tests/property/canonical/test_hash_determinism.py::TestStructuralProperties::test_dict_key_order_independent PASSED [ 92%]
tests/property/canonical/test_hash_determinism.py::TestStructuralProperties::test_list_order_matters PASSED [ 92%]
tests/property/canonical/test_nan_rejection.py::TestNaNRejection::test_python_nan_rejected_in_canonical_json PASSED [ 92%]
tests/property/canonical/test_nan_rejection.py::TestNaNRejection::test_python_nan_rejected_in_stable_hash PASSED [ 92%]
tests/property/canonical/test_nan_rejection.py::TestNaNRejection::test_numpy_nan_rejected_in_canonical_json PASSED [ 92%]
tests/property/canonical/test_nan_rejection.py::TestNaNRejection::test_numpy_nan_rejected_in_stable_hash PASSED [ 92%]
tests/property/canonical/test_nan_rejection.py::TestNaNRejection::test_nan_in_dict_value_rejected PASSED [ 92%]
tests/property/canonical/test_nan_rejection.py::TestNaNRejection::test_nan_in_list_rejected PASSED [ 92%]
tests/property/canonical/test_nan_rejection.py::TestNaNRejection::test_nan_deeply_nested_rejected PASSED [ 92%]
tests/property/canonical/test_nan_rejection.py::TestInfinityRejection::test_python_infinity_rejected_in_canonical_json PASSED [ 92%]
tests/property/canonical/test_nan_rejection.py::TestInfinityRejection::test_python_infinity_rejected_in_stable_hash PASSED [ 92%]
tests/property/canonical/test_nan_rejection.py::TestInfinityRejection::test_numpy_infinity_rejected_in_canonical_json PASSED [ 92%]
tests/property/canonical/test_nan_rejection.py::TestInfinityRejection::test_numpy_infinity_rejected_in_stable_hash PASSED [ 92%]
tests/property/canonical/test_nan_rejection.py::TestInfinityRejection::test_infinity_in_dict_value_rejected PASSED [ 92%]
tests/property/canonical/test_nan_rejection.py::TestInfinityRejection::test_infinity_in_list_rejected PASSED [ 93%]
tests/property/canonical/test_nan_rejection.py::TestInfinityRejection::test_positive_and_negative_infinity_both_rejected PASSED [ 93%]
tests/property/canonical/test_nan_rejection.py::TestNonFiniteEdgeCases::test_nan_not_equal_to_itself_doesnt_bypass_check PASSED [ 93%]
tests/property/canonical/test_nan_rejection.py::TestNonFiniteEdgeCases::test_mixed_valid_and_invalid_rejected PASSED [ 93%]
tests/property/canonical/test_nan_rejection.py::TestNonFiniteEdgeCases::test_non_finite_in_numpy_array_rejected PASSED [ 93%]
tests/property/canonical/test_nan_rejection.py::TestNonFiniteEdgeCases::test_very_large_float_not_infinity PASSED [ 93%]
tests/property/canonical/test_nan_rejection.py::TestNonFiniteEdgeCases::test_very_small_float_not_zero PASSED [ 93%]
tests/property/canonical/test_nan_rejection.py::TestValidFloatsAccepted::test_finite_floats_accepted PASSED [ 93%]
tests/property/canonical/test_nan_rejection.py::TestValidFloatsAccepted::test_finite_floats_in_dict_accepted PASSED [ 93%]
tests/property/canonical/test_nan_rejection.py::TestValidFloatsAccepted::test_zero_accepted PASSED [ 93%]
tests/property/canonical/test_nan_rejection.py::TestValidFloatsAccepted::test_special_float_values_accepted PASSED [ 93%]
tests/property/contracts/test_enum_coercion.py::TestRunStatusCoercion::test_valid_enum_member_roundtrips PASSED [ 93%]
tests/property/contracts/test_enum_coercion.py::TestRunStatusCoercion::test_valid_string_coerces_to_enum PASSED [ 93%]
tests/property/contracts/test_enum_coercion.py::TestRunStatusCoercion::test_invalid_string_raises_valueerror PASSED [ 93%]
tests/property/contracts/test_enum_coercion.py::TestNodeStateStatusCoercion::test_valid_enum_member_roundtrips PASSED [ 93%]
tests/property/contracts/test_enum_coercion.py::TestNodeStateStatusCoercion::test_invalid_string_raises_valueerror PASSED [ 93%]
tests/property/contracts/test_enum_coercion.py::TestBatchStatusCoercion::test_valid_enum_member_roundtrips PASSED [ 93%]
tests/property/contracts/test_enum_coercion.py::TestBatchStatusCoercion::test_invalid_string_raises_valueerror PASSED [ 93%]
tests/property/contracts/test_enum_coercion.py::TestDeterminismCoercion::test_valid_enum_member_roundtrips PASSED [ 93%]
tests/property/contracts/test_enum_coercion.py::TestDeterminismCoercion::test_invalid_string_raises_valueerror PASSED [ 93%]
tests/property/contracts/test_enum_coercion.py::TestNodeTypeCoercion::test_valid_enum_member_roundtrips PASSED [ 93%]
tests/property/contracts/test_enum_coercion.py::TestNodeTypeCoercion::test_invalid_string_raises_valueerror PASSED [ 93%]
tests/property/contracts/test_enum_coercion.py::TestRoutingKindCoercion::test_valid_enum_member_roundtrips PASSED [ 93%]
tests/property/contracts/test_enum_coercion.py::TestRoutingKindCoercion::test_invalid_string_raises_valueerror PASSED [ 93%]
tests/property/contracts/test_enum_coercion.py::TestRoutingModeCoercion::test_valid_enum_member_roundtrips PASSED [ 93%]
tests/property/contracts/test_enum_coercion.py::TestRoutingModeCoercion::test_invalid_string_raises_valueerror PASSED [ 93%]
tests/property/contracts/test_enum_coercion.py::TestTriggerTypeCoercion::test_valid_enum_member_roundtrips PASSED [ 93%]
tests/property/contracts/test_enum_coercion.py::TestTriggerTypeCoercion::test_invalid_string_raises_valueerror PASSED [ 93%]
tests/property/contracts/test_enum_coercion.py::TestCallTypeCoercion::test_valid_enum_member_roundtrips PASSED [ 93%]
tests/property/contracts/test_enum_coercion.py::TestCallTypeCoercion::test_invalid_string_raises_valueerror PASSED [ 93%]
tests/property/contracts/test_enum_coercion.py::TestCallStatusCoercion::test_valid_enum_member_roundtrips PASSED [ 93%]
tests/property/contracts/test_enum_coercion.py::TestCallStatusCoercion::test_invalid_string_raises_valueerror PASSED [ 93%]
tests/property/contracts/test_enum_coercion.py::TestExportStatusCoercion::test_valid_enum_member_roundtrips PASSED [ 93%]
tests/property/contracts/test_enum_coercion.py::TestExportStatusCoercion::test_invalid_string_raises_valueerror PASSED [ 94%]
tests/property/contracts/test_enum_coercion.py::TestRowOutcomeCoercion::test_valid_enum_member_roundtrips PASSED [ 94%]
tests/property/contracts/test_enum_coercion.py::TestRowOutcomeCoercion::test_valid_string_coerces_to_enum PASSED [ 94%]
tests/property/contracts/test_enum_coercion.py::TestRowOutcomeCoercion::test_invalid_string_raises_valueerror PASSED [ 94%]
tests/property/contracts/test_enum_coercion.py::TestRowOutcomeCoercion::test_is_terminal_property_consistent PASSED [ 94%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_all_members_have_string_values[RunStatus] PASSED [ 94%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_all_members_have_string_values[NodeStateStatus] PASSED [ 94%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_all_members_have_string_values[ExportStatus] PASSED [ 94%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_all_members_have_string_values[BatchStatus] PASSED [ 94%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_all_members_have_string_values[TriggerType] PASSED [ 94%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_all_members_have_string_values[NodeType] PASSED [ 94%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_all_members_have_string_values[Determinism] PASSED [ 94%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_all_members_have_string_values[RoutingKind] PASSED [ 94%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_all_members_have_string_values[RoutingMode] PASSED [ 94%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_all_members_have_string_values[CallType] PASSED [ 94%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_all_members_have_string_values[CallStatus] PASSED [ 94%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_all_members_have_string_values[RowOutcome] PASSED [ 94%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_all_values_are_lowercase[RunStatus] PASSED [ 94%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_all_values_are_lowercase[NodeStateStatus] PASSED [ 94%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_all_values_are_lowercase[ExportStatus] PASSED [ 94%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_all_values_are_lowercase[BatchStatus] PASSED [ 94%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_all_values_are_lowercase[TriggerType] PASSED [ 94%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_all_values_are_lowercase[NodeType] PASSED [ 94%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_all_values_are_lowercase[Determinism] PASSED [ 94%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_all_values_are_lowercase[RoutingKind] PASSED [ 94%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_all_values_are_lowercase[RoutingMode] PASSED [ 94%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_all_values_are_lowercase[CallType] PASSED [ 94%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_all_values_are_lowercase[CallStatus] PASSED [ 94%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_all_values_are_lowercase[RowOutcome] PASSED [ 94%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_no_duplicate_values[RunStatus] PASSED [ 94%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_no_duplicate_values[NodeStateStatus] PASSED [ 94%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_no_duplicate_values[ExportStatus] PASSED [ 94%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_no_duplicate_values[BatchStatus] PASSED [ 94%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_no_duplicate_values[TriggerType] PASSED [ 94%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_no_duplicate_values[NodeType] PASSED [ 95%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_no_duplicate_values[Determinism] PASSED [ 95%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_no_duplicate_values[RoutingKind] PASSED [ 95%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_no_duplicate_values[RoutingMode] PASSED [ 95%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_no_duplicate_values[CallType] PASSED [ 95%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_no_duplicate_values[CallStatus] PASSED [ 95%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_no_duplicate_values[RowOutcome] PASSED [ 95%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_string_conversion_roundtrips[RunStatus] PASSED [ 95%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_string_conversion_roundtrips[NodeStateStatus] PASSED [ 95%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_string_conversion_roundtrips[ExportStatus] PASSED [ 95%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_string_conversion_roundtrips[BatchStatus] PASSED [ 95%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_string_conversion_roundtrips[TriggerType] PASSED [ 95%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_string_conversion_roundtrips[NodeType] PASSED [ 95%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_string_conversion_roundtrips[Determinism] PASSED [ 95%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_string_conversion_roundtrips[RoutingKind] PASSED [ 95%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_string_conversion_roundtrips[RoutingMode] PASSED [ 95%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_string_conversion_roundtrips[CallType] PASSED [ 95%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_string_conversion_roundtrips[CallStatus] PASSED [ 95%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_string_conversion_roundtrips[RowOutcome] PASSED [ 95%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_invalid_empty_string_rejected[RunStatus] PASSED [ 95%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_invalid_empty_string_rejected[NodeStateStatus] PASSED [ 95%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_invalid_empty_string_rejected[ExportStatus] PASSED [ 95%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_invalid_empty_string_rejected[BatchStatus] PASSED [ 95%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_invalid_empty_string_rejected[TriggerType] PASSED [ 95%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_invalid_empty_string_rejected[NodeType] PASSED [ 95%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_invalid_empty_string_rejected[Determinism] PASSED [ 95%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_invalid_empty_string_rejected[RoutingKind] PASSED [ 95%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_invalid_empty_string_rejected[RoutingMode] PASSED [ 95%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_invalid_empty_string_rejected[CallType] PASSED [ 95%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_invalid_empty_string_rejected[CallStatus] PASSED [ 95%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_invalid_empty_string_rejected[RowOutcome] PASSED [ 95%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_invalid_uppercase_variant_rejected[RunStatus] PASSED [ 95%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_invalid_uppercase_variant_rejected[NodeStateStatus] PASSED [ 95%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_invalid_uppercase_variant_rejected[ExportStatus] PASSED [ 96%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_invalid_uppercase_variant_rejected[BatchStatus] PASSED [ 96%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_invalid_uppercase_variant_rejected[TriggerType] PASSED [ 96%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_invalid_uppercase_variant_rejected[NodeType] PASSED [ 96%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_invalid_uppercase_variant_rejected[Determinism] PASSED [ 96%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_invalid_uppercase_variant_rejected[RoutingKind] PASSED [ 96%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_invalid_uppercase_variant_rejected[RoutingMode] PASSED [ 96%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_invalid_uppercase_variant_rejected[CallType] PASSED [ 96%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_invalid_uppercase_variant_rejected[CallStatus] PASSED [ 96%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_invalid_uppercase_variant_rejected[RowOutcome] PASSED [ 96%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_invalid_whitespace_variant_rejected[RunStatus] PASSED [ 96%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_invalid_whitespace_variant_rejected[NodeStateStatus] PASSED [ 96%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_invalid_whitespace_variant_rejected[ExportStatus] PASSED [ 96%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_invalid_whitespace_variant_rejected[BatchStatus] PASSED [ 96%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_invalid_whitespace_variant_rejected[TriggerType] PASSED [ 96%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_invalid_whitespace_variant_rejected[NodeType] PASSED [ 96%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_invalid_whitespace_variant_rejected[Determinism] PASSED [ 96%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_invalid_whitespace_variant_rejected[RoutingKind] PASSED [ 96%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_invalid_whitespace_variant_rejected[RoutingMode] PASSED [ 96%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_invalid_whitespace_variant_rejected[CallType] PASSED [ 96%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_invalid_whitespace_variant_rejected[CallStatus] PASSED [ 96%]
tests/property/contracts/test_enum_coercion.py::TestAllDatabaseEnumsConsistent::test_invalid_whitespace_variant_rejected[RowOutcome] PASSED [ 96%]
tests/scripts/cicd/test_no_bug_hiding.py::TestR1DictGet::test_detects_dict_get_call PASSED [ 96%]
tests/scripts/cicd/test_no_bug_hiding.py::TestR1DictGet::test_detects_dict_get_with_default PASSED [ 96%]
tests/scripts/cicd/test_no_bug_hiding.py::TestR1DictGet::test_detects_chained_dict_get PASSED [ 96%]
tests/scripts/cicd/test_no_bug_hiding.py::TestR1DictGet::test_get_in_function_context PASSED [ 96%]
tests/scripts/cicd/test_no_bug_hiding.py::TestR1DictGet::test_get_in_class_method_context PASSED [ 96%]
tests/scripts/cicd/test_no_bug_hiding.py::TestR2Getattr::test_detects_getattr_with_default PASSED [ 96%]
tests/scripts/cicd/test_no_bug_hiding.py::TestR2Getattr::test_ignores_getattr_without_default PASSED [ 96%]
tests/scripts/cicd/test_no_bug_hiding.py::TestR2Getattr::test_detects_getattr_with_keyword_default PASSED [ 96%]
tests/scripts/cicd/test_no_bug_hiding.py::TestR3Hasattr::test_detects_hasattr PASSED [ 96%]
tests/scripts/cicd/test_no_bug_hiding.py::TestR3Hasattr::test_hasattr_in_condition PASSED [ 96%]
tests/scripts/cicd/test_no_bug_hiding.py::TestR4BroadExcept::test_detects_bare_except PASSED [ 96%]
tests/scripts/cicd/test_no_bug_hiding.py::TestR4BroadExcept::test_detects_except_exception PASSED [ 96%]
tests/scripts/cicd/test_no_bug_hiding.py::TestR4BroadExcept::test_detects_except_exception_as_e PASSED [ 97%]
tests/scripts/cicd/test_no_bug_hiding.py::TestR4BroadExcept::test_ignores_except_with_reraise PASSED [ 97%]
tests/scripts/cicd/test_no_bug_hiding.py::TestR4BroadExcept::test_ignores_except_with_raise_new PASSED [ 97%]
tests/scripts/cicd/test_no_bug_hiding.py::TestR4BroadExcept::test_ignores_specific_exceptions PASSED [ 97%]
tests/scripts/cicd/test_no_bug_hiding.py::TestR4BroadExcept::test_detects_except_base_exception PASSED [ 97%]
tests/scripts/cicd/test_no_bug_hiding.py::TestFinding::test_canonical_key_module_level PASSED [ 97%]
tests/scripts/cicd/test_no_bug_hiding.py::TestFinding::test_canonical_key_function PASSED [ 97%]
tests/scripts/cicd/test_no_bug_hiding.py::TestFinding::test_canonical_key_class_method PASSED [ 97%]
tests/scripts/cicd/test_no_bug_hiding.py::TestAllowlistMatching::test_exact_match PASSED [ 97%]
tests/scripts/cicd/test_no_bug_hiding.py::TestAllowlistMatching::test_no_match PASSED [ 97%]
tests/scripts/cicd/test_no_bug_hiding.py::TestStaleDetection::test_unmatched_entry_is_stale PASSED [ 97%]
tests/scripts/cicd/test_no_bug_hiding.py::TestStaleDetection::test_matched_entry_not_stale PASSED [ 97%]
tests/scripts/cicd/test_no_bug_hiding.py::TestExpiryDetection::test_expired_entry_detected PASSED [ 97%]
tests/scripts/cicd/test_no_bug_hiding.py::TestExpiryDetection::test_future_entry_not_expired PASSED [ 97%]
tests/scripts/cicd/test_no_bug_hiding.py::TestExpiryDetection::test_no_expiry_not_expired PASSED [ 97%]
tests/scripts/cicd/test_no_bug_hiding.py::TestYAMLLoading::test_load_empty_file PASSED [ 97%]
tests/scripts/cicd/test_no_bug_hiding.py::TestYAMLLoading::test_load_with_entries PASSED [ 97%]
tests/scripts/cicd/test_no_bug_hiding.py::TestYAMLLoading::test_load_nonexistent_file PASSED [ 97%]
tests/scripts/cicd/test_no_bug_hiding.py::TestFileScanning::test_scan_file_with_violations PASSED [ 97%]
tests/scripts/cicd/test_no_bug_hiding.py::TestFileScanning::test_scan_file_no_violations PASSED [ 97%]
tests/scripts/cicd/test_no_bug_hiding.py::TestFileScanning::test_scan_file_syntax_error PASSED [ 97%]
tests/scripts/cicd/test_no_bug_hiding.py::TestIntegration::test_finding_allowlisted_and_stale_detection PASSED [ 97%]
tests/scripts/test_check_contracts.py::test_finds_dataclass_definitions PASSED [ 97%]
tests/scripts/test_check_contracts.py::test_finds_dataclass_with_args PASSED [ 97%]
tests/scripts/test_check_contracts.py::test_finds_enum_definitions PASSED [ 97%]
tests/scripts/test_check_contracts.py::test_finds_typeddict_definitions PASSED [ 97%]
tests/scripts/test_check_contracts.py::test_finds_namedtuple_definitions PASSED [ 97%]
tests/scripts/test_check_contracts.py::test_ignores_pydantic_basemodel PASSED [ 97%]
tests/scripts/test_check_contracts.py::test_ignores_plugin_schema PASSED [ 97%]
tests/scripts/test_check_contracts.py::test_finds_multiple_definitions PASSED [ 97%]
tests/scripts/test_check_contracts.py::test_whitelist_loading PASSED     [ 97%]
tests/scripts/test_check_contracts.py::test_whitelist_loading_empty_file PASSED [ 97%]
tests/scripts/test_check_contracts.py::test_whitelist_loading_nonexistent_file PASSED [ 97%]
tests/scripts/test_check_contracts.py::test_whitelist_loading_multiple_entries PASSED [ 98%]
tests/scripts/test_check_contracts.py::test_handles_syntax_errors PASSED [ 98%]
tests/scripts/test_check_contracts.py::test_handles_unicode_errors PASSED [ 98%]
tests/system/audit_verification/test_lineage_completeness.py::TestLineageCompleteness::test_simple_pipeline_runs PASSED [ 98%]
tests/system/audit_verification/test_lineage_completeness.py::TestLineageCompleteness::test_multi_transform_pipeline_runs PASSED [ 98%]
tests/system/audit_verification/test_lineage_completeness.py::TestLineageAfterRetention::test_lineage_available_after_payload_purge SKIPPED [ 98%]
tests/system/audit_verification/test_lineage_completeness.py::TestExplainQueryFunctionality::test_explain_returns_source_data SKIPPED [ 98%]
tests/system/audit_verification/test_lineage_completeness.py::TestExplainQueryFunctionality::test_explain_returns_transform_history SKIPPED [ 98%]
tests/system/recovery/test_crash_recovery.py::TestResumeIdempotence::test_resume_produces_same_result SKIPPED [ 98%]
tests/system/recovery/test_crash_recovery.py::TestRetryBehavior::test_pipeline_with_failed_transform_records_failure SKIPPED [ 98%]
tests/system/recovery/test_crash_recovery.py::TestCheckpointRecovery::test_checkpoint_preserves_partial_progress SKIPPED [ 98%]
tests/system/recovery/test_crash_recovery.py::TestCheckpointRecovery::test_checkpoint_across_process_restart SKIPPED [ 98%]
tests/system/recovery/test_crash_recovery.py::TestAggregationRecovery::test_aggregation_state_recovers SKIPPED [ 98%]
tests/tui/test_constants.py::TestWidgetIDs::test_widget_ids_class_exists PASSED [ 98%]
tests/tui/test_constants.py::TestWidgetIDs::test_lineage_tree_constant_exists PASSED [ 98%]
tests/tui/test_constants.py::TestWidgetIDs::test_detail_panel_constant_exists PASSED [ 98%]
tests/tui/test_constants.py::TestWidgetIDs::test_constants_are_valid_css_ids PASSED [ 98%]
tests/tui/test_constants.py::TestWidgetIDsIntegration::test_widgets_use_constant_ids PASSED [ 98%]
tests/tui/test_constants.py::TestWidgetIDsIntegration::test_css_targets_correct_widgets PASSED [ 98%]
tests/tui/test_explain_app.py::TestExplainApp::test_app_exists PASSED    [ 98%]
tests/tui/test_explain_app.py::TestExplainApp::test_app_starts PASSED    [ 98%]
tests/tui/test_explain_app.py::TestExplainApp::test_app_has_header PASSED [ 98%]
tests/tui/test_explain_app.py::TestExplainApp::test_app_has_footer PASSED [ 98%]
tests/tui/test_explain_app.py::TestExplainApp::test_quit_keybinding PASSED [ 98%]
tests/tui/test_graceful_degradation.py::TestNodeDetailPanelGracefulDegradation::test_handles_arbitrary_optional_fields PASSED [ 98%]
tests/tui/test_graceful_degradation.py::TestNodeDetailPanelGracefulDegradation::test_update_state_handles_arbitrary_optional_data PASSED [ 98%]
tests/tui/test_graceful_degradation.py::TestNodeDetailPanelGracefulDegradation::test_state_transitions_are_safe PASSED [ 98%]
tests/tui/test_lineage_tree.py::TestLineageTreeWidget::test_can_import_widget PASSED [ 98%]
tests/tui/test_lineage_tree.py::TestLineageTreeWidget::test_widget_accepts_lineage_data PASSED [ 98%]
tests/tui/test_lineage_tree.py::TestLineageTreeWidget::test_widget_builds_tree_structure PASSED [ 98%]
tests/tui/test_lineage_tree.py::TestLineageTreeWidget::test_widget_with_empty_transforms PASSED [ 98%]
tests/tui/test_lineage_tree.py::TestLineageTreeWidget::test_widget_with_forked_tokens PASSED [ 98%]
tests/tui/test_lineage_tree.py::TestLineageTreeWidget::test_toggle_node_expansion PASSED [ 98%]
tests/tui/test_lineage_tree.py::TestLineageTreeWidget::test_get_node_by_id PASSED [ 98%]
tests/tui/test_lineage_types.py::TestLineageDataContract::test_valid_lineage_data PASSED [ 99%]
tests/tui/test_lineage_types.py::TestLineageDataContract::test_source_info_contract PASSED [ 99%]
tests/tui/test_lineage_types.py::TestLineageDataContract::test_source_info_with_none_node_id PASSED [ 99%]
tests/tui/test_lineage_types.py::TestLineageDataContract::test_node_info_contract PASSED [ 99%]
tests/tui/test_lineage_types.py::TestLineageDataContract::test_node_info_with_none_node_id PASSED [ 99%]
tests/tui/test_lineage_types.py::TestLineageDataContract::test_token_info_contract PASSED [ 99%]
tests/tui/test_lineage_types.py::TestLineageDataContract::test_token_info_with_empty_path PASSED [ 99%]
tests/tui/test_lineage_types.py::TestLineageDataContract::test_lineage_data_complete_example PASSED [ 99%]
tests/tui/test_lineage_types.py::TestLineageDataContract::test_lineage_data_empty_transforms_and_tokens PASSED [ 99%]
tests/tui/test_lineage_types.py::TestLineageDataWithLineageTree::test_lineage_tree_accepts_lineage_data PASSED [ 99%]
tests/tui/test_lineage_types.py::TestLineageDataWithLineageTree::test_lineage_tree_rejects_missing_run_id PASSED [ 99%]
tests/tui/test_lineage_types.py::TestLineageDataWithLineageTree::test_lineage_tree_rejects_missing_source PASSED [ 99%]
tests/tui/test_lineage_types.py::TestLineageDataWithLineageTree::test_lineage_tree_rejects_malformed_source PASSED [ 99%]
tests/tui/test_node_detail.py::TestNodeDetailPanel::test_can_import_widget PASSED [ 99%]
tests/tui/test_node_detail.py::TestNodeDetailPanel::test_display_transform_state PASSED [ 99%]
tests/tui/test_node_detail.py::TestNodeDetailPanel::test_display_failed_state PASSED [ 99%]
tests/tui/test_node_detail.py::TestNodeDetailPanel::test_display_source_state PASSED [ 99%]
tests/tui/test_node_detail.py::TestNodeDetailPanel::test_display_sink_state PASSED [ 99%]
tests/tui/test_node_detail.py::TestNodeDetailPanel::test_empty_state PASSED [ 99%]
tests/tui/test_node_detail.py::TestNodeDetailPanel::test_update_state PASSED [ 99%]
tests/tui/test_node_detail.py::TestNodeDetailPanel::test_format_size_bytes PASSED [ 99%]
tests/tui/test_node_detail.py::TestNodeDetailPanel::test_malformed_error_json_logs_warning PASSED [ 99%]
tests/unit/plugins/transforms/test_truncate.py::TestTruncate::test_truncates_long_string PASSED [ 99%]
tests/unit/plugins/transforms/test_truncate.py::TestTruncate::test_preserves_short_string PASSED [ 99%]
tests/unit/plugins/transforms/test_truncate.py::TestTruncate::test_truncates_with_suffix PASSED [ 99%]
tests/unit/plugins/transforms/test_truncate.py::TestTruncate::test_no_suffix_when_not_truncated PASSED [ 99%]
tests/unit/plugins/transforms/test_truncate.py::TestTruncate::test_multiple_fields PASSED [ 99%]
tests/unit/plugins/transforms/test_truncate.py::TestTruncate::test_missing_field_non_strict PASSED [ 99%]
tests/unit/plugins/transforms/test_truncate.py::TestTruncate::test_missing_field_strict PASSED [ 99%]
tests/unit/plugins/transforms/test_truncate.py::TestTruncate::test_non_string_field_unchanged PASSED [ 99%]
tests/unit/plugins/transforms/test_truncate.py::TestTruncate::test_preserves_unspecified_fields PASSED [ 99%]
tests/unit/plugins/transforms/test_truncate.py::TestTruncate::test_suffix_length_validation PASSED [ 99%]
tests/unit/plugins/transforms/test_truncate.py::TestTruncate::test_exact_length_not_truncated PASSED [ 99%]
tests/unit/plugins/transforms/test_truncate.py::TestTruncate::test_empty_string PASSED [100%]

=================================== FAILURES ===================================
_______ TestCoalesceWiring.test_orchestrator_computes_coalesce_step_map ________
src/elspeth/core/dag.py:198: in topological_order
    return list(nx.topological_sort(self._graph))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/networkx/algorithms/dag.py:308: in topological_sort
    for generation in nx.topological_generations(G):
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/networkx/algorithms/dag.py:238: in topological_generations
    raise nx.NetworkXUnfeasible(
E   networkx.exception.NetworkXUnfeasible: Graph contains a cycle or graph changed during iteration

The above exception was the direct cause of the following exception:
tests/engine/test_orchestrator.py:4678: in test_orchestrator_computes_coalesce_step_map
    orchestrator.run(config, graph=graph, settings=settings)
src/elspeth/engine/orchestrator.py:464: in run
    result = self._execute_run(
src/elspeth/engine/orchestrator.py:606: in _execute_run
    execution_order = graph.topological_order()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^
src/elspeth/core/dag.py:200: in topological_order
    raise GraphValidationError(f"Cannot sort graph: {e}") from e
E   elspeth.core.dag.GraphValidationError: Cannot sort graph: Graph contains a cycle or graph changed during iteration
____________________ test_end_to_end_validation_performance ____________________
tests/performance/test_baseline_schema_validation.py:187: in test_end_to_end_validation_performance
    graph.validate()
src/elspeth/core/dag.py:157: in validate
    raise GraphValidationError(f"Graph contains a cycle: {cycle_str}")
E   elspeth.core.dag.GraphValidationError: Graph contains a cycle: transform_passthrough_43e2bbfa24a1
=============================== warnings summary ===============================
tests/core/test_events.py:11
  /home/john/elspeth-rapid/tests/core/test_events.py:11: PytestCollectionWarning: cannot collect test class 'TestEvent' because it has a __init__ constructor (from: tests/core/test_events.py)
    @dataclass(frozen=True)

tests/performance/test_baseline_schema_validation.py:18
  /home/john/elspeth-rapid/tests/performance/test_baseline_schema_validation.py:18: PytestUnknownMarkWarning: Unknown pytest.mark.performance - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.performance

tests/performance/test_baseline_schema_validation.py:77
  /home/john/elspeth-rapid/tests/performance/test_baseline_schema_validation.py:77: PytestUnknownMarkWarning: Unknown pytest.mark.performance - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.performance

tests/performance/test_baseline_schema_validation.py:136
  /home/john/elspeth-rapid/tests/performance/test_baseline_schema_validation.py:136: PytestUnknownMarkWarning: Unknown pytest.mark.performance - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.performance

tests/engine/test_expression_parser.py::TestExpressionParserFuzz::test_valid_expression_with_garbage
  <unknown>:1: SyntaxWarning: invalid escape sequence '\i'

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
SKIPPED [1] tests/core/test_dag.py:318: Method deleted in Task 2, will be restored in Task 2.5
SKIPPED [1] tests/core/test_dag.py:342: Method deleted in Task 2, will be restored in Task 2.5
SKIPPED [1] tests/core/test_dag.py:357: Method deleted in Task 2, will be restored in Task 2.5
SKIPPED [1] tests/core/test_dag.py:406: Method deleted in Task 2, will be restored in Task 2.5
SKIPPED [1] tests/core/test_dag.py:427: Method deleted in Task 2, will be restored in Task 2.5
SKIPPED [1] tests/core/test_dag.py:463: Method deleted in Task 2, will be restored in Task 2.5
SKIPPED [1] tests/core/test_dag.py:1666: Schema validation removed from DAG layer in Task 2, will be restored in Task 2.5
SKIPPED [1] tests/core/test_dag.py:1747: Schema validation removed from DAG layer in Task 2, will be restored in Task 2.5
SKIPPED [1] tests/core/test_dag.py:1865: Schema validation removed from DAG layer in Task 2, will be restored in Task 2.5
SKIPPED [1] tests/core/test_dag.py:1907: Schema validation removed from DAG layer in Task 2, will be restored in Task 2.5
SKIPPED [1] tests/core/test_dag.py:2013: Method deleted in Task 2, will be restored in Task 2.5
SKIPPED [1] tests/core/test_dag.py:2051: Method deleted in Task 2, will be restored in Task 2.5
SKIPPED [1] tests/core/test_dag.py:2163: Helper function deleted in Task 2, will be restored in Task 2.5
SKIPPED [1] tests/engine/test_processor_outcomes.py:40: COMPLETED outcomes now recorded by orchestrator, not processor (architecture change)
SKIPPED [1] tests/engine/test_processor_outcomes.py:110: COMPLETED outcomes now recorded by orchestrator, not processor (architecture change)
SKIPPED [1] tests/integration/test_keyvault_fingerprint.py:31: ELSPETH_KEYVAULT_URL not set - skipping Key Vault integration test
SKIPPED [1] tests/integration/test_schema_validation_integration.py:148: No static schema plugins available for testing
SKIPPED [1] tests/system/audit_verification/test_lineage_completeness.py:246: Payload retention not yet implemented
SKIPPED [1] tests/system/audit_verification/test_lineage_completeness.py:259: Explain CLI not yet integrated with system tests
SKIPPED [1] tests/system/audit_verification/test_lineage_completeness.py:264: Explain CLI not yet integrated with system tests
SKIPPED [1] tests/system/recovery/test_crash_recovery.py:116: Resume functionality requires checkpoint implementation
SKIPPED [1] tests/system/recovery/test_crash_recovery.py:131: Requires on_error configuration for error-returning transforms
SKIPPED [1] tests/system/recovery/test_crash_recovery.py:192: Checkpoint recovery not yet implemented
SKIPPED [1] tests/system/recovery/test_crash_recovery.py:197: Checkpoint recovery not yet implemented
SKIPPED [1] tests/system/recovery/test_crash_recovery.py:206: Aggregation recovery requires stateful testing
FAILED tests/engine/test_orchestrator.py::TestCoalesceWiring::test_orchestrator_computes_coalesce_step_map
FAILED tests/performance/test_baseline_schema_validation.py::test_end_to_end_validation_performance
====== 2 failed, 3328 passed, 25 skipped, 5 warnings in 119.87s (0:01:59) ======
