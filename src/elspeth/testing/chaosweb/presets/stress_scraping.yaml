# ChaosWeb Preset: stress_scraping
# Purpose: Heavy anti-scraping simulation for resilience testing.
# Use when: Verifying retry logic, backoff behavior, and error routing under pressure.

server:
  host: "127.0.0.1"
  port: 8200
  workers: 4

metrics:
  database: "file:chaosweb-metrics?mode=memory&cache=shared"
  timeseries_bucket_sec: 1

content:
  mode: random
  random:
    min_words: 50
    max_words: 300
    vocabulary: english

latency:
  base_ms: 500
  jitter_ms: 200

error_injection:
  # Heavy anti-scraping
  rate_limit_pct: 15.0
  forbidden_pct: 10.0
  not_found_pct: 3.0
  service_unavailable_pct: 5.0
  retry_after_sec: [10, 60]

  # Connection-level stress
  timeout_pct: 5.0
  timeout_sec: [30, 60]
  slow_response_pct: 8.0
  slow_response_sec: [5, 20]
  connection_reset_pct: 3.0
  incomplete_response_pct: 2.0
  incomplete_response_bytes: [200, 800]

  # Content malformations
  wrong_content_type_pct: 3.0
  encoding_mismatch_pct: 2.0
  truncated_html_pct: 2.0
  charset_confusion_pct: 1.0

  # SSRF redirect testing
  ssrf_redirect_pct: 1.0

  # Aggressive anti-bot burst escalation
  burst:
    enabled: true
    interval_sec: 60
    duration_sec: 10
    rate_limit_pct: 80
    forbidden_pct: 50
