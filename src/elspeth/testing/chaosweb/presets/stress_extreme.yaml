# ChaosWeb Preset: stress_extreme
# Purpose: Maximum stress for breaking-point resilience testing.
# Use when: Finding failure modes, verifying graceful degradation, stress testing retries.

server:
  host: "127.0.0.1"
  port: 8200
  workers: 4

metrics:
  database: "file:chaosweb-metrics?mode=memory&cache=shared"
  timeseries_bucket_sec: 1

content:
  mode: random
  random:
    min_words: 20
    max_words: 100
    vocabulary: english

latency:
  base_ms: 800
  jitter_ms: 400

error_injection:
  # Extreme anti-scraping
  rate_limit_pct: 25.0
  forbidden_pct: 15.0
  not_found_pct: 5.0
  gone_pct: 2.0
  unavailable_for_legal_pct: 1.0
  service_unavailable_pct: 5.0
  bad_gateway_pct: 2.0
  gateway_timeout_pct: 3.0
  internal_error_pct: 2.0
  retry_after_sec: [30, 120]

  # Severe connection failures
  timeout_pct: 10.0
  timeout_sec: [30, 90]
  connection_reset_pct: 5.0
  connection_stall_pct: 3.0
  connection_stall_start_sec: [0, 1]
  connection_stall_sec: [30, 60]
  slow_response_pct: 5.0
  slow_response_sec: [10, 30]
  incomplete_response_pct: 5.0
  incomplete_response_bytes: [50, 500]

  # Heavy content malformations
  wrong_content_type_pct: 5.0
  encoding_mismatch_pct: 3.0
  truncated_html_pct: 3.0
  invalid_encoding_pct: 2.0
  charset_confusion_pct: 2.0
  malformed_meta_pct: 1.0

  # Redirect injection
  redirect_loop_pct: 3.0
  max_redirect_loop_hops: 15
  ssrf_redirect_pct: 2.0

  # Very aggressive burst escalation
  burst:
    enabled: true
    interval_sec: 30
    duration_sec: 8
    rate_limit_pct: 90
    forbidden_pct: 70
