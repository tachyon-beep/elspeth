# Bug Promotion Manifest: 2026-01-22 Triage Session

This manifest tracks the high-priority bugs promoted from automated triage on 2026-01-22.

## Overview

**Promotion Date:** 2026-01-22
**Source:** `docs/bugs/generated/formatted/high_priority/`
**Destination:** `docs/bugs/open/`
**Total Bugs Promoted:** 9 (1 P0, 8 P1)

## Promoted Bugs

### P0 - Critical (1 bug)

#### P0-2026-01-22-source-row-payloads-never-persisted.md
- **Component:** Landscape / Engine
- **Summary:** Source row payloads are never persisted during normal runs, leaving `rows.source_data_ref` NULL and causing `get_row_data` to return `NEVER_STORED`. This violates the non-negotiable audit requirement to store raw source data at entry.
- **Impact:** Audit trail missing raw source entries, explain/resume tooling cannot recover original row data
- **Verification:** Link to [verification report](../generated/verification/source-row-payloads-never-persisted/)

---

### P1 - Major (8 bugs)

#### P1-2026-01-22-artifact-descriptor-leaks-secrets.md
- **Component:** Contracts / Sinks
- **Summary:** `ArtifactDescriptor.for_database` and `for_webhook` embed raw URLs (including credentials) into `path_or_uri`, leaking secrets into the audit trail and exports.
- **Impact:** Security breach - secrets persist in audit database and appear in exports/TUI
- **Verification:** Link to [verification report](../generated/verification/artifact-descriptor-leaks-secrets/)

#### P1-2026-01-22-decimal-nan-infinity-bypass-rejection.md
- **Component:** Canonical
- **Summary:** `canonical_json` converts `Decimal("NaN")` and `Decimal("Infinity")` to JSON strings instead of raising `ValueError`, violating the "reject NaN/Infinity" policy.
- **Impact:** Non-finite numeric values can be accepted and hashed without error, masking invalid data states
- **Verification:** Link to [verification report](../generated/verification/decimal-nan-infinity-bypass-rejection/)

#### P1-2026-01-22-duplicate-branch-names-break-coalesce.md
- **Component:** Config / DAG
- **Summary:** Fork and coalesce configurations allow duplicate branch names. Coalesce tracking uses branch name as dict key, causing overwrites that prevent `require_all`/`quorum` merges from completing.
- **Impact:** Pipelines can hang at coalesce or drop tokens, silent loss of branch results
- **Verification:** Link to [verification report](../generated/verification/duplicate-branch-names-break-coalesce/)

#### P1-2026-01-22-duplicate-gate-names-overwrite-mapping.md
- **Component:** Config / DAG
- **Summary:** Gate names are documented as unique but not validated. Duplicates overwrite `config_gate_id_map`, causing multiple gates to share a node ID and corrupting routing/audit attribution.
- **Impact:** Unpredictable gate routing, audit trail misattribution to wrong gate node
- **Verification:** Link to [verification report](../generated/verification/duplicate-gate-names-overwrite-mapping/)

#### P1-2026-01-22-explain-returns-arbitrary-token.md
- **Component:** Landscape / Lineage
- **Summary:** `explain(row_id)` blindly picks the first token for a row, yielding incomplete/wrong lineage when multiple tokens exist (fork/expand/coalesce). Missing sink-based disambiguation.
- **Impact:** Auditors receive misleading lineage for forked/expanded rows, compromising audit integrity
- **Verification:** Link to [verification report](../generated/verification/explain-returns-arbitrary-token/)

#### P1-2026-01-22-recovery-skips-rows-multi-sink.md
- **Component:** Checkpoint / Recovery
- **Summary:** Recovery uses the latest checkpoint's row_index as a boundary, but checkpoints are ordered by sink write sequence. Rows routed to later/failed sinks get skipped on resume.
- **Impact:** Resume completes without emitting outputs for some sinks, violating auditability guarantees
- **Verification:** Link to [verification report](../generated/verification/recovery-skips-rows-multi-sink/)

#### P1-2026-01-22-reproducibility-grade-not-updated-after-purge.md
- **Component:** Retention / Landscape
- **Summary:** Purging payloads deletes blobs but never updates `runs.reproducibility_grade`, leaving runs with nondeterministic calls marked `REPLAY_REPRODUCIBLE` after payloads are removed.
- **Impact:** Audit metadata misrepresents replay capability after purge, overstating reproducibility
- **Verification:** Link to [verification report](../generated/verification/reproducibility-grade-not-updated-after-purge/)

#### P1-2026-01-22-run-repository-masks-invalid-export-status.md
- **Component:** Landscape / Repositories
- **Summary:** `RunRepository.load` treats falsy `export_status` values as None (e.g., empty string), bypassing enum validation instead of crashing on corrupted Tier 1 data.
- **Impact:** Violates Tier 1 "crash on anomaly" rule, silently accepts corrupted audit data
- **Verification:** Link to [verification report](../generated/verification/run-repository-masks-invalid-export-status/)

---

## Next Steps

1. **Prioritize P0 bug first:** Address `P0-2026-01-22-source-row-payloads-never-persisted.md` immediately as it blocks audit trail compliance.

2. **Security fixes (P1):** Address `P1-2026-01-22-artifact-descriptor-leaks-secrets.md` next to prevent secret leakage.

3. **Data integrity fixes (P1):** Address remaining P1 bugs affecting audit accuracy:
   - `duplicate-branch-names-break-coalesce.md`
   - `duplicate-gate-names-overwrite-mapping.md`
   - `explain-returns-arbitrary-token.md`
   - `recovery-skips-rows-multi-sink.md`
   - `reproducibility-grade-not-updated-after-purge.md`

4. **Canonical fixes (P1):** Address `decimal-nan-infinity-bypass-rejection.md` and `run-repository-masks-invalid-export-status.md` to enforce data quality gates.

## Verification Reports

Detailed verification reports for each bug are available in `docs/bugs/generated/verification/<bug-name>/`.

## Notes

All bugs have been moved from `docs/bugs/generated/formatted/high_priority/` to `docs/bugs/open/` and are ready for assignment and resolution.
