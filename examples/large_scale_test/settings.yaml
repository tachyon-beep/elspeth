source:
  plugin: csv
  options:
    path: examples/large_scale_test/input.csv
    schema:
      mode: fixed
      fields:
      - 'id: int'
      - 'value: float'
      - 'category: str'
      - 'priority: int'
      - 'timestamp: str'
    on_validation_failure: discard
    on_success: output
gates:
- name: value_threshold
  condition: row['value'] >= 5000
  routes:
    'true': high_value
    'false': output
sinks:
  output:
    plugin: csv
    options:
      path: examples/large_scale_test/output/normal.csv
      schema:
        mode: fixed
        fields:
        - 'id: int'
        - 'value: float'
        - 'category: str'
        - 'priority: int'
        - 'timestamp: str'
  high_value:
    plugin: csv
    options:
      path: examples/large_scale_test/output/high_value.csv
      schema:
        mode: fixed
        fields:
        - 'id: int'
        - 'value: float'
        - 'category: str'
        - 'priority: int'
        - 'timestamp: str'
landscape:
  url: sqlite:///examples/large_scale_test/runs/audit.db
