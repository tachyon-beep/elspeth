source:
  plugin: csv
  options:
    path: examples/chaosllm_sentiment/input.csv
    schema:
      mode: fixed
      fields:
      - 'id: int'
      - 'text: str'
    on_validation_failure: discard
    on_success: output
transforms:
- plugin: openrouter_llm
  options:
    api_key: fake-key-chaosllm-does-not-check
    base_url: http://127.0.0.1:8199/v1
    model: chaosllm/fake-gpt-4
    timeout_seconds: 10
    template: 'Analyze the sentiment of the following text and respond with ONLY a JSON object.


      Text: {{ row.text }}


      Respond with exactly this format (no other text):

      {"sentiment": "positive" or "negative" or "neutral", "confidence": 0.0-1.0, "summary": "brief explanation"}

      '
    temperature: 0.0
    response_field: sentiment_analysis
    required_input_fields:
    - text
    on_error: quarantine
    schema:
      mode: observed
    on_success: output
sinks:
  output:
    plugin: json
    options:
      path: examples/chaosllm_sentiment/output/results.json
      schema:
        mode: observed
      format: jsonl
  quarantine:
    plugin: json
    options:
      path: examples/chaosllm_sentiment/output/quarantined.json
      schema:
        mode: observed
      format: jsonl
landscape:
  url: sqlite:///examples/chaosllm_sentiment/runs/audit.db
retry:
  max_attempts: 5
  initial_delay_seconds: 0.5
  max_delay_seconds: 10.0
  exponential_base: 2.0
